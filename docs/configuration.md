# Gufo Agent Configuration

Gufo Agent reads configuration from YAML or JSO file.

## Global Configuration

### $version

Config format version. Must be set to `1.0`

### $type

Config type. Must be set to `zeroconf`.

### labels

Optional agent-level labels. Agent-level labels are appended to all collected metrics.
Labels are set as key-value pairs.

Example:

=== "YAML"

    ``` yaml
    labels:
        dc: south
        zone: europe
    ```

=== "JSON"

    ``` json
    {
        "labels": {
            "dc": "south",
            "zone": "europe"
        }
    }
    ```

## sender

Metrics sender configuration.

Example:

=== "YAML"

    ``` yaml
    sender:
        type: openmetrics
        mode: pull
        listen: "0.0.0.0:3000"
    ```

=== "JSON"

    ``` json
    {
        "sender": {
            "type": "openmetrics",
            "mode": "pull",
            "listen": "0.0.0.0:3000"
        }
    }
    ```

### type

Sender's type. Must be `openmetrics`.

### mode

Sender's mode of operation. Must be `pull`.

### listen

Address and port to listen the metrics endpoint.

Example:

=== "YAML"

    ``` yaml
    listen: "0.0.0.0:3000"
    ```

=== "JSON"

    ``` json
    "listen": "0.0.0.0:3000"
    ```

## collectors

List of configured collectors. Each collector has a common configuration part
and may have additional collector options.
Refer to the [Collectors Reference](collectors/index.md) for an additional
options.

Example:

=== "YAML"

    ``` yaml
    collectors:
      - id: Filesystem
        type: fs
        interval: 10
        labels:
          project: P1
      - id: Memory
        type: memory
        disabled: true
        interval: 10
        labels:
          project: P2
    ```

=== "JSON"

    ``` json
    {
        "collectors": [
            {
                "id": "Filesystem",
                "type": "fs",
                "interval": 10,
                "labels": {
                    "project": "P1"
                }
            },
            {
                "id": "Memory",
                "type": "memory",
                "disabled": true,
                "interval": 10,
                "labels": {
                    "project": "P2"
                } 
            }
        ]
    }   
    ```

### id

The unique collector instance's id. Must be unique within the agent's configuration.

### type

The collector type. Refer to the [Collectors Reference](collectors/index.md)
for the details.

### interval

Collector's running interval, in seconds.

### labels

Optional collector instance labels. These labels are appended to all metrics,
generated by instance.

### disabled

Setting to `true` allows to switch off the collector instance without removing
the config.

## Example

=== "YAML"

    ``` yaml
    $version: "1.0"
    $type: "zeroconf"
    labels:
        dc: south
        zone: europe
    sender:
        type: openmetrics
        mode: pull
        listen: "0.0.0.0:3000"
    collectors:
      - id: Filesystem
        type: fs
        interval: 10
        labels:
          project: P1
      - id: Memory
        type: memory
        disabled: true
        interval: 10
        labels:
          project: P2
    ```

=== "JSON"

    ``` json
    {
        "$version": "1.0",
        "$type": "zeroconf",
        "labels": {
            "dc": "south",
            "zone": "europe"
        },
        "sender": {
            "type": "openmetrics",
            "method": "pull",
            "listen": "0.0.0.0:3000"
        },
        "collectors": [
            {
                "id": "Filesystem",
                "type": "fs",
                "interval": 10,
                "labels": {
                    "project": "P1"
                }
            },
            {
                "id": "Memory",
                "type": "memory",
                "disabled": true,
                "interval": 10,
                "labels": {
                    "project": "P2"
                } 
            }
        ]
    }
    ```