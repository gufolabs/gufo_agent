{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Gufo Agent \u00b6 Gufo Agent is a lightweight software for collecting and exposing system metrics and performing QoS and SLA checks. We implement it in the Rust language with correctness, performance, and low system resource usage in mind. The Gufo Agent is built around four cornerstones: Zeroconf configuration system allows plain YAML configuration files in simple cases while allowing the flexible config resolution process for the centralized management in more complex ones. The sophisticated Config Discovery allows the automatic generation of config in most cases. The collector plugins, perform the measurements and collect the metrics. The API is developer-friendly, enforces correctness, and allows a rapid development process. Internal scheduler which runs the collectors as defined in the config. The sender exposes the collected metrics. The openmetrics endpoint is available out-of-the-box, allowing seamless Prometheus integration. The Rust language's unique properties allowed us to build an agent which can be used not only for the trivial system metrics collection but for performing high-precision measurements as well. Compatibility \u00b6 Supported platforms: OS libc Arch Linux glibc 2.17+ amd64 Linux glibc 2.17+ aarch64 Obtaining the Gufo Agent \u00b6 View the CHANGELOG for the latest updates and changes by version. Automated Install \u00b6 curl https://sh.gufolabs.com/ga | sh Binary Downloads \u00b6 The binary downloads are available from each of the Github Releases page in the \"Assets\" section. Building from Source \u00b6 Clone Gufo Agent repository git clone https://github.com/gufolabs/gufo_agent.git Go to Gufo Agent directory cd gufo_agent Install proper Rust toolchain ./tools/build/setup-rust.sh Build cargo build --release Resulting binary location is ./target/release/gufo-agent Running \u00b6 To generate the default configuration use: gufo-agent --config-discovery > config.yml See Config Discovery for details. Then run the Gufo Agent: gufo-agent --config=config.yml See Gufo Agent Man Pages for details. Available Collectors \u00b6 Type Description block_io Block I/O devices statistics cpu CPU statistics dns Perform DNS request using system resolver exec Execute command and read output fs File systems statistic http Perform HTTP request memory Host's memory statistics modbus_rtu Perform Modbus RTU requests modbus_tcp Perform Modbus TCP requests mysql MySQL instance statistics mysql_query Perform MySQL queries network Host's network interface statistics pgbouncer PgBouncer statistics postgres PostgreSQL instance statistics postgres_query Perform PostgreSQL queries procstat Process' statistics redis Redis instance statistics scrape Fetch data from OpenMetrics/Prometheus endpoints sockets Host's sockets statistics spool Read files in openmetrics format from a directory twamp_reflector TWAMP reflector for SLA probing twamp_sender TWAMP sender for SLA probing uptime System uptime On Gufo Stack \u00b6 This product is a part of Gufo Stack - the collaborative effort led by Gufo Labs . Our goal is to create a robust and flexible set of tools to create network management software and automate routine administration tasks. To do this, we extract the key technologies that have proven themselves in the NOC and bring them as separate packages. Then we work on API, performance tuning, documentation, and testing. The NOC uses the final result as the external dependencies. Gufo Stack makes the NOC better, and this is our primary task. But other products can benefit from Gufo Stack too. So we believe that our effort will make the other network management products better.","title":"Home"},{"location":"#gufo-agent","text":"Gufo Agent is a lightweight software for collecting and exposing system metrics and performing QoS and SLA checks. We implement it in the Rust language with correctness, performance, and low system resource usage in mind. The Gufo Agent is built around four cornerstones: Zeroconf configuration system allows plain YAML configuration files in simple cases while allowing the flexible config resolution process for the centralized management in more complex ones. The sophisticated Config Discovery allows the automatic generation of config in most cases. The collector plugins, perform the measurements and collect the metrics. The API is developer-friendly, enforces correctness, and allows a rapid development process. Internal scheduler which runs the collectors as defined in the config. The sender exposes the collected metrics. The openmetrics endpoint is available out-of-the-box, allowing seamless Prometheus integration. The Rust language's unique properties allowed us to build an agent which can be used not only for the trivial system metrics collection but for performing high-precision measurements as well.","title":"Gufo Agent"},{"location":"#compatibility","text":"Supported platforms: OS libc Arch Linux glibc 2.17+ amd64 Linux glibc 2.17+ aarch64","title":"Compatibility"},{"location":"#obtaining-the-gufo-agent","text":"View the CHANGELOG for the latest updates and changes by version.","title":"Obtaining the Gufo Agent"},{"location":"#automated-install","text":"curl https://sh.gufolabs.com/ga | sh","title":"Automated Install"},{"location":"#binary-downloads","text":"The binary downloads are available from each of the Github Releases page in the \"Assets\" section.","title":"Binary Downloads"},{"location":"#building-from-source","text":"Clone Gufo Agent repository git clone https://github.com/gufolabs/gufo_agent.git Go to Gufo Agent directory cd gufo_agent Install proper Rust toolchain ./tools/build/setup-rust.sh Build cargo build --release Resulting binary location is ./target/release/gufo-agent","title":"Building from Source"},{"location":"#running","text":"To generate the default configuration use: gufo-agent --config-discovery > config.yml See Config Discovery for details. Then run the Gufo Agent: gufo-agent --config=config.yml See Gufo Agent Man Pages for details.","title":"Running"},{"location":"#available-collectors","text":"Type Description block_io Block I/O devices statistics cpu CPU statistics dns Perform DNS request using system resolver exec Execute command and read output fs File systems statistic http Perform HTTP request memory Host's memory statistics modbus_rtu Perform Modbus RTU requests modbus_tcp Perform Modbus TCP requests mysql MySQL instance statistics mysql_query Perform MySQL queries network Host's network interface statistics pgbouncer PgBouncer statistics postgres PostgreSQL instance statistics postgres_query Perform PostgreSQL queries procstat Process' statistics redis Redis instance statistics scrape Fetch data from OpenMetrics/Prometheus endpoints sockets Host's sockets statistics spool Read files in openmetrics format from a directory twamp_reflector TWAMP reflector for SLA probing twamp_sender TWAMP sender for SLA probing uptime System uptime","title":"Available Collectors"},{"location":"#on-gufo-stack","text":"This product is a part of Gufo Stack - the collaborative effort led by Gufo Labs . Our goal is to create a robust and flexible set of tools to create network management software and automate routine administration tasks. To do this, we extract the key technologies that have proven themselves in the NOC and bring them as separate packages. Then we work on API, performance tuning, documentation, and testing. The NOC uses the final result as the external dependencies. Gufo Stack makes the NOC better, and this is our primary task. But other products can benefit from Gufo Stack too. So we believe that our effort will make the other network management products better.","title":"On Gufo Stack"},{"location":"CHANGELOG/","text":"Changelog \u00b6 All notable changes to this project will be documented in this file. The format is based on Keep a Changelog and this project adheres to Semantic Versioning . To see unreleased changes, please see the CHANGELOG on the main branch guide . [Unreleased] \u00b6 Added: \u00b6 Initial release","title":"Changelog"},{"location":"CHANGELOG/#changelog","text":"All notable changes to this project will be documented in this file. The format is based on Keep a Changelog and this project adheres to Semantic Versioning . To see unreleased changes, please see the CHANGELOG on the main branch guide .","title":"Changelog"},{"location":"CHANGELOG/#unreleased","text":"","title":"[Unreleased]"},{"location":"CHANGELOG/#added","text":"Initial release","title":"Added:"},{"location":"CODE_OF_CONDUCT/","text":"Contributor Covenant Code of Conduct \u00b6 Our Pledge \u00b6 We as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, or sexual identity and orientation. We pledge to act and interact in ways that contribute to an open, welcoming, diverse, inclusive, and healthy community. Our Standards \u00b6 Examples of behavior that contributes to a positive environment for our community include: Demonstrating empathy and kindness toward other people Being respectful of differing opinions, viewpoints, and experiences Giving and gracefully accepting constructive feedback Accepting responsibility and apologizing to those affected by our mistakes, and learning from the experience Focusing on what is best not just for us as individuals, but for the overall community Examples of unacceptable behavior include: The use of sexualized language or imagery, and sexual attention or advances of any kind Trolling, insulting or derogatory comments, and personal or political attacks Public or private harassment Publishing others' private information, such as a physical or email address, without their explicit permission Other conduct which could reasonably be considered inappropriate in a professional setting Enforcement Responsibilities \u00b6 Community leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful. Community leaders have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate. Scope \u00b6 This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Enforcement \u00b6 Instances of abusive, harassing, or otherwise unacceptable behavior may be reported to the community leaders responsible for enforcement at [INSERT CONTACT METHOD]. All complaints will be reviewed and investigated promptly and fairly. All community leaders are obligated to respect the privacy and security of the reporter of any incident. Enforcement Guidelines \u00b6 Community leaders will follow these Community Impact Guidelines in determining the consequences for any action they deem in violation of this Code of Conduct: 1. Correction \u00b6 Community Impact : Use of inappropriate language or other behavior deemed unprofessional or unwelcome in the community. Consequence : A private, written warning from community leaders, providing clarity around the nature of the violation and an explanation of why the behavior was inappropriate. A public apology may be requested. 2. Warning \u00b6 Community Impact : A violation through a single incident or series of actions. Consequence : A warning with consequences for continued behavior. No interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, for a specified period of time. This includes avoiding interactions in community spaces as well as external channels like social media. Violating these terms may lead to a temporary or permanent ban. 3. Temporary Ban \u00b6 Community Impact : A serious violation of community standards, including sustained inappropriate behavior. Consequence : A temporary ban from any sort of interaction or public communication with the community for a specified period of time. No public or private interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, is allowed during this period. Violating these terms may lead to a permanent ban. 4. Permanent Ban \u00b6 Community Impact : Demonstrating a pattern of violation of community standards, including sustained inappropriate behavior, harassment of an individual, or aggression toward or disparagement of classes of individuals. Consequence : A permanent ban from any sort of public interaction within the community. Attribution \u00b6 This Code of Conduct is adapted from the Contributor Covenant , version 2.1, available at https://www.contributor-covenant.org/version/2/1/code_of_conduct.html . Community Impact Guidelines were inspired by Mozilla's code of conduct enforcement ladder . For answers to common questions about this code of conduct, see the FAQ at https://www.contributor-covenant.org/faq . Translations are available at https://www.contributor-covenant.org/translations .","title":"Code of Conduct"},{"location":"CODE_OF_CONDUCT/#contributor-covenant-code-of-conduct","text":"","title":"Contributor Covenant Code of Conduct"},{"location":"CODE_OF_CONDUCT/#our-pledge","text":"We as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, or sexual identity and orientation. We pledge to act and interact in ways that contribute to an open, welcoming, diverse, inclusive, and healthy community.","title":"Our Pledge"},{"location":"CODE_OF_CONDUCT/#our-standards","text":"Examples of behavior that contributes to a positive environment for our community include: Demonstrating empathy and kindness toward other people Being respectful of differing opinions, viewpoints, and experiences Giving and gracefully accepting constructive feedback Accepting responsibility and apologizing to those affected by our mistakes, and learning from the experience Focusing on what is best not just for us as individuals, but for the overall community Examples of unacceptable behavior include: The use of sexualized language or imagery, and sexual attention or advances of any kind Trolling, insulting or derogatory comments, and personal or political attacks Public or private harassment Publishing others' private information, such as a physical or email address, without their explicit permission Other conduct which could reasonably be considered inappropriate in a professional setting","title":"Our Standards"},{"location":"CODE_OF_CONDUCT/#enforcement-responsibilities","text":"Community leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful. Community leaders have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate.","title":"Enforcement Responsibilities"},{"location":"CODE_OF_CONDUCT/#scope","text":"This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event.","title":"Scope"},{"location":"CODE_OF_CONDUCT/#enforcement","text":"Instances of abusive, harassing, or otherwise unacceptable behavior may be reported to the community leaders responsible for enforcement at [INSERT CONTACT METHOD]. All complaints will be reviewed and investigated promptly and fairly. All community leaders are obligated to respect the privacy and security of the reporter of any incident.","title":"Enforcement"},{"location":"CODE_OF_CONDUCT/#enforcement-guidelines","text":"Community leaders will follow these Community Impact Guidelines in determining the consequences for any action they deem in violation of this Code of Conduct:","title":"Enforcement Guidelines"},{"location":"CODE_OF_CONDUCT/#1-correction","text":"Community Impact : Use of inappropriate language or other behavior deemed unprofessional or unwelcome in the community. Consequence : A private, written warning from community leaders, providing clarity around the nature of the violation and an explanation of why the behavior was inappropriate. A public apology may be requested.","title":"1. Correction"},{"location":"CODE_OF_CONDUCT/#2-warning","text":"Community Impact : A violation through a single incident or series of actions. Consequence : A warning with consequences for continued behavior. No interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, for a specified period of time. This includes avoiding interactions in community spaces as well as external channels like social media. Violating these terms may lead to a temporary or permanent ban.","title":"2. Warning"},{"location":"CODE_OF_CONDUCT/#3-temporary-ban","text":"Community Impact : A serious violation of community standards, including sustained inappropriate behavior. Consequence : A temporary ban from any sort of interaction or public communication with the community for a specified period of time. No public or private interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, is allowed during this period. Violating these terms may lead to a permanent ban.","title":"3. Temporary Ban"},{"location":"CODE_OF_CONDUCT/#4-permanent-ban","text":"Community Impact : Demonstrating a pattern of violation of community standards, including sustained inappropriate behavior, harassment of an individual, or aggression toward or disparagement of classes of individuals. Consequence : A permanent ban from any sort of public interaction within the community.","title":"4. Permanent Ban"},{"location":"CODE_OF_CONDUCT/#attribution","text":"This Code of Conduct is adapted from the Contributor Covenant , version 2.1, available at https://www.contributor-covenant.org/version/2/1/code_of_conduct.html . Community Impact Guidelines were inspired by Mozilla's code of conduct enforcement ladder . For answers to common questions about this code of conduct, see the FAQ at https://www.contributor-covenant.org/faq . Translations are available at https://www.contributor-covenant.org/translations .","title":"Attribution"},{"location":"CONTRIBUTING/","text":"Types of contributions \u00b6 You can contribute to the Gufo Labs projects in several way. This repo is a place to discuss and collaborate on GitHub ! Our team is maintaining this repo to preserve our bandwidth, off topic conversations will be closed. Discussions \u00b6 Discussions are where we have conversations. If you'd like help troubleshooting a PR you're working on, have a great new idea, or want to share something amazing you've learned in our docs, join us in discussions . Issues \u00b6 Issues are used to track tasks that contributors can help with. If you've found bug, or something in the content of the documentation that should be updated, search open issues to see if someone else has reported the same thing. If it's something new, open an issue. We'll use the issue to have a conversation about the problem you want to fix. Pull requests \u00b6 A pull request is a way to suggest changes in our repository.","title":"Contributing Guide"},{"location":"CONTRIBUTING/#types-of-contributions","text":"You can contribute to the Gufo Labs projects in several way. This repo is a place to discuss and collaborate on GitHub ! Our team is maintaining this repo to preserve our bandwidth, off topic conversations will be closed.","title":"Types of contributions"},{"location":"CONTRIBUTING/#discussions","text":"Discussions are where we have conversations. If you'd like help troubleshooting a PR you're working on, have a great new idea, or want to share something amazing you've learned in our docs, join us in discussions .","title":"Discussions"},{"location":"CONTRIBUTING/#issues","text":"Issues are used to track tasks that contributors can help with. If you've found bug, or something in the content of the documentation that should be updated, search open issues to see if someone else has reported the same thing. If it's something new, open an issue. We'll use the issue to have a conversation about the problem you want to fix.","title":"Issues"},{"location":"CONTRIBUTING/#pull-requests","text":"A pull request is a way to suggest changes in our repository.","title":"Pull requests"},{"location":"LICENSE/","text":"Copyright \u00a9 2021-2023, Gufo Labs. All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. Neither the name of Gufo Labs nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","title":"License"},{"location":"codebase/","text":"Gufo Agent's Code Base \u00b6 The code base of the project has following structure: .devcontainer/ - Developer's container configuration for VSCode Remote Containers . Just reopen project in remote container to get ready-to-development environment. .github/ - GitHub settings workflows/ - GitHub Actions Workflows settings. Used to run tests and build the documentation. .requirements/ - Python dependencies for development environment. docs.txt - Mkdocs Material dependencies. agent/ - Agent implementation crate. collectors/ - Built-in collectors' implementation crates. common/ - common crate shared between all collectors and agent. docs/ - Mkdocs documentation. examples/ - Various examples. main/ - Main crate. Parses command-line and runs agent. Compiles to binary. proto/ - Various protocols implementation which can be shared between collectors. connection - Connection struct. A wrapper of TCP Connection, input, and output buffers. emodel - G.107 E-Model calculations and constants. frame - FrameReader and FrameWriter traits. openmetrics - OpenMetrics parser. modbus - Modbus data manipulation primitives. ps - Process statistics collection. tos - DSCP/ToS constants. twamp - TWAMP protocol frames. udp - UdpConnection wrapper. .gitignore - Gitignore file. Cargo.toml - Project's workspace configuration. Dockerfile - Dockerfile for development container. macros.py - Project's macroses for Mkdocs . mkdocs.yml - Mkdocs configuration file.","title":"Code Base"},{"location":"codebase/#gufo-agents-code-base","text":"The code base of the project has following structure: .devcontainer/ - Developer's container configuration for VSCode Remote Containers . Just reopen project in remote container to get ready-to-development environment. .github/ - GitHub settings workflows/ - GitHub Actions Workflows settings. Used to run tests and build the documentation. .requirements/ - Python dependencies for development environment. docs.txt - Mkdocs Material dependencies. agent/ - Agent implementation crate. collectors/ - Built-in collectors' implementation crates. common/ - common crate shared between all collectors and agent. docs/ - Mkdocs documentation. examples/ - Various examples. main/ - Main crate. Parses command-line and runs agent. Compiles to binary. proto/ - Various protocols implementation which can be shared between collectors. connection - Connection struct. A wrapper of TCP Connection, input, and output buffers. emodel - G.107 E-Model calculations and constants. frame - FrameReader and FrameWriter traits. openmetrics - OpenMetrics parser. modbus - Modbus data manipulation primitives. ps - Process statistics collection. tos - DSCP/ToS constants. twamp - TWAMP protocol frames. udp - UdpConnection wrapper. .gitignore - Gitignore file. Cargo.toml - Project's workspace configuration. Dockerfile - Dockerfile for development container. macros.py - Project's macroses for Mkdocs . mkdocs.yml - Mkdocs configuration file.","title":"Gufo Agent's Code Base"},{"location":"config_discovery/","text":"Config Discovery \u00b6 Config discovery is the process of generating the config according to the host and its configured services. Usually, it started during the initial agent setup by command: gufo-agent --config-discovery The resulting config will be dumped to the stdout. To save config file use shell redirection: gufo-agent --config-discovery > config.yml The config discovery is the collaborative process and includes phases: Built-in: Each built-in collector decides does it is worth contributing to the config. Custom scripts: Custom scripts are provided in specified locations to analyze the system's environment and to provide appropriate parts of the config. To disable parts of discovery use the --config-discovery-opts option. i.e. to disable checks for uptime and sockets run: gufo-agent --config-discovery --config-discovery-opts=-uptime,-sockets To disable all built-in collectors except the explicitly set ( cpu and memory in our case): gufo-agent --config-discovery --config-discovery-opts=-builtins,+cpu,+memory Config Discovery Scripts \u00b6 Gufo Agent allows using third-party scripts to generate default config. The agent looks at: GA_CONFIG_SCRIPTS environment variable, which contains colon-separated paths (Just like the PATH variable) --config-scripts command line option, which may be used multiple times. Then, the agent runs each script found and parses its output in YAML format. Each script may emit a config for one or more collector instances. Then the agent checks and collect all configs together. Examples \u00b6 Script, generating a single instance of collector: examples/scripts/config/gufolabs.sh 1 2 3 4 5 6 7 8 #!/bin/sh cat << __EOF__ id: GufoLabs dns type: dns interval: 15 query: gufolabs.com n: 10 __EOF__ Script, generating a multiple instances of collector: examples/scripts/config/twamp.sh 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/bin/sh # Configure local twamp sender and reflector cat << __EOF__ - id: Twamp Reflector type: twamp_reflector disabled: true interval: 10 - id: Twamp Sender type: twamp_sender disabled: true interval: 10 reflector: 127.0.0.1 n_packets: 100 model: g711 __EOF__ The overall result: $ gufo-agent --config-discovery --config-discovery-opts=-builtins --config-scripts=examples/scripts/config ... collectors: - id: GufoLabs dns type: dns interval: 15 disabled: false query: gufolabs.com n: 10 - id: Twamp Reflector type: twamp_reflector interval: 10 disabled: true - id: Twamp Sender type: twamp_sender interval: 10 disabled: true reflector: 127.0.0.1 n_packets: 100 model: g711","title":"Config Discovery"},{"location":"config_discovery/#config-discovery","text":"Config discovery is the process of generating the config according to the host and its configured services. Usually, it started during the initial agent setup by command: gufo-agent --config-discovery The resulting config will be dumped to the stdout. To save config file use shell redirection: gufo-agent --config-discovery > config.yml The config discovery is the collaborative process and includes phases: Built-in: Each built-in collector decides does it is worth contributing to the config. Custom scripts: Custom scripts are provided in specified locations to analyze the system's environment and to provide appropriate parts of the config. To disable parts of discovery use the --config-discovery-opts option. i.e. to disable checks for uptime and sockets run: gufo-agent --config-discovery --config-discovery-opts=-uptime,-sockets To disable all built-in collectors except the explicitly set ( cpu and memory in our case): gufo-agent --config-discovery --config-discovery-opts=-builtins,+cpu,+memory","title":"Config Discovery"},{"location":"config_discovery/#config-discovery-scripts","text":"Gufo Agent allows using third-party scripts to generate default config. The agent looks at: GA_CONFIG_SCRIPTS environment variable, which contains colon-separated paths (Just like the PATH variable) --config-scripts command line option, which may be used multiple times. Then, the agent runs each script found and parses its output in YAML format. Each script may emit a config for one or more collector instances. Then the agent checks and collect all configs together.","title":"Config Discovery Scripts"},{"location":"config_discovery/#examples","text":"Script, generating a single instance of collector: examples/scripts/config/gufolabs.sh 1 2 3 4 5 6 7 8 #!/bin/sh cat << __EOF__ id: GufoLabs dns type: dns interval: 15 query: gufolabs.com n: 10 __EOF__ Script, generating a multiple instances of collector: examples/scripts/config/twamp.sh 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/bin/sh # Configure local twamp sender and reflector cat << __EOF__ - id: Twamp Reflector type: twamp_reflector disabled: true interval: 10 - id: Twamp Sender type: twamp_sender disabled: true interval: 10 reflector: 127.0.0.1 n_packets: 100 model: g711 __EOF__ The overall result: $ gufo-agent --config-discovery --config-discovery-opts=-builtins --config-scripts=examples/scripts/config ... collectors: - id: GufoLabs dns type: dns interval: 15 disabled: false query: gufolabs.com n: 10 - id: Twamp Reflector type: twamp_reflector interval: 10 disabled: true - id: Twamp Sender type: twamp_sender interval: 10 disabled: true reflector: 127.0.0.1 n_packets: 100 model: g711","title":"Examples"},{"location":"configuration/","text":"Gufo Agent Configuration \u00b6 Gufo Agent reads configuration from YAML or JSO file. Global Configuration \u00b6 $version \u00b6 Config format version. Must be set to 1.0 $type \u00b6 Config type. Must be set to zeroconf . agent \u00b6 Agent configuration Example: YAML JSON agent : host : test { \"agent\" : { \"host\" : \"test\" } } host \u00b6 Set hostname manually. Example: YAML JSON host : test hos t : \"test\" labels \u00b6 Optional agent-level labels. Agent-level labels are appended to all collected metrics. Labels are set as key-value pairs. Example: YAML JSON labels : dc : south zone : europe \"labels\" : { \"dc\" : \"south\" , \"zone\" : \"europe\" } defaults \u00b6 Collectors' default configuration Example: YAML JSON defaults : interval : 10 \"defaults\" : { \"interval\" : 10 } interval \u00b6 Default collectors' repetition interval in seconds. sender \u00b6 Metrics sender configuration. Example: YAML JSON sender : type : openmetrics mode : pull listen : \"0.0.0.0:3000\" { \"sender\" : { \"type\" : \"openmetrics\" , \"mode\" : \"pull\" , \"listen\" : \"0.0.0.0:3000\" } } type \u00b6 Sender's type. Must be openmetrics . mode \u00b6 Sender's mode of operation. Must be pull . listen \u00b6 Address and port to listen the HTTP metrics endpoint. Don't run HTTP endpoint when ommmited. Example: YAML JSON listen : \"0.0.0.0:3000\" \"listen\" : \"0.0.0.0:3000\" listen_tls \u00b6 Address and port to listen the HTTPS metrics endpoint. Don't run HTTPS endpoint when ommmited. When listen_tls is set, cert_path and key_path configuration parameters must be set Example: YAML JSON listen_tls : \"0.0.0.0:3001\" cert_path : /etc/gufo-agent/tls/agent.crt key_path : /etc/gufo-agent/tls/agent.key \"listen_tls\" : \"0.0.0.0:3000\" , \"cert_path\" : \"/etc/gufo-agent/tls/agent.crt\" , \"key_path\" : \"/etc/gufo-agent/tls/agent.key\" cert_path \u00b6 A path to the TLS certificate (public key) for TLS endpoint. Must be set only with listen_tls parameter. Example: YAML JSON listen_tls : \"0.0.0.0:3001\" cert_path : /etc/gufo-agent/tls/agent.crt key_path : /etc/gufo-agent/tls/agent.key \"listen_tls\" : \"0.0.0.0:3000\" , \"cert_path\" : \"/etc/gufo-agent/tls/agent.crt\" , \"key_path\" : \"/etc/gufo-agent/tls/agent.key\" key_path \u00b6 A path to the TLS private key for TLS endpoint. Must be set only with listen_tls parameter. Example: YAML JSON listen_tls : \"0.0.0.0:3001\" cert_path : /etc/gufo-agent/tls/agent.crt key_path : /etc/gufo-agent/tls/agent.key \"listen_tls\" : \"0.0.0.0:3001\" , \"cert_path\" : \"/etc/gufo-agent/tls/agent.crt\" , \"key_path\" : \"/etc/gufo-agent/tls/agent.key\" client_auth_required_path \u00b6 Path to the trust ancors for the client authentication. Only authenticated clients are accepted. client_auth_required_path effectively enforces mTLS authentication. Used in combination with listen_tls and other HTTPS endpoint configuration. Example: YAML JSON listen_tls : \"0.0.0.0:3001\" cert_path : /etc/gufo-agent/tls/agent.crt key_path : /etc/gufo-agent/tls/agent.key client_auth_requred_path : /etc/gufo-agent/tls/second_ca.crt \"listen_tls\" : \"0.0.0.0:3001\" , \"cert_path\" : \"/etc/gufo-agent/tls/agent.crt\" , \"key_path\" : \"/etc/gufo-agent/tls/agent.key\" , \"client_auth_requred_path\" : \"/etc/gufo-agent/tls/second_ca.crt\" tls_redirect \u00b6 When set to true , HTTP endpoint will perform redirect to the HTTPS one. Must be used only when listen and listen_tls parameters are set. Example: YAML JSON listen : \"0.0.0.0:3000\" listen_tls : \"0.0.0.0:3001\" tls_redirect : true \"listen\" : \"0.0.0.0:3000\" , \"listen_tls\" : \"0.0.0.0:3001\" , \"tls_redirect\" : true , collectors \u00b6 List of configured collectors. Each collector has a common configuration part and may have additional collector options. Refer to the Collectors Reference for an additional options. Example: YAML JSON collectors : - id : Filesystem type : fs interval : 10 labels : project : P1 - id : Memory type : memory disabled : true interval : 10 labels : project : P2 { \"collectors\" : [ { \"id\" : \"Filesystem\" , \"type\" : \"fs\" , \"interval\" : 10 , \"labels\" : { \"project\" : \"P1\" } }, { \"id\" : \"Memory\" , \"type\" : \"memory\" , \"disabled\" : true , \"interval\" : 10 , \"labels\" : { \"project\" : \"P2\" } } ] } id \u00b6 The unique collector instance's id. Must be unique within the agent's configuration. type \u00b6 The collector type. Refer to the Collectors Reference for the details. interval \u00b6 Collector's running interval, in seconds. labels \u00b6 Optional collector instance labels. These labels are appended to all metrics, generated by instance. disabled \u00b6 Setting to true allows to switch off the collector instance without removing the config. Example \u00b6 YAML JSON $version : \"1.0\" $type : \"zeroconf\" agent : host : test labels : dc : south zone : europe sender : type : openmetrics mode : pull listen : \"0.0.0.0:3000\" collectors : - id : Filesystem type : fs interval : 10 labels : project : P1 - id : Memory type : memory disabled : true interval : 10 labels : project : P2 { \"$version\" : \"1.0\" , \"$type\" : \"zeroconf\" , \"agent\" : { \"host\" : \"test\" , \"labels\" : { \"dc\" : \"south\" , \"zone\" : \"europe\" } }, \"sender\" : { \"type\" : \"openmetrics\" , \"method\" : \"pull\" , \"listen\" : \"0.0.0.0:3000\" }, \"collectors\" : [ { \"id\" : \"Filesystem\" , \"type\" : \"fs\" , \"interval\" : 10 , \"labels\" : { \"project\" : \"P1\" } }, { \"id\" : \"Memory\" , \"type\" : \"memory\" , \"disabled\" : true , \"interval\" : 10 , \"labels\" : { \"project\" : \"P2\" } } ] }","title":"Configuration"},{"location":"configuration/#gufo-agent-configuration","text":"Gufo Agent reads configuration from YAML or JSO file.","title":"Gufo Agent Configuration"},{"location":"configuration/#global-configuration","text":"","title":"Global Configuration"},{"location":"configuration/#version","text":"Config format version. Must be set to 1.0","title":"$version"},{"location":"configuration/#type","text":"Config type. Must be set to zeroconf .","title":"$type"},{"location":"configuration/#agent","text":"Agent configuration Example: YAML JSON agent : host : test { \"agent\" : { \"host\" : \"test\" } }","title":"agent"},{"location":"configuration/#host","text":"Set hostname manually. Example: YAML JSON host : test hos t : \"test\"","title":"host"},{"location":"configuration/#labels","text":"Optional agent-level labels. Agent-level labels are appended to all collected metrics. Labels are set as key-value pairs. Example: YAML JSON labels : dc : south zone : europe \"labels\" : { \"dc\" : \"south\" , \"zone\" : \"europe\" }","title":"labels"},{"location":"configuration/#defaults","text":"Collectors' default configuration Example: YAML JSON defaults : interval : 10 \"defaults\" : { \"interval\" : 10 }","title":"defaults"},{"location":"configuration/#interval","text":"Default collectors' repetition interval in seconds.","title":"interval"},{"location":"configuration/#sender","text":"Metrics sender configuration. Example: YAML JSON sender : type : openmetrics mode : pull listen : \"0.0.0.0:3000\" { \"sender\" : { \"type\" : \"openmetrics\" , \"mode\" : \"pull\" , \"listen\" : \"0.0.0.0:3000\" } }","title":"sender"},{"location":"configuration/#type_1","text":"Sender's type. Must be openmetrics .","title":"type"},{"location":"configuration/#mode","text":"Sender's mode of operation. Must be pull .","title":"mode"},{"location":"configuration/#listen","text":"Address and port to listen the HTTP metrics endpoint. Don't run HTTP endpoint when ommmited. Example: YAML JSON listen : \"0.0.0.0:3000\" \"listen\" : \"0.0.0.0:3000\"","title":"listen"},{"location":"configuration/#listen_tls","text":"Address and port to listen the HTTPS metrics endpoint. Don't run HTTPS endpoint when ommmited. When listen_tls is set, cert_path and key_path configuration parameters must be set Example: YAML JSON listen_tls : \"0.0.0.0:3001\" cert_path : /etc/gufo-agent/tls/agent.crt key_path : /etc/gufo-agent/tls/agent.key \"listen_tls\" : \"0.0.0.0:3000\" , \"cert_path\" : \"/etc/gufo-agent/tls/agent.crt\" , \"key_path\" : \"/etc/gufo-agent/tls/agent.key\"","title":"listen_tls"},{"location":"configuration/#cert_path","text":"A path to the TLS certificate (public key) for TLS endpoint. Must be set only with listen_tls parameter. Example: YAML JSON listen_tls : \"0.0.0.0:3001\" cert_path : /etc/gufo-agent/tls/agent.crt key_path : /etc/gufo-agent/tls/agent.key \"listen_tls\" : \"0.0.0.0:3000\" , \"cert_path\" : \"/etc/gufo-agent/tls/agent.crt\" , \"key_path\" : \"/etc/gufo-agent/tls/agent.key\"","title":"cert_path"},{"location":"configuration/#key_path","text":"A path to the TLS private key for TLS endpoint. Must be set only with listen_tls parameter. Example: YAML JSON listen_tls : \"0.0.0.0:3001\" cert_path : /etc/gufo-agent/tls/agent.crt key_path : /etc/gufo-agent/tls/agent.key \"listen_tls\" : \"0.0.0.0:3001\" , \"cert_path\" : \"/etc/gufo-agent/tls/agent.crt\" , \"key_path\" : \"/etc/gufo-agent/tls/agent.key\"","title":"key_path"},{"location":"configuration/#client_auth_required_path","text":"Path to the trust ancors for the client authentication. Only authenticated clients are accepted. client_auth_required_path effectively enforces mTLS authentication. Used in combination with listen_tls and other HTTPS endpoint configuration. Example: YAML JSON listen_tls : \"0.0.0.0:3001\" cert_path : /etc/gufo-agent/tls/agent.crt key_path : /etc/gufo-agent/tls/agent.key client_auth_requred_path : /etc/gufo-agent/tls/second_ca.crt \"listen_tls\" : \"0.0.0.0:3001\" , \"cert_path\" : \"/etc/gufo-agent/tls/agent.crt\" , \"key_path\" : \"/etc/gufo-agent/tls/agent.key\" , \"client_auth_requred_path\" : \"/etc/gufo-agent/tls/second_ca.crt\"","title":"client_auth_required_path"},{"location":"configuration/#tls_redirect","text":"When set to true , HTTP endpoint will perform redirect to the HTTPS one. Must be used only when listen and listen_tls parameters are set. Example: YAML JSON listen : \"0.0.0.0:3000\" listen_tls : \"0.0.0.0:3001\" tls_redirect : true \"listen\" : \"0.0.0.0:3000\" , \"listen_tls\" : \"0.0.0.0:3001\" , \"tls_redirect\" : true ,","title":"tls_redirect"},{"location":"configuration/#collectors","text":"List of configured collectors. Each collector has a common configuration part and may have additional collector options. Refer to the Collectors Reference for an additional options. Example: YAML JSON collectors : - id : Filesystem type : fs interval : 10 labels : project : P1 - id : Memory type : memory disabled : true interval : 10 labels : project : P2 { \"collectors\" : [ { \"id\" : \"Filesystem\" , \"type\" : \"fs\" , \"interval\" : 10 , \"labels\" : { \"project\" : \"P1\" } }, { \"id\" : \"Memory\" , \"type\" : \"memory\" , \"disabled\" : true , \"interval\" : 10 , \"labels\" : { \"project\" : \"P2\" } } ] }","title":"collectors"},{"location":"configuration/#id","text":"The unique collector instance's id. Must be unique within the agent's configuration.","title":"id"},{"location":"configuration/#type_2","text":"The collector type. Refer to the Collectors Reference for the details.","title":"type"},{"location":"configuration/#interval_1","text":"Collector's running interval, in seconds.","title":"interval"},{"location":"configuration/#labels_1","text":"Optional collector instance labels. These labels are appended to all metrics, generated by instance.","title":"labels"},{"location":"configuration/#disabled","text":"Setting to true allows to switch off the collector instance without removing the config.","title":"disabled"},{"location":"configuration/#example","text":"YAML JSON $version : \"1.0\" $type : \"zeroconf\" agent : host : test labels : dc : south zone : europe sender : type : openmetrics mode : pull listen : \"0.0.0.0:3000\" collectors : - id : Filesystem type : fs interval : 10 labels : project : P1 - id : Memory type : memory disabled : true interval : 10 labels : project : P2 { \"$version\" : \"1.0\" , \"$type\" : \"zeroconf\" , \"agent\" : { \"host\" : \"test\" , \"labels\" : { \"dc\" : \"south\" , \"zone\" : \"europe\" } }, \"sender\" : { \"type\" : \"openmetrics\" , \"method\" : \"pull\" , \"listen\" : \"0.0.0.0:3000\" }, \"collectors\" : [ { \"id\" : \"Filesystem\" , \"type\" : \"fs\" , \"interval\" : 10 , \"labels\" : { \"project\" : \"P1\" } }, { \"id\" : \"Memory\" , \"type\" : \"memory\" , \"disabled\" : true , \"interval\" : 10 , \"labels\" : { \"project\" : \"P2\" } } ] }","title":"Example"},{"location":"creating_new_collector/","text":"Creating New Collector \u00b6 Before creating a new collector, you should select and unique name. The collector name should not clash with Rust's reserved keywords. The name must be short and meaningful. Check for the collectors/ directory for already used names. Then create collector from template: $ ./tools/dev/new-collector.py <name> Where <name> is the name of your collector. Then add your implementation into collectors/<name>/src/lib.rs .","title":"Creating New Collector"},{"location":"creating_new_collector/#creating-new-collector","text":"Before creating a new collector, you should select and unique name. The collector name should not clash with Rust's reserved keywords. The name must be short and meaningful. Check for the collectors/ directory for already used names. Then create collector from template: $ ./tools/dev/new-collector.py <name> Where <name> is the name of your collector. Then add your implementation into collectors/<name>/src/lib.rs .","title":"Creating New Collector"},{"location":"devcommon/","text":"Developer's Common Tasks \u00b6 Bump Version \u00b6 Change [package/version in main/Cargo.toml Add section in CHANGELOG.md Change VERSION in tools/install/agent-init.sh Bump Rust Version \u00b6 Change RUST_VERSION in tools/build/setup-rust.sh","title":"Common Tasks"},{"location":"devcommon/#developers-common-tasks","text":"","title":"Developer's Common  Tasks"},{"location":"devcommon/#bump-version","text":"Change [package/version in main/Cargo.toml Add section in CHANGELOG.md Change VERSION in tools/install/agent-init.sh","title":"Bump Version"},{"location":"devcommon/#bump-rust-version","text":"Change RUST_VERSION in tools/build/setup-rust.sh","title":"Bump Rust Version"},{"location":"devtools/","text":"Developer's Tools \u00b6 Gufo Agent contains several developer tools which can be used to speedup development. configure.py \u00b6 ./tools/dev/configure.py Check dependencies version and expand code templates. Raises an error if the several crates depends on the different versions of the same dependency. Should be used every time when rust code templates is changed. Launched automatically by new-collector.py list-deps.py \u00b6 ./tools/dev/list-deps.py Parses and prints all dependencies versions and appropriate crates: ... * bigdecimal v0.3: collectors/pgbouncer collectors/postgres_query * bytes v1.4: agent collectors/twamp_reflector collectors/twamp_sender proto/connection proto/frame proto/twamp proto/udp * cfg-if v1.0: collectors/memory ... To show single dependency use it as parameter $ ./tools/dev/list-deps.py nom * nom v7.1: proto/openmetrics new-collector.py \u00b6 ./tools/dev/new-collector.py <name> Create boilerplate for a new collector <name> . Calls configure.py setup-rust.sh \u00b6 ./tools/build/setup-rust.sh Install and set-up proper version of the Rust toolchain. Called by GitHub CI and from Dockerfile. build-all.sh \u00b6 Install Cross and build all supported distributions. Called by GitHub CI.","title":"Developer's Tools"},{"location":"devtools/#developers-tools","text":"Gufo Agent contains several developer tools which can be used to speedup development.","title":"Developer's Tools"},{"location":"devtools/#configurepy","text":"./tools/dev/configure.py Check dependencies version and expand code templates. Raises an error if the several crates depends on the different versions of the same dependency. Should be used every time when rust code templates is changed. Launched automatically by new-collector.py","title":"configure.py"},{"location":"devtools/#list-depspy","text":"./tools/dev/list-deps.py Parses and prints all dependencies versions and appropriate crates: ... * bigdecimal v0.3: collectors/pgbouncer collectors/postgres_query * bytes v1.4: agent collectors/twamp_reflector collectors/twamp_sender proto/connection proto/frame proto/twamp proto/udp * cfg-if v1.0: collectors/memory ... To show single dependency use it as parameter $ ./tools/dev/list-deps.py nom * nom v7.1: proto/openmetrics","title":"list-deps.py"},{"location":"devtools/#new-collectorpy","text":"./tools/dev/new-collector.py <name> Create boilerplate for a new collector <name> . Calls configure.py","title":"new-collector.py"},{"location":"devtools/#setup-rustsh","text":"./tools/build/setup-rust.sh Install and set-up proper version of the Rust toolchain. Called by GitHub CI and from Dockerfile.","title":"setup-rust.sh"},{"location":"devtools/#build-allsh","text":"Install Cross and build all supported distributions. Called by GitHub CI.","title":"build-all.sh"},{"location":"environment/","text":"Developer's Environment \u00b6 To participate in development you need to prepare the developer's environment first. Depending on the preferable tools, your mileage may vary. Visual Studio Code Dev Container \u00b6 The easiest way to start the development is to use Visual Studio Code with Remote Containers plugin. Just click on the green sign in the lower-left corner and select the \"Reopen in Container\" menu item. You'll get all the required formatting and linting settings out of the box.","title":"Developer's Environment"},{"location":"environment/#developers-environment","text":"To participate in development you need to prepare the developer's environment first. Depending on the preferable tools, your mileage may vary.","title":"Developer's Environment"},{"location":"environment/#visual-studio-code-dev-container","text":"The easiest way to start the development is to use Visual Studio Code with Remote Containers plugin. Just click on the green sign in the lower-left corner and select the \"Reopen in Container\" menu item. You'll get all the required formatting and linting settings out of the box.","title":"Visual Studio Code Dev Container"},{"location":"faq/","text":"FAQ \u00b6 What is \"Gufo\"? Gufo means the Owl in Italian. Why the owls? We love owls and the viable parts of our technologies were proven at the project, named \"the Owl\". What is \"Gufo Labs\"? Gufo Labs is the Milan-based company specialized on network and IT consulting, and on software research. What is \"Gufo Stack\"? We've extracted core components behind the NOC and released them as independent packages, available under the terms of the 3-clause BSD license. Our software shares common code quality standards and is battle-proven under the high load. We hope our key components will help the engineers and the developers to build reliable networks and robust network management software. See more for details .","title":"FAQ"},{"location":"faq/#faq","text":"What is \"Gufo\"? Gufo means the Owl in Italian. Why the owls? We love owls and the viable parts of our technologies were proven at the project, named \"the Owl\". What is \"Gufo Labs\"? Gufo Labs is the Milan-based company specialized on network and IT consulting, and on software research. What is \"Gufo Stack\"? We've extracted core components behind the NOC and released them as independent packages, available under the terms of the 3-clause BSD license. Our software shares common code quality standards and is battle-proven under the high load. We hope our key components will help the engineers and the developers to build reliable networks and robust network management software. See more for details .","title":"FAQ"},{"location":"installation/","text":"Installing Agent \u00b6 Automated Install \u00b6 curl https://sh.gufolabs.com/ga | sh Binary Downloads \u00b6 The binary downloads are available from each of the Github Releases page in the \"Assets\" section. Debian \u00b6 Download .deb file from Github Releases Install dpkg -i <deb-path> where <deb-path> is a path to downloaded .deb file. Other Glibc Linux Systems \u00b6 Download archive gufo-agent-<version>_linux_<arch>.tgz , where: <version> - package version <arch> - desired architecture Unpack archive: tar zxf <tar-path> where <tar-path> is a path to the downloaded archive. Building from Source \u00b6 Clone Gufo Agent repository git clone https://github.com/gufolabs/gufo_agent.git Go to Gufo Agent directory cd gufo_agent Install proper Rust toolchain ./tools/build/setup-rust.sh Build cargo build --release Resulting binary location is ./target/release/gufo-agent","title":"Installation"},{"location":"installation/#installing-agent","text":"","title":"Installing Agent"},{"location":"installation/#automated-install","text":"curl https://sh.gufolabs.com/ga | sh","title":"Automated Install"},{"location":"installation/#binary-downloads","text":"The binary downloads are available from each of the Github Releases page in the \"Assets\" section.","title":"Binary Downloads"},{"location":"installation/#debian","text":"Download .deb file from Github Releases Install dpkg -i <deb-path> where <deb-path> is a path to downloaded .deb file.","title":"Debian"},{"location":"installation/#other-glibc-linux-systems","text":"Download archive gufo-agent-<version>_linux_<arch>.tgz , where: <version> - package version <arch> - desired architecture Unpack archive: tar zxf <tar-path> where <tar-path> is a path to the downloaded archive.","title":"Other Glibc Linux Systems"},{"location":"installation/#building-from-source","text":"Clone Gufo Agent repository git clone https://github.com/gufolabs/gufo_agent.git Go to Gufo Agent directory cd gufo_agent Install proper Rust toolchain ./tools/build/setup-rust.sh Build cargo build --release Resulting binary location is ./target/release/gufo-agent","title":"Building from Source"},{"location":"man/","text":"Gufo Agent Man Page \u00b6 Name \u00b6 gufo-agent - an universal agent for infrastructure monitoring. Synopsys \u00b6 Usage: gufo-agent [OPTIONS] Options: -q, --quiet -v, --verbose... -k, --insecure [env: GA_INSECURE=] -c, --config <CONFIG> [env: GA_CONFIG=] --hostname <HOSTNAME> [env: GA_HOSTNAME=] --list-collectors --dump-metrics [env: GA_DUMP_METRICS=] --config-discovery --config-discovery-opts <CONFIG_DISCOVERY_OPTS> [env: GA_CONFIG_DISCOVERY_OPTS=] --config-scripts <CONFIG_SCRIPTS> --test --check -h, --help Print help -V, --version Print version Description \u00b6 The gufo-agent is an universal agent for infrastructure monitoring, which collects the configured metrics and exposes them to the OpenMetrics compatible endpoint. The following options are available: -q , --quiet - Be quiet and disable logging. -v , --verbose - Increase logging verbosity. Repeat option to increase verbosity further. The appropriate logging levels: -v - info. -vv - debug. -k , --insecure - Do not check TLS certificate when fetching config over HTTPS. -c , --config <CONFIG> - Load configuration from <CONFIG> path. --hostname - Override agent's hostname. --list-collectors - Print list of compiled collectors and exit. --dump-metrics - Dump metrics database state to stdout after each collector run. --config-discovery - Run config discovery, dump resulting config to stdout and exit. See Config Discovery for details. --config-discovery-opts - Optional config discovery configuration. See Config Discovery for details. --config-scripts - A path to the directory containing config discovery scripts. See Config Discovery for details. --test - Test run. Lauch all configured collectors once, dump resulting database and exit. --check - Test configuration and return non-zero code on error. -h , --help - Print help and exit. -V , --version - Print agent version and exit. Environment \u00b6 The following environment variables affect the execution of gufo-agent : GA_CONFIG - same as --config option. GA_DUMP_METRICS - same as --dump-metrics option. GA_HOSTNAME - same as --hostname option. GA_INSECURE - same as --insecure option. GA_CONFIG_DISCOVERY_OPTS - same as --config-discovery-opts option. GA_CONFIG_SCRIPTS - a colon-sparated list of directories, containing discovery scripts. Signals \u00b6 SIGHUP - reload configuration. Exit Status \u00b6 The gufo-agent returns: 0 - on successful exit. 1 - on error. 2 - on invalid command-line option. Examples \u00b6 Show version: $ gufo-agent --version gufo-agent 0.9.0 Show available collectors: $ gufo-agent --list-collectors block_io cpu dns uptime Generate config: $ gufo-agent --config-discovery > config.yml Run: $ gufo-agent -vv --config=/etc/gufo-agent/config.yml","title":"Man Pages"},{"location":"man/#gufo-agent-man-page","text":"","title":"Gufo Agent Man Page"},{"location":"man/#name","text":"gufo-agent - an universal agent for infrastructure monitoring.","title":"Name"},{"location":"man/#synopsys","text":"Usage: gufo-agent [OPTIONS] Options: -q, --quiet -v, --verbose... -k, --insecure [env: GA_INSECURE=] -c, --config <CONFIG> [env: GA_CONFIG=] --hostname <HOSTNAME> [env: GA_HOSTNAME=] --list-collectors --dump-metrics [env: GA_DUMP_METRICS=] --config-discovery --config-discovery-opts <CONFIG_DISCOVERY_OPTS> [env: GA_CONFIG_DISCOVERY_OPTS=] --config-scripts <CONFIG_SCRIPTS> --test --check -h, --help Print help -V, --version Print version","title":"Synopsys"},{"location":"man/#description","text":"The gufo-agent is an universal agent for infrastructure monitoring, which collects the configured metrics and exposes them to the OpenMetrics compatible endpoint. The following options are available: -q , --quiet - Be quiet and disable logging. -v , --verbose - Increase logging verbosity. Repeat option to increase verbosity further. The appropriate logging levels: -v - info. -vv - debug. -k , --insecure - Do not check TLS certificate when fetching config over HTTPS. -c , --config <CONFIG> - Load configuration from <CONFIG> path. --hostname - Override agent's hostname. --list-collectors - Print list of compiled collectors and exit. --dump-metrics - Dump metrics database state to stdout after each collector run. --config-discovery - Run config discovery, dump resulting config to stdout and exit. See Config Discovery for details. --config-discovery-opts - Optional config discovery configuration. See Config Discovery for details. --config-scripts - A path to the directory containing config discovery scripts. See Config Discovery for details. --test - Test run. Lauch all configured collectors once, dump resulting database and exit. --check - Test configuration and return non-zero code on error. -h , --help - Print help and exit. -V , --version - Print agent version and exit.","title":"Description"},{"location":"man/#environment","text":"The following environment variables affect the execution of gufo-agent : GA_CONFIG - same as --config option. GA_DUMP_METRICS - same as --dump-metrics option. GA_HOSTNAME - same as --hostname option. GA_INSECURE - same as --insecure option. GA_CONFIG_DISCOVERY_OPTS - same as --config-discovery-opts option. GA_CONFIG_SCRIPTS - a colon-sparated list of directories, containing discovery scripts.","title":"Environment"},{"location":"man/#signals","text":"SIGHUP - reload configuration.","title":"Signals"},{"location":"man/#exit-status","text":"The gufo-agent returns: 0 - on successful exit. 1 - on error. 2 - on invalid command-line option.","title":"Exit Status"},{"location":"man/#examples","text":"Show version: $ gufo-agent --version gufo-agent 0.9.0 Show available collectors: $ gufo-agent --list-collectors block_io cpu dns uptime Generate config: $ gufo-agent --config-discovery > config.yml Run: $ gufo-agent -vv --config=/etc/gufo-agent/config.yml","title":"Examples"},{"location":"metrics/","text":"Metrics Reference \u00b6 Metric Type Collector Labels Help avg_ns Gauge dns query, type Average response delay of the serie in nanoseconds bytes Gauge http Response size in bytes compressed_bytes Gauge http Compressed response size in bytes cpu_idle Gauge cpu cpu CPU Idle time, % cpu_interrupt Gauge cpu cpu CPU Interrupt time, % cpu_iowait Gauge cpu cpu CPU IOwait time, % cpu_nice Gauge cpu cpu CPU Nice time, % cpu_system Gauge cpu cpu CPU System time, % cpu_user Gauge cpu cpu CPU User time, % exec_parsed Counter exec script Parsed metric items fs_available Gauge fs dev, mount, type Available disk space, bytes fs_free Gauge fs dev, mount, type Free disk space, bytes fs_inodes Gauge fs dev, mount, type Inodes used fs_inodes_available Gauge fs dev, mount, type Inodes available fs_inodes_total Gauge fs dev, mount, type Total inodes count fs_total Gauge fs dev, mount, type Total disk space, bytes io_in_flight Gauge block_io dev Number of I/Os currently in flight, requests io_read_ios Counter block_io dev Number of read I/Os processed io_read_merges Counter block_io dev Number of read I/Os merged with in-queue I/O io_read_sectors Counter block_io dev Number of sectors read io_read_ticks Counter block_io dev Total wait time for read requests, ms io_ticks Gauge block_io dev Total time this block device has been active, ms io_time_in_queue Gauge block_io dev Total wait time for all requests, ms io_write_ios Counter block_io dev Number of write I/Os processed io_write_merges Counter block_io dev Number of write I/Os merged with in-queue I/O io_write_sectors Counter block_io dev Number of sectors written io_write_ticks Counter block_io dev Total wait time for write requests, ms jitter_ns Gauge dns query, type Jitter of the response delay of the serie in nanoseconds max_ns Gauge dns query, type Maximal response delay of the serie in nanoseconds mem_active Gauge memory Active memory, bytes mem_active Gauge memory ??? mem_active Gauge memory ??? mem_active Gauge memory ??? mem_active_anon Gauge memory Active anonymous memory, bytes mem_active_file Gauge memory Active pagecache memory, bytes mem_anon_huge_pages Gauge memory Non-file backed huge pages mapped into userspace page tables mem_anon_pages Gauge memory Non-file backed pages mapped into userspace page tables mem_avail_ext Gauge memory ??? mem_avail_pagefile Gauge memory ??? mem_avail_phys Gauge memory ??? mem_avail_virt Gauge memory ??? mem_available Gauge memory estimate of how much memory is available for starting new applications mem_bounce Gauge memory Memory used for block device 'bounce buffers' mem_buffers Gauge memory Memory in buffer cache mem_cache Gauge memory ??? mem_cache Gauge memory ??? mem_cache Gauge memory ??? mem_cached Gauge memory Memory in the pagecache mem_commit_limit Gauge memory Total amount of memory currently available to be allocated on the system mem_committed_as Gauge memory The amount of memory presently allocated on the system mem_direct_map_1g Gauge memory The amount of memory being mapped into the kernel space with 1GB size pages mem_direct_map_2m Gauge memory The amount of memory being mapped into the kernel space with 2MB size pages mem_direct_map_4k Gauge memory The amount of memory being mapped into the kernel space with 4k size pages mem_dirty Gauge memory Memory waiting to be written back to disk mem_file_huge_pages Gauge memory Memory used for filesystem data (page cache) allocated with huge pages mem_file_pmd_mapped Gauge memory Page cache mapped into userspace with huge pages mem_free Gauge memory Free memory in bytes mem_huge_page_size Gauge memory default hugepage size (in kB) mem_huge_tlb Gauge memory total amount of memory (in kB), consumed by huge pages of all sizes mem_inactive Gauge memory Memory which has been less recently used mem_inactive Gauge memory ??? mem_inactive Gauge memory ??? mem_inactive Gauge memory ??? mem_inactive_anon Gauge memory Anonymous memory that has not been used recently and can be swapped out mem_inactive_file Gauge memory Pagecache memory that can be reclaimed without huge performance impact mem_k_reclaimable Gauge memory Kernel allocations that the kernel will attempt to reclaim under memory pressure mem_kernel_stack Gauge memory Memory consumed by the kernel stacks of all tasks mem_load Gauge memory ??? mem_m_locked Gauge memory Memory locked with mlock() mem_mapped Gauge memory files which have been mmaped, such as libraries mem_nfs_unstable Gauge memory Always zero. Previous counted pages which had been written to the server, but has not been committed to stable storage mem_page_tables Gauge memory Memory consumed by userspace page tables mem_paging Gauge memory ??? mem_per_cpu Gauge memory Memory allocated to the percpu allocator used to back percpu allocations. This stat excludes the cost of metadata mem_s_reclaimable Gauge memory Part of Slab, that might be reclaimed, such as caches mem_s_unreclaim Gauge memory Part of Slab, that cannot be reclaimed on memory pressure mem_sh_mem Gauge memory Total memory used by shared memory (shmem) and tmpfs mem_sh_mem_huge_pages Gauge memory Memory used by shared memory (shmem) and tmpfs allocated with huge pages mem_sh_mem_pmd_mapped Gauge memory Shared memory mapped into userspace with huge pages mem_slab Gauge memory in-kernel data structures cache mem_total Gauge memory Total memory in bytes mem_total_pagefile Gauge memory ??? mem_total_phys Gauge memory ??? mem_total_virt Gauge memory ??? mem_unevictable Gauge memory Memory allocated for userspace which cannot be reclaimed mem_vmalloc_chunk Gauge memory largest contiguous block of vmalloc area which is free mem_vmalloc_total Gauge memory total size of vmalloc virtual address space mem_vmalloc_used Gauge memory amount of vmalloc area which is used mem_wired Gauge memory ??? mem_wired Gauge memory ??? mem_wired Gauge memory ??? mem_writeback Gauge memory Memory which is actively being written back to the disk mem_writeback_tmp Gauge memory Memory used by FUSE for temporary writeback buffers mem_zfs_arc Gauge memory ??? min_ns Gauge dns query, type Minimal response delay of the serie in nanoseconds net_rx_errors Counter network iface Total number of receive errors net_rx_octets Counter network iface Total number of octets received net_rx_packets Counter network iface Total number of packets received net_tx_errors Counter network iface Total number of transmit errors net_tx_octets Counter network iface Total number of octets sent net_tx_packets Counter network iface Total number of packets sent pg_blks_hit Counter postgres db Number of times disk blocks were found already in the buffer cache, so that a read was not necessary pg_blks_read Counter postgres db Number of disk blocks read in this database. pg_checksum_failures Counter postgres db Number of data page checksum failures detected in this database pg_conflicts Counter postgres db Number of queries canceled due to conflicts with recovery in this database pg_deadlocks Counter postgres db Number of deadlocks detected in this database. pg_numbackends Gauge postgres db Number of backends currently connected to this database. pg_sessions Counter postgres db Total number of sessions established to this database. pg_sessions_abandoned Counter postgres db Number of database sessions to this database that were terminated because connection to the client was lost. pg_sessions_fatal Counter postgres db Number of database sessions to this database that were terminated by fatal errors. pg_sessions_killed Counter postgres db Number of database sessions to this database that were terminated by operator intervention. pg_temp_bytes Counter postgres db Total amount of data written to temporary files by queries in this database pg_temp_files Counter postgres db Number of temporary files created by queries in this database pg_tup_deleted Counter postgres db Number of rows deleted by queries in this database. pg_tup_fetched Counter postgres db Number of live rows fetched by index scans in this database. pg_tup_inserted Counter postgres db Number of rows inserted by queries in this database. pg_tup_returned Counter postgres db Number of live rows fetched by sequential scans and index entries returned by index scans in this database. pg_tup_updated Counter postgres db Number of rows updated by queries in this database. pg_xact_commit Counter postgres db Number of transactions in this database that have been committed. pg_xact_rollback Counter postgres db Number of transactions in this database that have been rolled back. pgb_total_query_count Counter pgbouncer db Total number of SQL queries pooled by pgbouncer pgb_total_received Counter pgbouncer db Total volume in bytes of network traffic received by pgbouncer pgb_total_sent Counter pgbouncer db Total volume in bytes of network traffic sent by pgbouncer pgb_total_xact_count Counter pgbouncer db Total number of SQL transactions pooled by pgbouncer ps_child_major_faults Counter procstat Labels Total number of major faults that process waited-for children made ps_child_minor_faults Counter procstat Labels Total number of minor faults that process waited-for children made ps_cpu_usage Gauge procstat Labels Total CPU usage in percents ps_involuntary_context_switches Counter procstat Labels Total involuntary context switches ps_major_faults Counter procstat Labels Total number of major faults which require loading memory from disk ps_mem_data Gauge procstat Labels Data segment size ps_mem_lib Gauge procstat Labels Shared library code size ps_mem_locked Gauge procstat Labels Locked memory size ps_mem_rss Gauge procstat Labels Resident set size ps_mem_stack Gauge procstat Labels Stack segment size ps_mem_swap Gauge procstat Labels Swapped-out virtual memory size ps_mem_text Gauge procstat Labels Text segment size ps_mem_total Gauge procstat Labels Total memory ps_minor_faults Counter procstat Labels Total number of minor faults which do not requirie loading memory from disk ps_num_fds Gauge procstat Labels Number of open files ps_num_threads Gauge procstat Labels Number of threads ps_read_bytes Counter procstat Labels Total bytes read ps_read_count Counter procstat Labels Total read I/O operations ps_voluntary_context_switches Counter procstat Labels Total voluntary context switches ps_write_bytes Counter procstat Labels Total bytes written ps_write_count Counter procstat Labels Total write I/O operations redis_active_defrag_hits Gauge redis host, port ??? redis_active_defrag_key_hits Gauge redis host, port ??? redis_active_defrag_key_misses Gauge redis host, port ??? redis_active_defrag_misses Gauge redis host, port ??? redis_active_defrag_running Gauge redis host, port ??? redis_allocator_active Gauge redis host, port ??? redis_allocator_allocated Gauge redis host, port ??? redis_allocator_frag_bytes Gauge redis host, port ??? redis_allocator_frag_ratio Gauge redis host, port ??? redis_allocator_resident Gauge redis host, port ??? redis_allocator_rss_bytes Gauge redis host, port ??? redis_allocator_rss_ratio Gauge redis host, port ??? redis_aof_current_rewrite_time_sec Gauge redis host, port ??? redis_aof_enabled Gauge redis host, port ??? redis_aof_last_cow_size Gauge redis host, port ??? redis_aof_last_rewrite_time_sec Gauge redis host, port ??? redis_aof_rewrite_in_progress Gauge redis host, port ??? redis_aof_rewrite_scheduled Gauge redis host, port ??? redis_aof_rewrites Gauge redis host, port ??? redis_aof_rewrites_consecutive_failures Gauge redis host, port ??? redis_async_loading Gauge redis host, port ??? redis_blocked_clients Gauge redis host, port ??? redis_client_recent_max_input_buffer Gauge redis host, port ??? redis_client_recent_max_output_buffer Gauge redis host, port ??? redis_clients_in_timeout_table Gauge redis host, port ??? redis_cluster_connections Gauge redis host, port ??? redis_connected_clients Gauge redis host, port ??? redis_connected_slaves Gauge redis host, port ??? redis_current_active_defrag_time Gauge redis host, port ??? redis_current_cow_peak Gauge redis host, port ??? redis_current_cow_size Gauge redis host, port ??? redis_current_cow_size_age Gauge redis host, port ??? redis_current_eviction_exceeded_time Gauge redis host, port ??? redis_current_save_keys_processed Gauge redis host, port ??? redis_current_save_keys_total Gauge redis host, port ??? redis_dump_payload_sanitizations Gauge redis host, port ??? redis_evicted_clients Gauge redis host, port ??? redis_evicted_keys Gauge redis host, port ??? redis_expire_cycle_cpu_milliseconds Gauge redis host, port ??? redis_expired_keys Gauge redis host, port ??? redis_expired_stale_perc Gauge redis host, port ??? redis_expired_time_cap_reached_count Gauge redis host, port ??? redis_instantaneous_input_kbps Gauge redis host, port ??? redis_instantaneous_input_repl_kbps Gauge redis host, port ??? redis_instantaneous_ops_per_sec Gauge redis host, port ??? redis_instantaneous_output_kbps Gauge redis host, port ??? redis_instantaneous_output_repl_kbps Gauge redis host, port ??? redis_io_threaded_reads_processed Gauge redis host, port ??? redis_io_threaded_writes_processed Gauge redis host, port ??? redis_io_threads_active Gauge redis host, port ??? redis_keyspace_hits Gauge redis host, port ??? redis_keyspace_misses Gauge redis host, port ??? redis_latest_fork_usec Gauge redis host, port ??? redis_lazyfree_pending_objects Gauge redis host, port ??? redis_lazyfreed_objects Gauge redis host, port ??? redis_loading Gauge redis host, port ??? redis_master_repl_offset Gauge redis host, port ??? redis_master_replid2 Gauge redis host, port ??? redis_maxclients Gauge redis host, port ??? redis_maxmemory Gauge redis host, port ??? redis_mem_aof_buffer Gauge redis host, port ??? redis_mem_clients_normal Gauge redis host, port ??? redis_mem_clients_slaves Gauge redis host, port ??? redis_mem_cluster_links Gauge redis host, port ??? redis_mem_fragmentation_bytes Gauge redis host, port ??? redis_mem_fragmentation_ratio Gauge redis host, port ??? redis_mem_not_counted_for_evict Gauge redis host, port ??? redis_mem_replication_backlog Gauge redis host, port ??? redis_mem_total_replication_buffers Gauge redis host, port ??? redis_migrate_cached_sockets Gauge redis host, port ??? redis_module_fork_in_progress Gauge redis host, port ??? redis_module_fork_last_cow_size Gauge redis host, port ??? redis_number_of_cached_scripts Gauge redis host, port ??? redis_number_of_functions Gauge redis host, port ??? redis_number_of_libraries Gauge redis host, port ??? redis_pubsub_channels Gauge redis host, port ??? redis_pubsub_patterns Gauge redis host, port ??? redis_pubsubshard_channels Gauge redis host, port ??? redis_rdb_bgsave_in_progress Gauge redis host, port ??? redis_rdb_changes_since_last_save Gauge redis host, port ??? redis_rdb_current_bgsave_time_sec Gauge redis host, port ??? redis_rdb_last_bgsave_time_sec Gauge redis host, port ??? redis_rdb_last_cow_size Gauge redis host, port ??? redis_rdb_last_load_keys_expired Gauge redis host, port ??? redis_rdb_last_load_keys_loaded Gauge redis host, port ??? redis_rdb_last_save_time Gauge redis host, port ??? redis_rdb_saves Gauge redis host, port ??? redis_rejected_connections Gauge redis host, port ??? redis_repl_backlog_active Gauge redis host, port ??? redis_repl_backlog_first_byte_offset Gauge redis host, port ??? redis_repl_backlog_histlen Gauge redis host, port ??? redis_repl_backlog_size Gauge redis host, port ??? redis_reply_buffer_expands Gauge redis host, port ??? redis_reply_buffer_shrinks Gauge redis host, port ??? redis_rss_overhead_bytes Gauge redis host, port ??? redis_rss_overhead_ratio Gauge redis host, port ??? redis_second_repl_offset Gauge redis host, port ??? redis_slave_expires_tracked_keys Gauge redis host, port ??? redis_sync_full Gauge redis host, port ??? redis_sync_partial_err Gauge redis host, port ??? redis_sync_partial_ok Gauge redis host, port ??? redis_total_active_defrag_time Gauge redis host, port ??? redis_total_commands_processed Gauge redis host, port ??? redis_total_connections_received Gauge redis host, port ??? redis_total_error_replies Gauge redis host, port ??? redis_total_eviction_exceeded_time Gauge redis host, port ??? redis_total_forks Gauge redis host, port ??? redis_total_net_input_bytes Gauge redis host, port ??? redis_total_net_output_bytes Gauge redis host, port ??? redis_total_net_repl_input_bytes Gauge redis host, port ??? redis_total_net_repl_output_bytes Gauge redis host, port ??? redis_total_reads_processed Gauge redis host, port ??? redis_total_system_memory Gauge redis host, port ??? redis_total_writes_processed Gauge redis host, port ??? redis_tracking_clients Gauge redis host, port ??? redis_tracking_total_items Gauge redis host, port ??? redis_tracking_total_keys Gauge redis host, port ??? redis_tracking_total_prefixes Gauge redis host, port ??? redis_unexpected_error_replies Gauge redis host, port ??? redis_uptime_in_seconds Gauge redis host, port ??? redis_used_cpu_sys Gauge redis host, port ??? redis_used_cpu_sys_children Gauge redis host, port ??? redis_used_cpu_sys_main_thread Gauge redis host, port ??? redis_used_cpu_user Gauge redis host, port ??? redis_used_cpu_user_children Gauge redis host, port ??? redis_used_cpu_user_main_thread Gauge redis host, port ??? redis_used_memory Gauge redis host, port ??? redis_used_memory_dataset Gauge redis host, port ??? redis_used_memory_functions Gauge redis host, port ??? redis_used_memory_lua Gauge redis host, port ??? redis_used_memory_overhead Gauge redis host, port ??? redis_used_memory_peak Gauge redis host, port ??? redis_used_memory_rss Gauge redis host, port ??? redis_used_memory_scripts Gauge redis host, port ??? redis_used_memory_scripts_eval Gauge redis host, port ??? redis_used_memory_startup Gauge redis host, port ??? redis_used_memory_vm_eval Gauge redis host, port ??? redis_used_memory_vm_functions Gauge redis host, port ??? redis_used_memory_vm_total Gauge redis host, port ??? requests_failed Counter dns query, type Failed DNS requests requests_success Counter dns query, type Successful DNS requests requests_total Counter dns query, type Total DNS requests performed spool_jobs Counter spool path Total spool jobs processed spool_jobs_failed Counter spool path Spool jobs failed to process spool_jobs_success Counter spool path Spool jobs processed successfully spool_parsed Counter spool path Parsed metric items swap_cached Gauge memory Memory that once was swapped out, is swapped back in but still also is in the swapfile swap_free Gauge memory Memory which has been evicted from RAM, and is temporarily on the disk swap_total Gauge memory total amount of swap space available tcp4_sockets_used Gauge sockets Total amount of IPv4 TCP sockets used tcp6_sockets_used Gauge sockets Total amount of IPv6 TCP sockets used time_ns Gauge http Response time in nanoseconds twamp_duration_ns Gauge twamp_sender Session duration in nanoseconds twamp_in_avg_delay Gauge twamp_sender Average inbound delay in nanoseconds twamp_in_jitter Gauge twamp_sender itter of the inbound delay in nanoseconds twamp_in_loss Gauge twamp_sender Packet loss in inbound direction twamp_in_max_delay Gauge twamp_sender Maximum inbound delay in nanoseconds twamp_in_min_delay Gauge twamp_sender Minimum inbound delay in nanoseconds twamp_in_mos Gauge twamp_sender eMOS for local end twamp_out_avg_delay Gauge twamp_sender Average outbound delay in nanoseconds twamp_out_loss Gauge twamp_sender Packet loss in outbound direction twamp_out_max_delay Gauge twamp_sender Maximum outbound delay in nanoseconds twamp_out_min_delay Gauge twamp_sender Minimum outbound delay in nanoseconds twamp_out_mos Gauge twamp_sender eMOS for remote end twamp_reflected_pkt Counter twamp_reflector Total amount of the reflected packets twamp_rt_loss Gauge twamp_sender Packet loss in both directions twamp_rx_bitrate Gauge twamp_sender Received bitrate twamp_rx_bytes Gauge twamp_sender Received octets twamp_rx_packets Counter twamp_sender Received packets twamp_rx_pps Gauge twamp_sender Received packet-per-second rate twamp_tx_bitrate Gauge twamp_sender Transmitted bitrate twamp_tx_bytes Counter twamp_sender Transmitted octets twamp_tx_packets Counter twamp_sender Transmitted packets twamp_tx_pps Gauge twamp_sender Transmitted packets-per-second rate udp4_sockets_used Gauge sockets Total amount of IPv4 UDP sockets used udp6_sockets_used Gauge sockets Total amount of IPv6 UDP sockets used uptime Counter uptime System uptime","title":"Metrics Reference"},{"location":"metrics/#metrics-reference","text":"Metric Type Collector Labels Help avg_ns Gauge dns query, type Average response delay of the serie in nanoseconds bytes Gauge http Response size in bytes compressed_bytes Gauge http Compressed response size in bytes cpu_idle Gauge cpu cpu CPU Idle time, % cpu_interrupt Gauge cpu cpu CPU Interrupt time, % cpu_iowait Gauge cpu cpu CPU IOwait time, % cpu_nice Gauge cpu cpu CPU Nice time, % cpu_system Gauge cpu cpu CPU System time, % cpu_user Gauge cpu cpu CPU User time, % exec_parsed Counter exec script Parsed metric items fs_available Gauge fs dev, mount, type Available disk space, bytes fs_free Gauge fs dev, mount, type Free disk space, bytes fs_inodes Gauge fs dev, mount, type Inodes used fs_inodes_available Gauge fs dev, mount, type Inodes available fs_inodes_total Gauge fs dev, mount, type Total inodes count fs_total Gauge fs dev, mount, type Total disk space, bytes io_in_flight Gauge block_io dev Number of I/Os currently in flight, requests io_read_ios Counter block_io dev Number of read I/Os processed io_read_merges Counter block_io dev Number of read I/Os merged with in-queue I/O io_read_sectors Counter block_io dev Number of sectors read io_read_ticks Counter block_io dev Total wait time for read requests, ms io_ticks Gauge block_io dev Total time this block device has been active, ms io_time_in_queue Gauge block_io dev Total wait time for all requests, ms io_write_ios Counter block_io dev Number of write I/Os processed io_write_merges Counter block_io dev Number of write I/Os merged with in-queue I/O io_write_sectors Counter block_io dev Number of sectors written io_write_ticks Counter block_io dev Total wait time for write requests, ms jitter_ns Gauge dns query, type Jitter of the response delay of the serie in nanoseconds max_ns Gauge dns query, type Maximal response delay of the serie in nanoseconds mem_active Gauge memory Active memory, bytes mem_active Gauge memory ??? mem_active Gauge memory ??? mem_active Gauge memory ??? mem_active_anon Gauge memory Active anonymous memory, bytes mem_active_file Gauge memory Active pagecache memory, bytes mem_anon_huge_pages Gauge memory Non-file backed huge pages mapped into userspace page tables mem_anon_pages Gauge memory Non-file backed pages mapped into userspace page tables mem_avail_ext Gauge memory ??? mem_avail_pagefile Gauge memory ??? mem_avail_phys Gauge memory ??? mem_avail_virt Gauge memory ??? mem_available Gauge memory estimate of how much memory is available for starting new applications mem_bounce Gauge memory Memory used for block device 'bounce buffers' mem_buffers Gauge memory Memory in buffer cache mem_cache Gauge memory ??? mem_cache Gauge memory ??? mem_cache Gauge memory ??? mem_cached Gauge memory Memory in the pagecache mem_commit_limit Gauge memory Total amount of memory currently available to be allocated on the system mem_committed_as Gauge memory The amount of memory presently allocated on the system mem_direct_map_1g Gauge memory The amount of memory being mapped into the kernel space with 1GB size pages mem_direct_map_2m Gauge memory The amount of memory being mapped into the kernel space with 2MB size pages mem_direct_map_4k Gauge memory The amount of memory being mapped into the kernel space with 4k size pages mem_dirty Gauge memory Memory waiting to be written back to disk mem_file_huge_pages Gauge memory Memory used for filesystem data (page cache) allocated with huge pages mem_file_pmd_mapped Gauge memory Page cache mapped into userspace with huge pages mem_free Gauge memory Free memory in bytes mem_huge_page_size Gauge memory default hugepage size (in kB) mem_huge_tlb Gauge memory total amount of memory (in kB), consumed by huge pages of all sizes mem_inactive Gauge memory Memory which has been less recently used mem_inactive Gauge memory ??? mem_inactive Gauge memory ??? mem_inactive Gauge memory ??? mem_inactive_anon Gauge memory Anonymous memory that has not been used recently and can be swapped out mem_inactive_file Gauge memory Pagecache memory that can be reclaimed without huge performance impact mem_k_reclaimable Gauge memory Kernel allocations that the kernel will attempt to reclaim under memory pressure mem_kernel_stack Gauge memory Memory consumed by the kernel stacks of all tasks mem_load Gauge memory ??? mem_m_locked Gauge memory Memory locked with mlock() mem_mapped Gauge memory files which have been mmaped, such as libraries mem_nfs_unstable Gauge memory Always zero. Previous counted pages which had been written to the server, but has not been committed to stable storage mem_page_tables Gauge memory Memory consumed by userspace page tables mem_paging Gauge memory ??? mem_per_cpu Gauge memory Memory allocated to the percpu allocator used to back percpu allocations. This stat excludes the cost of metadata mem_s_reclaimable Gauge memory Part of Slab, that might be reclaimed, such as caches mem_s_unreclaim Gauge memory Part of Slab, that cannot be reclaimed on memory pressure mem_sh_mem Gauge memory Total memory used by shared memory (shmem) and tmpfs mem_sh_mem_huge_pages Gauge memory Memory used by shared memory (shmem) and tmpfs allocated with huge pages mem_sh_mem_pmd_mapped Gauge memory Shared memory mapped into userspace with huge pages mem_slab Gauge memory in-kernel data structures cache mem_total Gauge memory Total memory in bytes mem_total_pagefile Gauge memory ??? mem_total_phys Gauge memory ??? mem_total_virt Gauge memory ??? mem_unevictable Gauge memory Memory allocated for userspace which cannot be reclaimed mem_vmalloc_chunk Gauge memory largest contiguous block of vmalloc area which is free mem_vmalloc_total Gauge memory total size of vmalloc virtual address space mem_vmalloc_used Gauge memory amount of vmalloc area which is used mem_wired Gauge memory ??? mem_wired Gauge memory ??? mem_wired Gauge memory ??? mem_writeback Gauge memory Memory which is actively being written back to the disk mem_writeback_tmp Gauge memory Memory used by FUSE for temporary writeback buffers mem_zfs_arc Gauge memory ??? min_ns Gauge dns query, type Minimal response delay of the serie in nanoseconds net_rx_errors Counter network iface Total number of receive errors net_rx_octets Counter network iface Total number of octets received net_rx_packets Counter network iface Total number of packets received net_tx_errors Counter network iface Total number of transmit errors net_tx_octets Counter network iface Total number of octets sent net_tx_packets Counter network iface Total number of packets sent pg_blks_hit Counter postgres db Number of times disk blocks were found already in the buffer cache, so that a read was not necessary pg_blks_read Counter postgres db Number of disk blocks read in this database. pg_checksum_failures Counter postgres db Number of data page checksum failures detected in this database pg_conflicts Counter postgres db Number of queries canceled due to conflicts with recovery in this database pg_deadlocks Counter postgres db Number of deadlocks detected in this database. pg_numbackends Gauge postgres db Number of backends currently connected to this database. pg_sessions Counter postgres db Total number of sessions established to this database. pg_sessions_abandoned Counter postgres db Number of database sessions to this database that were terminated because connection to the client was lost. pg_sessions_fatal Counter postgres db Number of database sessions to this database that were terminated by fatal errors. pg_sessions_killed Counter postgres db Number of database sessions to this database that were terminated by operator intervention. pg_temp_bytes Counter postgres db Total amount of data written to temporary files by queries in this database pg_temp_files Counter postgres db Number of temporary files created by queries in this database pg_tup_deleted Counter postgres db Number of rows deleted by queries in this database. pg_tup_fetched Counter postgres db Number of live rows fetched by index scans in this database. pg_tup_inserted Counter postgres db Number of rows inserted by queries in this database. pg_tup_returned Counter postgres db Number of live rows fetched by sequential scans and index entries returned by index scans in this database. pg_tup_updated Counter postgres db Number of rows updated by queries in this database. pg_xact_commit Counter postgres db Number of transactions in this database that have been committed. pg_xact_rollback Counter postgres db Number of transactions in this database that have been rolled back. pgb_total_query_count Counter pgbouncer db Total number of SQL queries pooled by pgbouncer pgb_total_received Counter pgbouncer db Total volume in bytes of network traffic received by pgbouncer pgb_total_sent Counter pgbouncer db Total volume in bytes of network traffic sent by pgbouncer pgb_total_xact_count Counter pgbouncer db Total number of SQL transactions pooled by pgbouncer ps_child_major_faults Counter procstat Labels Total number of major faults that process waited-for children made ps_child_minor_faults Counter procstat Labels Total number of minor faults that process waited-for children made ps_cpu_usage Gauge procstat Labels Total CPU usage in percents ps_involuntary_context_switches Counter procstat Labels Total involuntary context switches ps_major_faults Counter procstat Labels Total number of major faults which require loading memory from disk ps_mem_data Gauge procstat Labels Data segment size ps_mem_lib Gauge procstat Labels Shared library code size ps_mem_locked Gauge procstat Labels Locked memory size ps_mem_rss Gauge procstat Labels Resident set size ps_mem_stack Gauge procstat Labels Stack segment size ps_mem_swap Gauge procstat Labels Swapped-out virtual memory size ps_mem_text Gauge procstat Labels Text segment size ps_mem_total Gauge procstat Labels Total memory ps_minor_faults Counter procstat Labels Total number of minor faults which do not requirie loading memory from disk ps_num_fds Gauge procstat Labels Number of open files ps_num_threads Gauge procstat Labels Number of threads ps_read_bytes Counter procstat Labels Total bytes read ps_read_count Counter procstat Labels Total read I/O operations ps_voluntary_context_switches Counter procstat Labels Total voluntary context switches ps_write_bytes Counter procstat Labels Total bytes written ps_write_count Counter procstat Labels Total write I/O operations redis_active_defrag_hits Gauge redis host, port ??? redis_active_defrag_key_hits Gauge redis host, port ??? redis_active_defrag_key_misses Gauge redis host, port ??? redis_active_defrag_misses Gauge redis host, port ??? redis_active_defrag_running Gauge redis host, port ??? redis_allocator_active Gauge redis host, port ??? redis_allocator_allocated Gauge redis host, port ??? redis_allocator_frag_bytes Gauge redis host, port ??? redis_allocator_frag_ratio Gauge redis host, port ??? redis_allocator_resident Gauge redis host, port ??? redis_allocator_rss_bytes Gauge redis host, port ??? redis_allocator_rss_ratio Gauge redis host, port ??? redis_aof_current_rewrite_time_sec Gauge redis host, port ??? redis_aof_enabled Gauge redis host, port ??? redis_aof_last_cow_size Gauge redis host, port ??? redis_aof_last_rewrite_time_sec Gauge redis host, port ??? redis_aof_rewrite_in_progress Gauge redis host, port ??? redis_aof_rewrite_scheduled Gauge redis host, port ??? redis_aof_rewrites Gauge redis host, port ??? redis_aof_rewrites_consecutive_failures Gauge redis host, port ??? redis_async_loading Gauge redis host, port ??? redis_blocked_clients Gauge redis host, port ??? redis_client_recent_max_input_buffer Gauge redis host, port ??? redis_client_recent_max_output_buffer Gauge redis host, port ??? redis_clients_in_timeout_table Gauge redis host, port ??? redis_cluster_connections Gauge redis host, port ??? redis_connected_clients Gauge redis host, port ??? redis_connected_slaves Gauge redis host, port ??? redis_current_active_defrag_time Gauge redis host, port ??? redis_current_cow_peak Gauge redis host, port ??? redis_current_cow_size Gauge redis host, port ??? redis_current_cow_size_age Gauge redis host, port ??? redis_current_eviction_exceeded_time Gauge redis host, port ??? redis_current_save_keys_processed Gauge redis host, port ??? redis_current_save_keys_total Gauge redis host, port ??? redis_dump_payload_sanitizations Gauge redis host, port ??? redis_evicted_clients Gauge redis host, port ??? redis_evicted_keys Gauge redis host, port ??? redis_expire_cycle_cpu_milliseconds Gauge redis host, port ??? redis_expired_keys Gauge redis host, port ??? redis_expired_stale_perc Gauge redis host, port ??? redis_expired_time_cap_reached_count Gauge redis host, port ??? redis_instantaneous_input_kbps Gauge redis host, port ??? redis_instantaneous_input_repl_kbps Gauge redis host, port ??? redis_instantaneous_ops_per_sec Gauge redis host, port ??? redis_instantaneous_output_kbps Gauge redis host, port ??? redis_instantaneous_output_repl_kbps Gauge redis host, port ??? redis_io_threaded_reads_processed Gauge redis host, port ??? redis_io_threaded_writes_processed Gauge redis host, port ??? redis_io_threads_active Gauge redis host, port ??? redis_keyspace_hits Gauge redis host, port ??? redis_keyspace_misses Gauge redis host, port ??? redis_latest_fork_usec Gauge redis host, port ??? redis_lazyfree_pending_objects Gauge redis host, port ??? redis_lazyfreed_objects Gauge redis host, port ??? redis_loading Gauge redis host, port ??? redis_master_repl_offset Gauge redis host, port ??? redis_master_replid2 Gauge redis host, port ??? redis_maxclients Gauge redis host, port ??? redis_maxmemory Gauge redis host, port ??? redis_mem_aof_buffer Gauge redis host, port ??? redis_mem_clients_normal Gauge redis host, port ??? redis_mem_clients_slaves Gauge redis host, port ??? redis_mem_cluster_links Gauge redis host, port ??? redis_mem_fragmentation_bytes Gauge redis host, port ??? redis_mem_fragmentation_ratio Gauge redis host, port ??? redis_mem_not_counted_for_evict Gauge redis host, port ??? redis_mem_replication_backlog Gauge redis host, port ??? redis_mem_total_replication_buffers Gauge redis host, port ??? redis_migrate_cached_sockets Gauge redis host, port ??? redis_module_fork_in_progress Gauge redis host, port ??? redis_module_fork_last_cow_size Gauge redis host, port ??? redis_number_of_cached_scripts Gauge redis host, port ??? redis_number_of_functions Gauge redis host, port ??? redis_number_of_libraries Gauge redis host, port ??? redis_pubsub_channels Gauge redis host, port ??? redis_pubsub_patterns Gauge redis host, port ??? redis_pubsubshard_channels Gauge redis host, port ??? redis_rdb_bgsave_in_progress Gauge redis host, port ??? redis_rdb_changes_since_last_save Gauge redis host, port ??? redis_rdb_current_bgsave_time_sec Gauge redis host, port ??? redis_rdb_last_bgsave_time_sec Gauge redis host, port ??? redis_rdb_last_cow_size Gauge redis host, port ??? redis_rdb_last_load_keys_expired Gauge redis host, port ??? redis_rdb_last_load_keys_loaded Gauge redis host, port ??? redis_rdb_last_save_time Gauge redis host, port ??? redis_rdb_saves Gauge redis host, port ??? redis_rejected_connections Gauge redis host, port ??? redis_repl_backlog_active Gauge redis host, port ??? redis_repl_backlog_first_byte_offset Gauge redis host, port ??? redis_repl_backlog_histlen Gauge redis host, port ??? redis_repl_backlog_size Gauge redis host, port ??? redis_reply_buffer_expands Gauge redis host, port ??? redis_reply_buffer_shrinks Gauge redis host, port ??? redis_rss_overhead_bytes Gauge redis host, port ??? redis_rss_overhead_ratio Gauge redis host, port ??? redis_second_repl_offset Gauge redis host, port ??? redis_slave_expires_tracked_keys Gauge redis host, port ??? redis_sync_full Gauge redis host, port ??? redis_sync_partial_err Gauge redis host, port ??? redis_sync_partial_ok Gauge redis host, port ??? redis_total_active_defrag_time Gauge redis host, port ??? redis_total_commands_processed Gauge redis host, port ??? redis_total_connections_received Gauge redis host, port ??? redis_total_error_replies Gauge redis host, port ??? redis_total_eviction_exceeded_time Gauge redis host, port ??? redis_total_forks Gauge redis host, port ??? redis_total_net_input_bytes Gauge redis host, port ??? redis_total_net_output_bytes Gauge redis host, port ??? redis_total_net_repl_input_bytes Gauge redis host, port ??? redis_total_net_repl_output_bytes Gauge redis host, port ??? redis_total_reads_processed Gauge redis host, port ??? redis_total_system_memory Gauge redis host, port ??? redis_total_writes_processed Gauge redis host, port ??? redis_tracking_clients Gauge redis host, port ??? redis_tracking_total_items Gauge redis host, port ??? redis_tracking_total_keys Gauge redis host, port ??? redis_tracking_total_prefixes Gauge redis host, port ??? redis_unexpected_error_replies Gauge redis host, port ??? redis_uptime_in_seconds Gauge redis host, port ??? redis_used_cpu_sys Gauge redis host, port ??? redis_used_cpu_sys_children Gauge redis host, port ??? redis_used_cpu_sys_main_thread Gauge redis host, port ??? redis_used_cpu_user Gauge redis host, port ??? redis_used_cpu_user_children Gauge redis host, port ??? redis_used_cpu_user_main_thread Gauge redis host, port ??? redis_used_memory Gauge redis host, port ??? redis_used_memory_dataset Gauge redis host, port ??? redis_used_memory_functions Gauge redis host, port ??? redis_used_memory_lua Gauge redis host, port ??? redis_used_memory_overhead Gauge redis host, port ??? redis_used_memory_peak Gauge redis host, port ??? redis_used_memory_rss Gauge redis host, port ??? redis_used_memory_scripts Gauge redis host, port ??? redis_used_memory_scripts_eval Gauge redis host, port ??? redis_used_memory_startup Gauge redis host, port ??? redis_used_memory_vm_eval Gauge redis host, port ??? redis_used_memory_vm_functions Gauge redis host, port ??? redis_used_memory_vm_total Gauge redis host, port ??? requests_failed Counter dns query, type Failed DNS requests requests_success Counter dns query, type Successful DNS requests requests_total Counter dns query, type Total DNS requests performed spool_jobs Counter spool path Total spool jobs processed spool_jobs_failed Counter spool path Spool jobs failed to process spool_jobs_success Counter spool path Spool jobs processed successfully spool_parsed Counter spool path Parsed metric items swap_cached Gauge memory Memory that once was swapped out, is swapped back in but still also is in the swapfile swap_free Gauge memory Memory which has been evicted from RAM, and is temporarily on the disk swap_total Gauge memory total amount of swap space available tcp4_sockets_used Gauge sockets Total amount of IPv4 TCP sockets used tcp6_sockets_used Gauge sockets Total amount of IPv6 TCP sockets used time_ns Gauge http Response time in nanoseconds twamp_duration_ns Gauge twamp_sender Session duration in nanoseconds twamp_in_avg_delay Gauge twamp_sender Average inbound delay in nanoseconds twamp_in_jitter Gauge twamp_sender itter of the inbound delay in nanoseconds twamp_in_loss Gauge twamp_sender Packet loss in inbound direction twamp_in_max_delay Gauge twamp_sender Maximum inbound delay in nanoseconds twamp_in_min_delay Gauge twamp_sender Minimum inbound delay in nanoseconds twamp_in_mos Gauge twamp_sender eMOS for local end twamp_out_avg_delay Gauge twamp_sender Average outbound delay in nanoseconds twamp_out_loss Gauge twamp_sender Packet loss in outbound direction twamp_out_max_delay Gauge twamp_sender Maximum outbound delay in nanoseconds twamp_out_min_delay Gauge twamp_sender Minimum outbound delay in nanoseconds twamp_out_mos Gauge twamp_sender eMOS for remote end twamp_reflected_pkt Counter twamp_reflector Total amount of the reflected packets twamp_rt_loss Gauge twamp_sender Packet loss in both directions twamp_rx_bitrate Gauge twamp_sender Received bitrate twamp_rx_bytes Gauge twamp_sender Received octets twamp_rx_packets Counter twamp_sender Received packets twamp_rx_pps Gauge twamp_sender Received packet-per-second rate twamp_tx_bitrate Gauge twamp_sender Transmitted bitrate twamp_tx_bytes Counter twamp_sender Transmitted octets twamp_tx_packets Counter twamp_sender Transmitted packets twamp_tx_pps Gauge twamp_sender Transmitted packets-per-second rate udp4_sockets_used Gauge sockets Total amount of IPv4 UDP sockets used udp6_sockets_used Gauge sockets Total amount of IPv6 UDP sockets used uptime Counter uptime System uptime","title":"Metrics Reference"},{"location":"openmetrics/","text":"OpenMetrics Format Specification \u00b6 OpenMetrics is today's de-facto standard for transmitting cloud-native metrics at scale. For now, Gufo Agent supports only text representation for reading metrics from third-party sources and to expose all collected metrics. This chapter gets a quick introduction into the format and inteded for external plugins developers. See OpenMetrics Specification for a formal explanation. Lets see a simple example: sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF The file consist of the metric families . Each family starts with descriptors: sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF followed by the samples: sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF Descriptors \u00b6 sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF The descriptor line has format: # <type> <metric_name> <value> Where: <type> is a type of descriptor. <metric_name> is a name of the following metric. <value> - descriptor-specific value. Gufo Agent recognizes following descriptor type: HELP - Brief textual description of the metrics family. sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF TYPE - Metric type. One of: sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF gauge - Measurement result. counter - Incrementaly increased counter. UNIT - Measurement units, now ignored. Samples \u00b6 sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF Each metric family consists of one or more samples. Sample line has following format: <metric_name>[<labels>] <value>[ <timestamp>] Where: <metric_name> - Name of the metric. <labels> - Optional labels are enclosed between { and } . <value> - Measured value. <timestamp> - Optional timestamp in seconds from the UNIX epoch. EOF mark \u00b6 sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF End-of-file mark placed to the end of the output. Though it is advisored for the Gufo Agent, other OpenMetrics implementations may require it.","title":"OpenMetrics Format"},{"location":"openmetrics/#openmetrics-format-specification","text":"OpenMetrics is today's de-facto standard for transmitting cloud-native metrics at scale. For now, Gufo Agent supports only text representation for reading metrics from third-party sources and to expose all collected metrics. This chapter gets a quick introduction into the format and inteded for external plugins developers. See OpenMetrics Specification for a formal explanation. Lets see a simple example: sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF The file consist of the metric families . Each family starts with descriptors: sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF followed by the samples: sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF","title":"OpenMetrics Format Specification"},{"location":"openmetrics/#descriptors","text":"sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF The descriptor line has format: # <type> <metric_name> <value> Where: <type> is a type of descriptor. <metric_name> is a name of the following metric. <value> - descriptor-specific value. Gufo Agent recognizes following descriptor type: HELP - Brief textual description of the metrics family. sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF TYPE - Metric type. One of: sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF gauge - Measurement result. counter - Incrementaly increased counter. UNIT - Measurement units, now ignored.","title":"Descriptors"},{"location":"openmetrics/#samples","text":"sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF Each metric family consists of one or more samples. Sample line has following format: <metric_name>[<labels>] <value>[ <timestamp>] Where: <metric_name> - Name of the metric. <labels> - Optional labels are enclosed between { and } . <value> - Measured value. <timestamp> - Optional timestamp in seconds from the UNIX epoch.","title":"Samples"},{"location":"openmetrics/#eof-mark","text":"sample1.txt 1 2 3 4 5 6 7 8 9 # HELP job_success Successful job # TYPE job_success counter job_success{dc=\"east\",dept=\"business\"} 12 job_success{dc=\"west\",dept=\"tech\"} 12 # HELP job_failed Failed job # TYPE job_failed counter job_failed{dc=\"east\",dept=\"business\"} 1 job_failed{dc=\"west\",dept=\"tech\"} 4 # EOF End-of-file mark placed to the end of the output. Though it is advisored for the Gufo Agent, other OpenMetrics implementations may require it.","title":"EOF mark"},{"location":"relabel/","text":"Relabeling Rules \u00b6 Relabeling is the process of the manipulation of the metrics, based on labels. The manipulation rules are applied on the collector level via a relabel configuration. The rule set contains one or more relabeling rules, each one performing one or more tasks: replace - Create or update labels basing on context of the other labels. drop - Drop matched metrics. drop_if_equal - Drop metrics if values of labels are equal. keep - Keep matched metrics. labeldrop - Drop matched labels. labelkeep - Keep matched labels. labelmap - Map one or more label name to different label names. dump - Dump active labels. Virtual Labels \u00b6 Unlike the measure labels, virtual labels are available only during the relabeling process and are not exposed to the database. The following virtual labels are available: Label Description __name__ The metric's name __address__ <address>:<port> for the source, exposed by scrape collector __meta_ The prefix for a labels generated by collectors which are available only on relabeling stage ... note Virtual labels are not removed by actions. Actions \u00b6 Replace \u00b6 replace action creates or updates labels basing on context of the other labels. The configuration is: Parameter Default Description action replace Must be replace source_labels The list of label names to be extracted separator ; The separator regex (.+) The regular expression to match replacement The resulting expression. regex matching groups should be referred by number (i.e. $1 , $2 ) or by name (i.e. $first , $second ) target_label The name of the label to be created or replaced The replace rule performs the following steps: Extracts the values of the all labels specified in source_labels . If any of the source_labels is missed, the rule is considered failed and the processing passed to the next rule. The extracted values are concatenated together using separator building the value string The value string is matched against the regex . If the regex is failed to match the rule is considered failed and processing is passed to the next rule. replacement expression is used to build the result. It may contain the references to the capture groups of the regex : $0 - expands to the whole match. $<n> - where <n> is a number: match n-th capture group. I.e. $1 , $2 , ... $<name> - match a named capture group, i.e $first , $last . The result of the expansion of the replacement is placed into label defined by target_label . The processing is passed to the next rule. Note The rewriting of the __name__ virtual label changes the metric's name. Examples: Rewrite the user label as the <user>@<zone> : - source_labels : [ __name__ , user , zone ] separator : \"@\" regex : \"ps_write_count@(.+)\" replacement : \"$1\" target_label : user action : replace Rewrite ps_write_count metric name to total_writes : - source_labels : [ __name__ ] regex : ps_write_count replacement : total_writes target_label : __name__ Drop \u00b6 drop actions drops matched metrics. The configuration is: Parameter Default Description action Must be drop source_labels The list of label names to be extracted separator ; The separator regex (.+) The regular expression to match The drop rule performs the following steps: Extracts the values of the all labels specified in source_labels . If any of the source_labels is missed, the rule is considered failed and the processing passed to the next rule. The extracted values are concatenated together using separator building the value string The value string is matched against the regex . If the regex is failed to match the rule is considered failed and processing is passed to the next rule. The metric is considered as matched and discarded. Processing is stopped. Examples: Drop ps_write_count metric: - source_labels : [ __name__ ] regex : ps_write_count action : drop Drop ps_write_count metric for user scott in zone tiger : - source_labels : [ __name__ , user , zone ] regex : \"ps_write_count;scott;tiger\" action : drop Drop If Equal \u00b6 drop_if_equal action drops metric if the values of labels are equal. The configuration is: Parameter Default Description action Must be drop_if_equal source_labels The list of label names to be evaluated. Must contain two or more names. The drop_if_equal rule performs the following steps: Extracts the values of the all labels specified in source_labels . If all extracted values are the same, rule is considered matcheed and the metric is discarded. Processing is stopped. Note drop_if_equal rule matches if all the labels in source_labels are missed. Examples: Drop metric if prev_label and new_label is matched: - source_labels : [ prev_label , new_label ] action : drop_if_equal Keep \u00b6 keep actions keeps matched metrics. The configuration is: Parameter Default Description action Must be keep source_labels The list of label names to be extracted separator ; The separator regex (.+) The regular expression to match The replace rule performs the following steps: Extracts the values of the all labels specified in source_labels . If any of the source_labels is missed, the rule is considered failed and the processing passed to the next rule. The extracted values are concatenated together using separator building the value string The value string is matched against the regex . If the regex is failed the metric is discarded and processing is stopped. Otherwise, processing is passed to the next rule. Examples: Drop all metrics except ps_read_count and ps_write_count : - source_labels : [ __name__ ] regex : ps_read_count|ps_write_count action : keep Label Drop \u00b6 labeldrop action drops all matching labels. The configuration is: Parameter Default Description action Must be labelkeep regex The regular expression to match The labeldrop rule perform following steps: All labels are matched against the regex . Matching labels are discarded. Processing is passed to the next rule. Note labeldrop doesn't affect virtual labels . Example: Drop user and zone labels. - action : labeldrop regex : user|zone Label Keep \u00b6 labelkeep action keeps all matching labels and drops all non-matching. The configuration is: Parameter Default Description action Must be labelkeep regex The regular expression to match The labelkeep rule perform following steps: All labels are matched against the regex . Matching labels are kept, not matched ones are discarded. Processing is passed to the next rule. Note labelkeep doesn't affect virtual labels . Example: Keep only mount and dev labels. - action : labelkeep regex : mount|dev Label Map \u00b6 labelmap action maps one or more label names to the different label names. The configuration is: Parameter Default Description action Must be labelmap regex The regular expression to match replacement The resulting expression. regex matching groups should be referred by number (i.e. $1 , $2 ) or by name (i.e. $first , $second ) The labelmap rule perform following steps: All labels are matched against the regex . Matching labels are applied to the replacement and are renamed. Processing is passed to the next rule. Note labelmap doesn't remove virtual labels after rename. Examples: Rename dc label to datacenter : - action : labelmap regex : dc replacement : datacenter Rename virtual labels started with __meta_kubernetes_ : - action : labelmap regex : __meta_kubernetes_(.+) replacement : k8s_$1 Dump \u00b6 dump action dumps effective labels to the log and cotinues processing. The configuration is: Parameter Default Description action Must be dump Examples: - action : dump Sample output: [2023-06-19T11:41:23.625Z INFO relabel::dump] ===[START OF LABELS]========== [2023-06-19T11:41:23.625Z INFO relabel::dump] __meta_cmd = ./target/release/gufo-agent -vv --config=var/config.yml --test [2023-06-19T11:41:23.625Z INFO relabel::dump] __name__ = ps_write_bytes [2023-06-19T11:41:23.625Z INFO relabel::dump] agent = gufo [2023-06-19T11:41:23.625Z INFO relabel::dump] collector = procstat [2023-06-19T11:41:23.625Z INFO relabel::dump] host = test [2023-06-19T11:41:23.625Z INFO relabel::dump] process_name = gufo-agent [2023-06-19T11:41:23.625Z INFO relabel::dump] user = root [2023-06-19T11:41:23.625Z INFO relabel::dump] zone = DC1 [2023-06-19T11:41:23.625Z INFO relabel::dump] ===[END OF LABELS]============","title":"Relabeling Rules"},{"location":"relabel/#relabeling-rules","text":"Relabeling is the process of the manipulation of the metrics, based on labels. The manipulation rules are applied on the collector level via a relabel configuration. The rule set contains one or more relabeling rules, each one performing one or more tasks: replace - Create or update labels basing on context of the other labels. drop - Drop matched metrics. drop_if_equal - Drop metrics if values of labels are equal. keep - Keep matched metrics. labeldrop - Drop matched labels. labelkeep - Keep matched labels. labelmap - Map one or more label name to different label names. dump - Dump active labels.","title":"Relabeling Rules"},{"location":"relabel/#virtual-labels","text":"Unlike the measure labels, virtual labels are available only during the relabeling process and are not exposed to the database. The following virtual labels are available: Label Description __name__ The metric's name __address__ <address>:<port> for the source, exposed by scrape collector __meta_ The prefix for a labels generated by collectors which are available only on relabeling stage ... note Virtual labels are not removed by actions.","title":"Virtual Labels"},{"location":"relabel/#actions","text":"","title":"Actions"},{"location":"relabel/#replace","text":"replace action creates or updates labels basing on context of the other labels. The configuration is: Parameter Default Description action replace Must be replace source_labels The list of label names to be extracted separator ; The separator regex (.+) The regular expression to match replacement The resulting expression. regex matching groups should be referred by number (i.e. $1 , $2 ) or by name (i.e. $first , $second ) target_label The name of the label to be created or replaced The replace rule performs the following steps: Extracts the values of the all labels specified in source_labels . If any of the source_labels is missed, the rule is considered failed and the processing passed to the next rule. The extracted values are concatenated together using separator building the value string The value string is matched against the regex . If the regex is failed to match the rule is considered failed and processing is passed to the next rule. replacement expression is used to build the result. It may contain the references to the capture groups of the regex : $0 - expands to the whole match. $<n> - where <n> is a number: match n-th capture group. I.e. $1 , $2 , ... $<name> - match a named capture group, i.e $first , $last . The result of the expansion of the replacement is placed into label defined by target_label . The processing is passed to the next rule. Note The rewriting of the __name__ virtual label changes the metric's name. Examples: Rewrite the user label as the <user>@<zone> : - source_labels : [ __name__ , user , zone ] separator : \"@\" regex : \"ps_write_count@(.+)\" replacement : \"$1\" target_label : user action : replace Rewrite ps_write_count metric name to total_writes : - source_labels : [ __name__ ] regex : ps_write_count replacement : total_writes target_label : __name__","title":"Replace"},{"location":"relabel/#drop","text":"drop actions drops matched metrics. The configuration is: Parameter Default Description action Must be drop source_labels The list of label names to be extracted separator ; The separator regex (.+) The regular expression to match The drop rule performs the following steps: Extracts the values of the all labels specified in source_labels . If any of the source_labels is missed, the rule is considered failed and the processing passed to the next rule. The extracted values are concatenated together using separator building the value string The value string is matched against the regex . If the regex is failed to match the rule is considered failed and processing is passed to the next rule. The metric is considered as matched and discarded. Processing is stopped. Examples: Drop ps_write_count metric: - source_labels : [ __name__ ] regex : ps_write_count action : drop Drop ps_write_count metric for user scott in zone tiger : - source_labels : [ __name__ , user , zone ] regex : \"ps_write_count;scott;tiger\" action : drop","title":"Drop"},{"location":"relabel/#drop-if-equal","text":"drop_if_equal action drops metric if the values of labels are equal. The configuration is: Parameter Default Description action Must be drop_if_equal source_labels The list of label names to be evaluated. Must contain two or more names. The drop_if_equal rule performs the following steps: Extracts the values of the all labels specified in source_labels . If all extracted values are the same, rule is considered matcheed and the metric is discarded. Processing is stopped. Note drop_if_equal rule matches if all the labels in source_labels are missed. Examples: Drop metric if prev_label and new_label is matched: - source_labels : [ prev_label , new_label ] action : drop_if_equal","title":"Drop If Equal"},{"location":"relabel/#keep","text":"keep actions keeps matched metrics. The configuration is: Parameter Default Description action Must be keep source_labels The list of label names to be extracted separator ; The separator regex (.+) The regular expression to match The replace rule performs the following steps: Extracts the values of the all labels specified in source_labels . If any of the source_labels is missed, the rule is considered failed and the processing passed to the next rule. The extracted values are concatenated together using separator building the value string The value string is matched against the regex . If the regex is failed the metric is discarded and processing is stopped. Otherwise, processing is passed to the next rule. Examples: Drop all metrics except ps_read_count and ps_write_count : - source_labels : [ __name__ ] regex : ps_read_count|ps_write_count action : keep","title":"Keep"},{"location":"relabel/#label-drop","text":"labeldrop action drops all matching labels. The configuration is: Parameter Default Description action Must be labelkeep regex The regular expression to match The labeldrop rule perform following steps: All labels are matched against the regex . Matching labels are discarded. Processing is passed to the next rule. Note labeldrop doesn't affect virtual labels . Example: Drop user and zone labels. - action : labeldrop regex : user|zone","title":"Label Drop"},{"location":"relabel/#label-keep","text":"labelkeep action keeps all matching labels and drops all non-matching. The configuration is: Parameter Default Description action Must be labelkeep regex The regular expression to match The labelkeep rule perform following steps: All labels are matched against the regex . Matching labels are kept, not matched ones are discarded. Processing is passed to the next rule. Note labelkeep doesn't affect virtual labels . Example: Keep only mount and dev labels. - action : labelkeep regex : mount|dev","title":"Label Keep"},{"location":"relabel/#label-map","text":"labelmap action maps one or more label names to the different label names. The configuration is: Parameter Default Description action Must be labelmap regex The regular expression to match replacement The resulting expression. regex matching groups should be referred by number (i.e. $1 , $2 ) or by name (i.e. $first , $second ) The labelmap rule perform following steps: All labels are matched against the regex . Matching labels are applied to the replacement and are renamed. Processing is passed to the next rule. Note labelmap doesn't remove virtual labels after rename. Examples: Rename dc label to datacenter : - action : labelmap regex : dc replacement : datacenter Rename virtual labels started with __meta_kubernetes_ : - action : labelmap regex : __meta_kubernetes_(.+) replacement : k8s_$1","title":"Label Map"},{"location":"relabel/#dump","text":"dump action dumps effective labels to the log and cotinues processing. The configuration is: Parameter Default Description action Must be dump Examples: - action : dump Sample output: [2023-06-19T11:41:23.625Z INFO relabel::dump] ===[START OF LABELS]========== [2023-06-19T11:41:23.625Z INFO relabel::dump] __meta_cmd = ./target/release/gufo-agent -vv --config=var/config.yml --test [2023-06-19T11:41:23.625Z INFO relabel::dump] __name__ = ps_write_bytes [2023-06-19T11:41:23.625Z INFO relabel::dump] agent = gufo [2023-06-19T11:41:23.625Z INFO relabel::dump] collector = procstat [2023-06-19T11:41:23.625Z INFO relabel::dump] host = test [2023-06-19T11:41:23.625Z INFO relabel::dump] process_name = gufo-agent [2023-06-19T11:41:23.625Z INFO relabel::dump] user = root [2023-06-19T11:41:23.625Z INFO relabel::dump] zone = DC1 [2023-06-19T11:41:23.625Z INFO relabel::dump] ===[END OF LABELS]============","title":"Dump"},{"location":"testing/","text":"Building and Testing \u00b6 Building \u00b6 Production Development cargo build --release The final result will be placed to ./target/release/gufo-agent cargo build The final result will be place to ./target/debug/gufo-agent Linting \u00b6 Fast check: cargo check More detailed check with clippy cargo clippy Running tests \u00b6 cargo test Profiling \u00b6 Prerequisites \u00b6 Before running profiler install Valgrind: apt-get install build-essential valgrind Then install iai-callgrind-runner : cargo install --version 0.3.1 iai-callgrind-runner Docker devcontainer must be run in --priveleged mode, i.e. ensure, that .devcontainer/devcontainer.json has proper runArgs setting: \"runArgs\": [ \"--init\", \"--privileged\" ], Run Benchmarks \u00b6 Run all benchmarks: cargo bench Run benchmarks for specific crate (i.e. twamp ): cargo bench -p twamp Building Documentation \u00b6 To rebuild and check documentation run $ mkdocs serve We recommend using Grammarly service to check documentation for common errors.","title":"Building and Testing"},{"location":"testing/#building-and-testing","text":"","title":"Building and Testing"},{"location":"testing/#building","text":"Production Development cargo build --release The final result will be placed to ./target/release/gufo-agent cargo build The final result will be place to ./target/debug/gufo-agent","title":"Building"},{"location":"testing/#linting","text":"Fast check: cargo check More detailed check with clippy cargo clippy","title":"Linting"},{"location":"testing/#running-tests","text":"cargo test","title":"Running tests"},{"location":"testing/#profiling","text":"","title":"Profiling"},{"location":"testing/#prerequisites","text":"Before running profiler install Valgrind: apt-get install build-essential valgrind Then install iai-callgrind-runner : cargo install --version 0.3.1 iai-callgrind-runner Docker devcontainer must be run in --priveleged mode, i.e. ensure, that .devcontainer/devcontainer.json has proper runArgs setting: \"runArgs\": [ \"--init\", \"--privileged\" ],","title":"Prerequisites"},{"location":"testing/#run-benchmarks","text":"Run all benchmarks: cargo bench Run benchmarks for specific crate (i.e. twamp ): cargo bench -p twamp","title":"Run Benchmarks"},{"location":"testing/#building-documentation","text":"To rebuild and check documentation run $ mkdocs serve We recommend using Grammarly service to check documentation for common errors.","title":"Building Documentation"},{"location":"collectors/","text":"Collectors Reference \u00b6 This section contains the formal reference of the supported collectors, their configuration, generated metrics, configuration and output samples. Configuration \u00b6 All collectors share a common part of the configuration. Parameter Type Description id String Collector's ID. Must be unique per agent instance. type String The type of collector. See Collectors for available types interval Integer Repetition interval in seconds labels Object Additional collector-level labels Example: - id : File System type : fs interval : 10 gufo-agent allows appending user-defined labels to the collector's output. User-defined labels are set as key-value pairs: - id : dns1 type : dns interval : 10 labels : dc : DC1 project : P1 - id : dns2 type : dns interval : 10 labels : dc : DC2 project : P2 Available Collectors \u00b6 Type Description block_io Block I/O devices statistics cpu CPU statistics dns Perform DNS request using system resolver exec Execute command and read output fs File systems statistic http Perform HTTP request memory Host's memory statistics modbus_rtu Perform Modbus RTU requests modbus_tcp Perform Modbus TCP requests mysql MySQL instance statistics mysql_query Perform MySQL queries network Host's network interface statistics pgbouncer PgBouncer statistics postgres PostgreSQL instance statistics postgres_query Perform PostgreSQL queries procstat Process' statistics redis Redis instance statistics scrape Fetch data from OpenMetrics/Prometheus endpoints sockets Host's sockets statistics spool Read files in openmetrics format from a directory twamp_reflector TWAMP reflector for SLA probing twamp_sender TWAMP sender for SLA probing uptime System uptime","title":"Overview"},{"location":"collectors/#collectors-reference","text":"This section contains the formal reference of the supported collectors, their configuration, generated metrics, configuration and output samples.","title":"Collectors Reference"},{"location":"collectors/#configuration","text":"All collectors share a common part of the configuration. Parameter Type Description id String Collector's ID. Must be unique per agent instance. type String The type of collector. See Collectors for available types interval Integer Repetition interval in seconds labels Object Additional collector-level labels Example: - id : File System type : fs interval : 10 gufo-agent allows appending user-defined labels to the collector's output. User-defined labels are set as key-value pairs: - id : dns1 type : dns interval : 10 labels : dc : DC1 project : P1 - id : dns2 type : dns interval : 10 labels : dc : DC2 project : P2","title":"Configuration"},{"location":"collectors/#available-collectors","text":"Type Description block_io Block I/O devices statistics cpu CPU statistics dns Perform DNS request using system resolver exec Execute command and read output fs File systems statistic http Perform HTTP request memory Host's memory statistics modbus_rtu Perform Modbus RTU requests modbus_tcp Perform Modbus TCP requests mysql MySQL instance statistics mysql_query Perform MySQL queries network Host's network interface statistics pgbouncer PgBouncer statistics postgres PostgreSQL instance statistics postgres_query Perform PostgreSQL queries procstat Process' statistics redis Redis instance statistics scrape Fetch data from OpenMetrics/Prometheus endpoints sockets Host's sockets statistics spool Read files in openmetrics format from a directory twamp_reflector TWAMP reflector for SLA probing twamp_sender TWAMP sender for SLA probing uptime System uptime","title":"Available Collectors"},{"location":"collectors/block_io/","text":"block_io collector \u00b6 block_io collects the host's block devices' input/output statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be block_io interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : Block I/O type : block_io Collected Metrics \u00b6 OpenMetrics Metric Metric Type Labels Description io_read_ios Gauge dev Number of read I/Os processed io_read_merges Gauge dev Number of read I/Os merged with in-queue I/O io_read_sectors Gauge dev Number of sectors read io_read_ticks Gauge dev Total wait time for read requests, ms io_write_ios Gauge dev Number of write I/Os processed io_write_merges Gauge dev Number of write I/Os merged with in-queue I/O io_write_sectors Gauge dev Number of sectors written io_write_ticks Gauge dev Total wait time for write requests, ms io_in_flight Gauge dev Number of I/Os currently in flight, requests io_ticks Gauge dev Total time this block device has been active, ms io_time_in_queue Gauge dev Total wait time for all requests, ms Labels \u00b6 block_io collector appends the following labels: Label Description dev Block device name Config Discovery \u00b6 block_io collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -block_io Sample Output \u00b6 OpenMetrics # HELP block_io_in_flight Number of I/Os currently in flight, requests # TYPE block_io_in_flight gauge block_io_in_flight{dev=\"dm-0} 0 1682413629 block_io_in_flight{dev=\"dm-1} 0 1682413629 block_io_in_flight{dev=\"dm-2} 0 1682413629 # HELP block_io_io_ticks Total time this block device has been active, ms # TYPE block_io_io_ticks gauge block_io_io_ticks{dev=\"dm-0\"} 1091288 1682413629 block_io_io_ticks{dev=\"dm-1\"} 681716 1682413629 block_io_io_ticks{dev=\"dm-2\"} 577728 1682413629 # HELP block_io_read_ios Number of read I/Os processed # TYPE block_io_read_ios counter block_io_read_ios{dev=\"dm-0\"} 180155 1682413629 block_io_read_ios{dev=\"dm-1\"} 17722 1682413629 block_io_read_ios{dev=\"dm-2\"} 20178 1682413629","title":"block_io"},{"location":"collectors/block_io/#block_io-collector","text":"block_io collects the host's block devices' input/output statistics.","title":"block_io collector"},{"location":"collectors/block_io/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be block_io interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : Block I/O type : block_io","title":"Configuration"},{"location":"collectors/block_io/#collected-metrics","text":"OpenMetrics Metric Metric Type Labels Description io_read_ios Gauge dev Number of read I/Os processed io_read_merges Gauge dev Number of read I/Os merged with in-queue I/O io_read_sectors Gauge dev Number of sectors read io_read_ticks Gauge dev Total wait time for read requests, ms io_write_ios Gauge dev Number of write I/Os processed io_write_merges Gauge dev Number of write I/Os merged with in-queue I/O io_write_sectors Gauge dev Number of sectors written io_write_ticks Gauge dev Total wait time for write requests, ms io_in_flight Gauge dev Number of I/Os currently in flight, requests io_ticks Gauge dev Total time this block device has been active, ms io_time_in_queue Gauge dev Total wait time for all requests, ms","title":"Collected Metrics"},{"location":"collectors/block_io/#labels","text":"block_io collector appends the following labels: Label Description dev Block device name","title":"Labels"},{"location":"collectors/block_io/#config-discovery","text":"block_io collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -block_io","title":"Config Discovery"},{"location":"collectors/block_io/#sample-output","text":"OpenMetrics # HELP block_io_in_flight Number of I/Os currently in flight, requests # TYPE block_io_in_flight gauge block_io_in_flight{dev=\"dm-0} 0 1682413629 block_io_in_flight{dev=\"dm-1} 0 1682413629 block_io_in_flight{dev=\"dm-2} 0 1682413629 # HELP block_io_io_ticks Total time this block device has been active, ms # TYPE block_io_io_ticks gauge block_io_io_ticks{dev=\"dm-0\"} 1091288 1682413629 block_io_io_ticks{dev=\"dm-1\"} 681716 1682413629 block_io_io_ticks{dev=\"dm-2\"} 577728 1682413629 # HELP block_io_read_ios Number of read I/Os processed # TYPE block_io_read_ios counter block_io_read_ios{dev=\"dm-0\"} 180155 1682413629 block_io_read_ios{dev=\"dm-1\"} 17722 1682413629 block_io_read_ios{dev=\"dm-2\"} 20178 1682413629","title":"Sample Output"},{"location":"collectors/cpu/","text":"cpu collector \u00b6 cpu collects the host's CPU usage statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be cpu interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : CPU type : cpu Collected Metrics \u00b6 OpenMetrics Metric Metric Type Labels Platform Description cpu_user Gauge cpu All ??? cpu_nice Gauge cpu All ??? cpu_system Gauge cpu All ??? cpu_interrupt Gauge cpu All ??? cpu_idle Gauge cpu All ??? cpu_iowait Gauge cpu Linux ??? Labels \u00b6 cpu collector appends the following labels Label Description cpu CPU number Config Discovery \u00b6 cpu collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -cpu Sample Output \u00b6 OpenMetrics # HELP cpu_idle CPU Idle time, % # TYPE cpu_idle gauge cpu_idle{cpu=\"0\"} 97 1682413626 cpu_idle{cpu=\"1\"} 93 1682413626 cpu_idle{cpu=\"2\"} 98 1682413626 cpu_idle{cpu=\"3\"} 94 1682413626 # HELP cpu_interrupt CPU Interrupt time, % # TYPE cpu_interrupt gauge cpu_interrupt{cpu=\"0\"} 0 1682413626 cpu_interrupt{cpu=\"1\"} 0 1682413626 cpu_interrupt{cpu=\"2\"} 0 1682413626 cpu_interrupt{cpu=\"3\"} 0 1682413626 # HELP cpu_iowait CPU IOwait time, % # TYPE cpu_iowait gauge cpu_iowait{cpu=\"0\"} 0 1682413626 cpu_iowait{cpu=\"1\"} 0 1682413626 cpu_iowait{cpu=\"2\"} 0 1682413626 cpu_iowait{cpu=\"3\"} 0 1682413626 # HELP cpu_nice CPU Nice time, % # TYPE cpu_nice gauge cpu_nice{cpu=\"0\"} 0 1682413626 cpu_nice{cpu=\"1\"} 0 1682413626 cpu_nice{cpu=\"2\"} 0 1682413626 cpu_nice{cpu=\"3\"} 0 1682413626 # HELP cpu_system CPU System time, % # TYPE cpu_system gauge cpu_system{cpu=\"0\"} 0 1682413626 cpu_system{cpu=\"1\"} 2 1682413626 cpu_system{cpu=\"2\"} 0 1682413626 cpu_system{cpu=\"3\"} 3 1682413626 # HELP cpu_user CPU User time, % # TYPE cpu_user gauge cpu_user{cpu=\"0\"} 2 1682413626 cpu_user{cpu=\"1\"} 5 1682413626 cpu_user{cpu=\"2\"} 1 1682413626 cpu_user{cpu=\"3\"} 2 1682413626","title":"cpu"},{"location":"collectors/cpu/#cpu-collector","text":"cpu collects the host's CPU usage statistics.","title":"cpu collector"},{"location":"collectors/cpu/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be cpu interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : CPU type : cpu","title":"Configuration"},{"location":"collectors/cpu/#collected-metrics","text":"OpenMetrics Metric Metric Type Labels Platform Description cpu_user Gauge cpu All ??? cpu_nice Gauge cpu All ??? cpu_system Gauge cpu All ??? cpu_interrupt Gauge cpu All ??? cpu_idle Gauge cpu All ??? cpu_iowait Gauge cpu Linux ???","title":"Collected Metrics"},{"location":"collectors/cpu/#labels","text":"cpu collector appends the following labels Label Description cpu CPU number","title":"Labels"},{"location":"collectors/cpu/#config-discovery","text":"cpu collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -cpu","title":"Config Discovery"},{"location":"collectors/cpu/#sample-output","text":"OpenMetrics # HELP cpu_idle CPU Idle time, % # TYPE cpu_idle gauge cpu_idle{cpu=\"0\"} 97 1682413626 cpu_idle{cpu=\"1\"} 93 1682413626 cpu_idle{cpu=\"2\"} 98 1682413626 cpu_idle{cpu=\"3\"} 94 1682413626 # HELP cpu_interrupt CPU Interrupt time, % # TYPE cpu_interrupt gauge cpu_interrupt{cpu=\"0\"} 0 1682413626 cpu_interrupt{cpu=\"1\"} 0 1682413626 cpu_interrupt{cpu=\"2\"} 0 1682413626 cpu_interrupt{cpu=\"3\"} 0 1682413626 # HELP cpu_iowait CPU IOwait time, % # TYPE cpu_iowait gauge cpu_iowait{cpu=\"0\"} 0 1682413626 cpu_iowait{cpu=\"1\"} 0 1682413626 cpu_iowait{cpu=\"2\"} 0 1682413626 cpu_iowait{cpu=\"3\"} 0 1682413626 # HELP cpu_nice CPU Nice time, % # TYPE cpu_nice gauge cpu_nice{cpu=\"0\"} 0 1682413626 cpu_nice{cpu=\"1\"} 0 1682413626 cpu_nice{cpu=\"2\"} 0 1682413626 cpu_nice{cpu=\"3\"} 0 1682413626 # HELP cpu_system CPU System time, % # TYPE cpu_system gauge cpu_system{cpu=\"0\"} 0 1682413626 cpu_system{cpu=\"1\"} 2 1682413626 cpu_system{cpu=\"2\"} 0 1682413626 cpu_system{cpu=\"3\"} 3 1682413626 # HELP cpu_user CPU User time, % # TYPE cpu_user gauge cpu_user{cpu=\"0\"} 2 1682413626 cpu_user{cpu=\"1\"} 5 1682413626 cpu_user{cpu=\"2\"} 1 1682413626 cpu_user{cpu=\"3\"} 2 1682413626","title":"Sample Output"},{"location":"collectors/dns/","text":"dns collector \u00b6 dns collector performs the series of DNS queries using the host's system resolver and collects query statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be dns interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description query String DNS Query to perform type String A DNS Query type n Integer 1 Number of queries in the serie. Config example: - id : DNS GufoLabs disabled : true type : dns labels : project : Gufo query : gufolabs.com n : 10 Collected Metrics \u00b6 OpenMetrics Metric Metric Type Labels Description dns_requests_total Counter query , type Total number of DNS requests performed. dns_requests_success Counter query , type Successful DNS requests. dns_requests_failed Counter query , type Failed DNS requests. dns_min_ns Gauge query , type Minimal response delay ofthe serie in nanoseconds. dns_max_ns Gauge query , type Maximal response delay ofthe serie in nanoseconds. dns_avg_ns Gauge query , type response delay ofthe serie in nanoseconds. dns_jitter_ns Gauge query , type Jitter of the response delay of the serie in nanoseconds. Labels \u00b6 dns collector appends the following labels Label Description query DNS query. Matches query in config. type DNS query type. Matches type in config. Sample Output \u00b6 OpenMetrics # HELP dns_avg_ns Average response delay of the serie in nanoseconds # TYPE dns_avg_ns gauge dns_avg_ns{query=\"gufolabs.com\",type=\"A\"} 3849061 1682060489 # HELP dns_jitter_ns Jitter of the response delay of the serie in nanoseconds # TYPE dns_jitter_ns gauge dns_jitter_ns{query=\"gufolabs.com\",type=\"A\"} 2774319 1682060489 # HELP dns_max_ns Maximal response delay of the serie in nanoseconds # TYPE dns_max_ns gauge dns_max_ns{query=\"gufolabs.com\",type=\"A\"} 38388860 1682060489 # HELP dns_min_ns Minimal response delay of the serie in nanoseconds # TYPE dns_min_ns gauge dns_min_ns{query=\"gufolabs.com\",type=\"A\"} 6596 1682060489 # HELP dns_requests_failed Failed DNS requests # TYPE dns_requests_failed counter dns_requests_failed{query=\"gufolabs.com\",type=\"A\"} 0 1682060489 # HELP dns_requests_success Successful DNS requests # TYPE dns_requests_success counter dns_requests_success{query=\"gufolabs.com\",type=\"A\"} 10 1682060489 # HELP dns_requests_total Total DNS requests performed # TYPE dns_requests_total counter dns_requests_total{query=\"gufolabs.com\",type=\"A\"} 10 1682060489","title":"dns"},{"location":"collectors/dns/#dns-collector","text":"dns collector performs the series of DNS queries using the host's system resolver and collects query statistics.","title":"dns collector"},{"location":"collectors/dns/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be dns interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description query String DNS Query to perform type String A DNS Query type n Integer 1 Number of queries in the serie. Config example: - id : DNS GufoLabs disabled : true type : dns labels : project : Gufo query : gufolabs.com n : 10","title":"Configuration"},{"location":"collectors/dns/#collected-metrics","text":"OpenMetrics Metric Metric Type Labels Description dns_requests_total Counter query , type Total number of DNS requests performed. dns_requests_success Counter query , type Successful DNS requests. dns_requests_failed Counter query , type Failed DNS requests. dns_min_ns Gauge query , type Minimal response delay ofthe serie in nanoseconds. dns_max_ns Gauge query , type Maximal response delay ofthe serie in nanoseconds. dns_avg_ns Gauge query , type response delay ofthe serie in nanoseconds. dns_jitter_ns Gauge query , type Jitter of the response delay of the serie in nanoseconds.","title":"Collected Metrics"},{"location":"collectors/dns/#labels","text":"dns collector appends the following labels Label Description query DNS query. Matches query in config. type DNS query type. Matches type in config.","title":"Labels"},{"location":"collectors/dns/#sample-output","text":"OpenMetrics # HELP dns_avg_ns Average response delay of the serie in nanoseconds # TYPE dns_avg_ns gauge dns_avg_ns{query=\"gufolabs.com\",type=\"A\"} 3849061 1682060489 # HELP dns_jitter_ns Jitter of the response delay of the serie in nanoseconds # TYPE dns_jitter_ns gauge dns_jitter_ns{query=\"gufolabs.com\",type=\"A\"} 2774319 1682060489 # HELP dns_max_ns Maximal response delay of the serie in nanoseconds # TYPE dns_max_ns gauge dns_max_ns{query=\"gufolabs.com\",type=\"A\"} 38388860 1682060489 # HELP dns_min_ns Minimal response delay of the serie in nanoseconds # TYPE dns_min_ns gauge dns_min_ns{query=\"gufolabs.com\",type=\"A\"} 6596 1682060489 # HELP dns_requests_failed Failed DNS requests # TYPE dns_requests_failed counter dns_requests_failed{query=\"gufolabs.com\",type=\"A\"} 0 1682060489 # HELP dns_requests_success Successful DNS requests # TYPE dns_requests_success counter dns_requests_success{query=\"gufolabs.com\",type=\"A\"} 10 1682060489 # HELP dns_requests_total Total DNS requests performed # TYPE dns_requests_total counter dns_requests_total{query=\"gufolabs.com\",type=\"A\"} 10 1682060489","title":"Sample Output"},{"location":"collectors/exec/","text":"exec collector \u00b6 exec runs command and parses its stdout as OpenMetrics format. See OpenMetrics Format Specification for the recognized format. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be exec interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description cmd List Command and its arguments. Each as separate list item cd String Change working directory, if set env Object Set environment variables, if set trust_timestamps Bool false Ignore timestamps in output, if false Config example: - id : Script type : exec cmd : - ./examples/scripts/collector/sample.sh env : VAR1 : value1 VAR2 : value2 Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description exec_parsed Counter Parsed metric items In addition to the own metrics exec exposes metrics read from the files. Labels \u00b6 exec collector appends the following labels: Label Description script Script executed Sample Output \u00b6 OpenMetrics # HELP exec_parsed Parsed metric items # TYPE exec_parsed counter exec_parsed{agent=\"gufo\",collector=\"exec\",host=\"d20e7299d8e1\",script=\"./examples/scripts/collector/sample.sh\",zone=\"DC1\"} 8 1683613059 # HELP job_failed Failed job # TYPE job_failed counter job_failed{agent=\"gufo\",collector=\"exec\",dc=\"east\",dept=\"business\",host=\"d20e7299d8e1\",zone=\"DC1\"} 1 1683613059 job_failed{agent=\"gufo\",collector=\"exec\",dc=\"west\",dept=\"tech\",host=\"d20e7299d8e1\",zone=\"DC1\"} 4 1683613059 # HELP job_success Successful job # TYPE job_success counter job_success{agent=\"gufo\",collector=\"exec\",dc=\"east\",dept=\"business\",host=\"d20e7299d8e1\",zone=\"DC1\"} 12 1683613059 job_success{agent=\"gufo\",collector=\"exec\",dc=\"west\",dept=\"tech\",host=\"d20e7299d8e1\",zone=\"DC1\"} 12 1683613059 # EOF","title":"exec"},{"location":"collectors/exec/#exec-collector","text":"exec runs command and parses its stdout as OpenMetrics format. See OpenMetrics Format Specification for the recognized format.","title":"exec collector"},{"location":"collectors/exec/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be exec interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description cmd List Command and its arguments. Each as separate list item cd String Change working directory, if set env Object Set environment variables, if set trust_timestamps Bool false Ignore timestamps in output, if false Config example: - id : Script type : exec cmd : - ./examples/scripts/collector/sample.sh env : VAR1 : value1 VAR2 : value2","title":"Configuration"},{"location":"collectors/exec/#collected-metrics","text":"OpenMetrics Metric Metric Type Description exec_parsed Counter Parsed metric items In addition to the own metrics exec exposes metrics read from the files.","title":"Collected Metrics"},{"location":"collectors/exec/#labels","text":"exec collector appends the following labels: Label Description script Script executed","title":"Labels"},{"location":"collectors/exec/#sample-output","text":"OpenMetrics # HELP exec_parsed Parsed metric items # TYPE exec_parsed counter exec_parsed{agent=\"gufo\",collector=\"exec\",host=\"d20e7299d8e1\",script=\"./examples/scripts/collector/sample.sh\",zone=\"DC1\"} 8 1683613059 # HELP job_failed Failed job # TYPE job_failed counter job_failed{agent=\"gufo\",collector=\"exec\",dc=\"east\",dept=\"business\",host=\"d20e7299d8e1\",zone=\"DC1\"} 1 1683613059 job_failed{agent=\"gufo\",collector=\"exec\",dc=\"west\",dept=\"tech\",host=\"d20e7299d8e1\",zone=\"DC1\"} 4 1683613059 # HELP job_success Successful job # TYPE job_success counter job_success{agent=\"gufo\",collector=\"exec\",dc=\"east\",dept=\"business\",host=\"d20e7299d8e1\",zone=\"DC1\"} 12 1683613059 job_success{agent=\"gufo\",collector=\"exec\",dc=\"west\",dept=\"tech\",host=\"d20e7299d8e1\",zone=\"DC1\"} 12 1683613059 # EOF","title":"Sample Output"},{"location":"collectors/fs/","text":"fs collector \u00b6 fs collects the host's filesystems' statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be fs interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : File System type : fs Config Discovery \u00b6 fs collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -fs Collected Metrics \u00b6 OpenMetrics Metric Metric Type Labels Description fs_inodes Gauge mount, type Inodes used fs_inodes_total Gauge mount, type Total inodes count fs_inodes_available Gauge mount, type Inodes available fs_free Gauge mount, type Free disk space, bytes fs_total Gauge mount, type Total disk space, bytes fs_available Gauge mount, type Available disk space, bytes Labels \u00b6 fs collector appends the following labels: Label Description dev Device path mount File system mount point type File system type (i.e. ext4 ) Notes \u00b6 fs collector ignores the following file system types: Linux cgroup devpts overlay proc sysfs It also ignores all file systems mounted besides the following paths: Linux /dev/ /proc/ /sys/ Sample Output \u00b6","title":"fs"},{"location":"collectors/fs/#fs-collector","text":"fs collects the host's filesystems' statistics.","title":"fs collector"},{"location":"collectors/fs/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be fs interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : File System type : fs","title":"Configuration"},{"location":"collectors/fs/#config-discovery","text":"fs collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -fs","title":"Config Discovery"},{"location":"collectors/fs/#collected-metrics","text":"OpenMetrics Metric Metric Type Labels Description fs_inodes Gauge mount, type Inodes used fs_inodes_total Gauge mount, type Total inodes count fs_inodes_available Gauge mount, type Inodes available fs_free Gauge mount, type Free disk space, bytes fs_total Gauge mount, type Total disk space, bytes fs_available Gauge mount, type Available disk space, bytes","title":"Collected Metrics"},{"location":"collectors/fs/#labels","text":"fs collector appends the following labels: Label Description dev Device path mount File system mount point type File system type (i.e. ext4 )","title":"Labels"},{"location":"collectors/fs/#notes","text":"fs collector ignores the following file system types: Linux cgroup devpts overlay proc sysfs It also ignores all file systems mounted besides the following paths: Linux /dev/ /proc/ /sys/","title":"Notes"},{"location":"collectors/fs/#sample-output","text":"","title":"Sample Output"},{"location":"collectors/http/","text":"http collector \u00b6 http collector performs the HTTP request and collects query statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be http interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description url String Request URL Config example: - id : GufoLabs Site disabled : true type : http labels : project : Gufo url : https://gufolabs.com/ Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description http_time_ns Gauge Response time in nanoseconds\" bytes Gauge Response size in bytes compressed_bytes Gauge Compressed response size in bytes Labels \u00b6 http collector doesn't append its labels, though they can be configured via labels option. Sample Output \u00b6 OpenMetrics # HELP http_bytes Response size in bytes # TYPE http_bytes gauge http_bytes{agent=\"gufo\",host=\"d20e7299d8e1\",zone=\"DC1\"} 1256 1682757242 # HELP http_compressed_bytes Compressed response size in bytes # TYPE http_compressed_bytes gauge http_compressed_bytes{agent=\"gufo\",host=\"d20e7299d8e1\",zone=\"DC1\"} 1256 1682757242 # HELP http_time_ns Response time in nanoseconds # TYPE http_time_ns gauge http_time_ns{agent=\"gufo\",host=\"d20e7299d8e1\",zone=\"DC1\"} 180379199 1682757242","title":"http"},{"location":"collectors/http/#http-collector","text":"http collector performs the HTTP request and collects query statistics.","title":"http collector"},{"location":"collectors/http/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be http interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description url String Request URL Config example: - id : GufoLabs Site disabled : true type : http labels : project : Gufo url : https://gufolabs.com/","title":"Configuration"},{"location":"collectors/http/#collected-metrics","text":"OpenMetrics Metric Metric Type Description http_time_ns Gauge Response time in nanoseconds\" bytes Gauge Response size in bytes compressed_bytes Gauge Compressed response size in bytes","title":"Collected Metrics"},{"location":"collectors/http/#labels","text":"http collector doesn't append its labels, though they can be configured via labels option.","title":"Labels"},{"location":"collectors/http/#sample-output","text":"OpenMetrics # HELP http_bytes Response size in bytes # TYPE http_bytes gauge http_bytes{agent=\"gufo\",host=\"d20e7299d8e1\",zone=\"DC1\"} 1256 1682757242 # HELP http_compressed_bytes Compressed response size in bytes # TYPE http_compressed_bytes gauge http_compressed_bytes{agent=\"gufo\",host=\"d20e7299d8e1\",zone=\"DC1\"} 1256 1682757242 # HELP http_time_ns Response time in nanoseconds # TYPE http_time_ns gauge http_time_ns{agent=\"gufo\",host=\"d20e7299d8e1\",zone=\"DC1\"} 180379199 1682757242","title":"Sample Output"},{"location":"collectors/memory/","text":"memory collector \u00b6 memory collects the host's memory usage statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be memory interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : CPU type : memory Collected Metrics \u00b6 OpenMetrics Metric Metric Type Platform Description mem_total Gauge Total mem ory in bytes mem_free Gauge Free memory in bytes mem_active Gauge Linux Active memory, bytes mem_active_anon Gauge Linux Active anonymous memory, bytes mem_active_file Gauge Linux Active pagecache memory, bytes mem_anon_huge_pages Gauge Linux Non-file backed huge pages mapped into userspace page tables mem_anon_pages Gauge Linux Non-file backed pages mapped into userspace page tables mem_bounce Gauge Linux Memory used for block device 'bounce buffers' mem_buffers Gauge Linux Memory in buffer cache mem_cached Gauge Linux Memory in the pagecache mem_commit_limit Gauge Linux Total amount of memory currently available to be allocated on the system mem_committed_as Gauge Linux The amount of memory presently allocated on the system mem_direct_map_1g Gauge Linux The amount of memory being mapped into the kernel space with 1GB size pages mem_direct_map_2m Gauge Linux The amount of memory being mapped into the kernel space with 2MB size pages mem_direct_map_4k Gauge Linux The amount of memory being mapped into the kernel space with 4k size pages mem_dirty Gauge Linux Memory waiting to be written back to disk mem_file_huge_pages Gauge Linux Memory used for filesystem data (page cache) allocated with huge pages mem_file_pmd_mapped Gauge Linux Page cache mapped into userspace with huge pages mem_huge_page_size Gauge Linux default hugepage size (in kB) mem_huge_tlb Gauge Linux total amount of memory (in kB), consumed by huge pages of all sizes mem_inactive Gauge Linux Memory which has been less recently used mem_inactive_anon Gauge Linux Anonymous memory that has not been used recently and can be swapped out mem_inactive_file Gauge Linux Pagecache memory that can be reclaimed without huge performance impact mem_k_reclaimable Gauge Linux Kernel allocations that the kernel will attempt to reclaim under memory pressure mem_kernel_stack Gauge Linux Memory consumed by the kernel stacks of all tasks mem_mapped Gauge Linux files which have been mmaped, such as libraries mem_mem_available Gauge Linux estimate of how much memory is available for starting new applications mem_mem_free Gauge Linux Total free RAM mem_mem_total Gauge Linux Total usable RAM mem_m_locked Gauge Linux Memory locked with mlock() mem_nfs_unstable Gauge Linux Always zero. Previous counted pages which had been written to the server, but has not been commit to storage mem_page_tables Gauge Linux Memory consumed by userspace page tables mem_per_cpu Gauge Linux Memory allocated to the percpu allocator used to back percpu allocations. This stat excludes the cost a mem_s_reclaimable Gauge Linux Part of Slab, that might be reclaimed, such as caches mem_s_unreclaim Gauge Linux Part of Slab, that cannot be reclaimed on memory pressure mem_sh_mem Gauge Linux Total memory used by shared memory (shmem) and tmpfs mem_sh_mem_huge_pages Gauge Linux Memory used by shared memory (shmem) and tmpfs allocated with huge pages mem_sh_mem_pmd_mapped Gauge Linux Shared memory mapped into userspace with huge pages mem_slab Gauge Linux in-kernel data structures cache swap_cached Gauge Linux Memory that once was swapped out, is swapped back in but still also is in the swapfile swap_free Gauge Linux Memory which has been evicted from RAM, and is temporarily on the disk swap_total Gauge Linux total amount of swap space available mem_unevictable Gauge Linux Memory allocated for userspace which cannot be reclaimed mem_vmalloc_chunk Gauge Linux largest contiguous block of vmalloc area which is free mem_vmalloc_total Gauge Linux total size of vmalloc virtual address space mem_vmalloc_used Gauge Linux amount of vmalloc area which is used mem_writeback Gauge Linux Memory which is actively being written back to the disk mem_writeback_tmp Gauge Linux Memory used by FUSE for temporary writeback buffers mem_load Gauge Windows ??? mem_total_phys Gauge Windows ??? mem_avail_phys Gauge Windows ??? mem_total_pagefile Gauge Windows ??? mem_avail_pagefile Gauge Windows ??? mem_total_virt Gauge Windows ??? mem_avail_virt Gauge Windows ??? mem_avail_ext Gauge Windows ??? mem_active Gauge FreeBSD ??? mem_inactive Gauge FreeBSD ??? mem_wired Gauge FreeBSD ??? mem_cache Gauge FreeBSD ??? mem_zfs_arc Gauge FreeBSD ??? mem_active Gauge OpenBSD ??? mem_inactive Gauge OpenBSD ??? mem_wired Gauge OpenBSD ??? mem_cache Gauge OpenBSD ??? mem_paging Gauge OpenBSD ??? mem_active Gauge OS X ??? mem_inactive Gauge OS X ??? mem_wired Gauge OS X ??? mem_cache Gauge OS X ??? Labels \u00b6 memory collector doesn't append its own labels. Config Discovery \u00b6 memory collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -memory Sample Output \u00b6 OpenMetrics # HELP memory_active Active memory, bytes # TYPE memory_active gauge memory_active 3230384128 1682414881 # HELP memory_active_anon Active anonymous memory, bytes # TYPE memory_active_anon gauge memory_active_anon 931033088 1682414881 # HELP memory_active_file Active pagecache memory, bytes # TYPE memory_active_file gauge memory_active_file 2299351040 1682414881 # HELP memory_anon_huge_pages Non-file backed huge pages mapped into userspace page tables # TYPE memory_anon_huge_pages gauge memory_anon_huge_pages 0 1682414881 # HELP memory_anon_pages Non-file backed pages mapped into userspace page tables # TYPE memory_anon_pages gauge memory_anon_pages 9075548160 1682414881 # HELP memory_bounce Memory used for block device 'bounce buffers' # TYPE memory_bounce gauge memory_bounce 0 1682414881","title":"memory"},{"location":"collectors/memory/#memory-collector","text":"memory collects the host's memory usage statistics.","title":"memory collector"},{"location":"collectors/memory/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be memory interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : CPU type : memory","title":"Configuration"},{"location":"collectors/memory/#collected-metrics","text":"OpenMetrics Metric Metric Type Platform Description mem_total Gauge Total mem ory in bytes mem_free Gauge Free memory in bytes mem_active Gauge Linux Active memory, bytes mem_active_anon Gauge Linux Active anonymous memory, bytes mem_active_file Gauge Linux Active pagecache memory, bytes mem_anon_huge_pages Gauge Linux Non-file backed huge pages mapped into userspace page tables mem_anon_pages Gauge Linux Non-file backed pages mapped into userspace page tables mem_bounce Gauge Linux Memory used for block device 'bounce buffers' mem_buffers Gauge Linux Memory in buffer cache mem_cached Gauge Linux Memory in the pagecache mem_commit_limit Gauge Linux Total amount of memory currently available to be allocated on the system mem_committed_as Gauge Linux The amount of memory presently allocated on the system mem_direct_map_1g Gauge Linux The amount of memory being mapped into the kernel space with 1GB size pages mem_direct_map_2m Gauge Linux The amount of memory being mapped into the kernel space with 2MB size pages mem_direct_map_4k Gauge Linux The amount of memory being mapped into the kernel space with 4k size pages mem_dirty Gauge Linux Memory waiting to be written back to disk mem_file_huge_pages Gauge Linux Memory used for filesystem data (page cache) allocated with huge pages mem_file_pmd_mapped Gauge Linux Page cache mapped into userspace with huge pages mem_huge_page_size Gauge Linux default hugepage size (in kB) mem_huge_tlb Gauge Linux total amount of memory (in kB), consumed by huge pages of all sizes mem_inactive Gauge Linux Memory which has been less recently used mem_inactive_anon Gauge Linux Anonymous memory that has not been used recently and can be swapped out mem_inactive_file Gauge Linux Pagecache memory that can be reclaimed without huge performance impact mem_k_reclaimable Gauge Linux Kernel allocations that the kernel will attempt to reclaim under memory pressure mem_kernel_stack Gauge Linux Memory consumed by the kernel stacks of all tasks mem_mapped Gauge Linux files which have been mmaped, such as libraries mem_mem_available Gauge Linux estimate of how much memory is available for starting new applications mem_mem_free Gauge Linux Total free RAM mem_mem_total Gauge Linux Total usable RAM mem_m_locked Gauge Linux Memory locked with mlock() mem_nfs_unstable Gauge Linux Always zero. Previous counted pages which had been written to the server, but has not been commit to storage mem_page_tables Gauge Linux Memory consumed by userspace page tables mem_per_cpu Gauge Linux Memory allocated to the percpu allocator used to back percpu allocations. This stat excludes the cost a mem_s_reclaimable Gauge Linux Part of Slab, that might be reclaimed, such as caches mem_s_unreclaim Gauge Linux Part of Slab, that cannot be reclaimed on memory pressure mem_sh_mem Gauge Linux Total memory used by shared memory (shmem) and tmpfs mem_sh_mem_huge_pages Gauge Linux Memory used by shared memory (shmem) and tmpfs allocated with huge pages mem_sh_mem_pmd_mapped Gauge Linux Shared memory mapped into userspace with huge pages mem_slab Gauge Linux in-kernel data structures cache swap_cached Gauge Linux Memory that once was swapped out, is swapped back in but still also is in the swapfile swap_free Gauge Linux Memory which has been evicted from RAM, and is temporarily on the disk swap_total Gauge Linux total amount of swap space available mem_unevictable Gauge Linux Memory allocated for userspace which cannot be reclaimed mem_vmalloc_chunk Gauge Linux largest contiguous block of vmalloc area which is free mem_vmalloc_total Gauge Linux total size of vmalloc virtual address space mem_vmalloc_used Gauge Linux amount of vmalloc area which is used mem_writeback Gauge Linux Memory which is actively being written back to the disk mem_writeback_tmp Gauge Linux Memory used by FUSE for temporary writeback buffers mem_load Gauge Windows ??? mem_total_phys Gauge Windows ??? mem_avail_phys Gauge Windows ??? mem_total_pagefile Gauge Windows ??? mem_avail_pagefile Gauge Windows ??? mem_total_virt Gauge Windows ??? mem_avail_virt Gauge Windows ??? mem_avail_ext Gauge Windows ??? mem_active Gauge FreeBSD ??? mem_inactive Gauge FreeBSD ??? mem_wired Gauge FreeBSD ??? mem_cache Gauge FreeBSD ??? mem_zfs_arc Gauge FreeBSD ??? mem_active Gauge OpenBSD ??? mem_inactive Gauge OpenBSD ??? mem_wired Gauge OpenBSD ??? mem_cache Gauge OpenBSD ??? mem_paging Gauge OpenBSD ??? mem_active Gauge OS X ??? mem_inactive Gauge OS X ??? mem_wired Gauge OS X ??? mem_cache Gauge OS X ???","title":"Collected Metrics"},{"location":"collectors/memory/#labels","text":"memory collector doesn't append its own labels.","title":"Labels"},{"location":"collectors/memory/#config-discovery","text":"memory collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -memory","title":"Config Discovery"},{"location":"collectors/memory/#sample-output","text":"OpenMetrics # HELP memory_active Active memory, bytes # TYPE memory_active gauge memory_active 3230384128 1682414881 # HELP memory_active_anon Active anonymous memory, bytes # TYPE memory_active_anon gauge memory_active_anon 931033088 1682414881 # HELP memory_active_file Active pagecache memory, bytes # TYPE memory_active_file gauge memory_active_file 2299351040 1682414881 # HELP memory_anon_huge_pages Non-file backed huge pages mapped into userspace page tables # TYPE memory_anon_huge_pages gauge memory_anon_huge_pages 0 1682414881 # HELP memory_anon_pages Non-file backed pages mapped into userspace page tables # TYPE memory_anon_pages gauge memory_anon_pages 9075548160 1682414881 # HELP memory_bounce Memory used for block device 'bounce buffers' # TYPE memory_bounce gauge memory_bounce 0 1682414881","title":"Sample Output"},{"location":"collectors/modbus_rtu/","text":"# modbus_tcp collector modbus_tcp collector performs Modbus RTU requests to collect performance data. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be modbus_rtu interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description timeout_ms Integer 5000 Request timeout, ms. defaults Object Items defaults serial_path String Default path to the serial port device (i.e. /dev/ttyS1 ) slave Integer Default modbus RTU slave id baud_rate Integer 115200 Default serial port speed data_bits Integer 8 Default serial port data bits: 5, 6, 7 or 8 parity String none Default serial port parity, either none , even or odd stop_bits Integer 1 Default serial port stop bits, either 1 or 2 first_reference Integer 0 Starting register. Adjusts items.register by this value. items Array Metrics to collect as a list of items name String Metric name, as to be exposed help String Short help to be exposed along with metric labels Object Metric labels serial_path String defaults.serial_path Path to the serial port device (i.e. /dev/ttyS1 ). Use defaults when not set slave Integer defaults.slave Modbus RTU slave id. Use defaults when not set baud_rate Integer defaults.baud_rate Serial port speed. Use defaults when not set data_bits Integer defaults.data_bits Serial port data bits: 5, 6, 7 or 8. Use defaults when not set parity String defaults.parity Serial port parity, either none , even or odd . Use defaults when not set stop_bits Integer defaults.stop_bits Serial port stop bits, either 1 or 2 . Use defaults when not set register Integer Starting register of modbus request, based on defaults.first_reference register_type String holding Modbus request type. Either holding , input or coil format String Expected response format. See Response format for details slave Integer 255 Optional slave id, see note below. Check address notation Take note the starting register address is zero-based, while vendors can document the registers starting from 1. Refer to the vendor documentation and set defaults.first_reference to 1 when neccessary. Config Example: - id : Modbus type : modbus_rtu defaults : serial_path : /dev/ttyS1 baud_rate : 9600 bits : 8 stop_bits : 1 items : - name : dc_temp help : Temperature in celsius labels : side : east register : 12 format : f32_be - name : dc_temp help : Temperature in celsius labels : side : west register : 14 format : f32_be Response Format \u00b6 Modbus' response is as an array of 16-bit integers. Actual data encoding should be set as format parameter. Some encodings may require reading 2 or 4 adjacent registers. Format Count Description i16_be 1 16-bit signed integer, big-endian. u16_be 1 16-bit unsigned integer, big-endian. i32_be 2 32-bit signed integer, big-endian i32_le 2 32-bit signed integer, low-endian i32_bs 2 32-bit signed integer, big-endian, swapped i32_ls 2 32-bit signed integer, low-endian, swapped u32_be 2 32-bit unsigned integer, big-endian u32_le 2 32-bit unsigned integer, low-endian u32_bs 2 32-bit unsigned integer, big-endian, swapped u32_ls 2 32-bit unsigned integer, low-endian, swapped f32_be 2 32-bit floating point, big-endian f32_le 2 32-bit floating point, low-endian f32_bs 2 32-bit floating point, big-endian, swapped f32_ls 2 32-bit floating point, low-endian, swapped The 32-bit integer 0x01020304 stored as a sequence of 4 octets. 4 different approaches widely used between modbus devices: Format 1 2 3 4 Big-endian (be) 01 02 03 04 Low-endian (le) 04 03 02 01 Big-endian, swapped (bs) 02 01 04 03 Low-endian, swapped (ls) 03 04 01 02 Little-Endian Notice There is some mess with 32-bit low-endian types. Some vendors and tools call the low-endian swapped format merely as low-endian. So try to change le suffix to ls if the result is really wierd. Collected Metrics \u00b6 modbus_rtu doesn't impose the specific format of the metrics. The generated metrics are fully configurable. Labels \u00b6 Metric labels depends on configuration. Sample Output \u00b6","title":"modbus_rtu"},{"location":"collectors/modbus_rtu/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be modbus_rtu interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description timeout_ms Integer 5000 Request timeout, ms. defaults Object Items defaults serial_path String Default path to the serial port device (i.e. /dev/ttyS1 ) slave Integer Default modbus RTU slave id baud_rate Integer 115200 Default serial port speed data_bits Integer 8 Default serial port data bits: 5, 6, 7 or 8 parity String none Default serial port parity, either none , even or odd stop_bits Integer 1 Default serial port stop bits, either 1 or 2 first_reference Integer 0 Starting register. Adjusts items.register by this value. items Array Metrics to collect as a list of items name String Metric name, as to be exposed help String Short help to be exposed along with metric labels Object Metric labels serial_path String defaults.serial_path Path to the serial port device (i.e. /dev/ttyS1 ). Use defaults when not set slave Integer defaults.slave Modbus RTU slave id. Use defaults when not set baud_rate Integer defaults.baud_rate Serial port speed. Use defaults when not set data_bits Integer defaults.data_bits Serial port data bits: 5, 6, 7 or 8. Use defaults when not set parity String defaults.parity Serial port parity, either none , even or odd . Use defaults when not set stop_bits Integer defaults.stop_bits Serial port stop bits, either 1 or 2 . Use defaults when not set register Integer Starting register of modbus request, based on defaults.first_reference register_type String holding Modbus request type. Either holding , input or coil format String Expected response format. See Response format for details slave Integer 255 Optional slave id, see note below. Check address notation Take note the starting register address is zero-based, while vendors can document the registers starting from 1. Refer to the vendor documentation and set defaults.first_reference to 1 when neccessary. Config Example: - id : Modbus type : modbus_rtu defaults : serial_path : /dev/ttyS1 baud_rate : 9600 bits : 8 stop_bits : 1 items : - name : dc_temp help : Temperature in celsius labels : side : east register : 12 format : f32_be - name : dc_temp help : Temperature in celsius labels : side : west register : 14 format : f32_be","title":"Configuration"},{"location":"collectors/modbus_rtu/#response-format","text":"Modbus' response is as an array of 16-bit integers. Actual data encoding should be set as format parameter. Some encodings may require reading 2 or 4 adjacent registers. Format Count Description i16_be 1 16-bit signed integer, big-endian. u16_be 1 16-bit unsigned integer, big-endian. i32_be 2 32-bit signed integer, big-endian i32_le 2 32-bit signed integer, low-endian i32_bs 2 32-bit signed integer, big-endian, swapped i32_ls 2 32-bit signed integer, low-endian, swapped u32_be 2 32-bit unsigned integer, big-endian u32_le 2 32-bit unsigned integer, low-endian u32_bs 2 32-bit unsigned integer, big-endian, swapped u32_ls 2 32-bit unsigned integer, low-endian, swapped f32_be 2 32-bit floating point, big-endian f32_le 2 32-bit floating point, low-endian f32_bs 2 32-bit floating point, big-endian, swapped f32_ls 2 32-bit floating point, low-endian, swapped The 32-bit integer 0x01020304 stored as a sequence of 4 octets. 4 different approaches widely used between modbus devices: Format 1 2 3 4 Big-endian (be) 01 02 03 04 Low-endian (le) 04 03 02 01 Big-endian, swapped (bs) 02 01 04 03 Low-endian, swapped (ls) 03 04 01 02 Little-Endian Notice There is some mess with 32-bit low-endian types. Some vendors and tools call the low-endian swapped format merely as low-endian. So try to change le suffix to ls if the result is really wierd.","title":"Response Format"},{"location":"collectors/modbus_rtu/#collected-metrics","text":"modbus_rtu doesn't impose the specific format of the metrics. The generated metrics are fully configurable.","title":"Collected Metrics"},{"location":"collectors/modbus_rtu/#labels","text":"Metric labels depends on configuration.","title":"Labels"},{"location":"collectors/modbus_rtu/#sample-output","text":"","title":"Sample Output"},{"location":"collectors/modbus_tcp/","text":"# modbus_tcp collector modbus_tcp collector performs Modbus TCP requests to collect performance data. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be modbus_tcp interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description address String IP address of Modbus TCP server port Integer 502 Port of Modbus TCP server timeout_ms Integer 5000 Request timeout, ms. defaults Object Items defaults first_reference Integer 0 Starting register. Adjusts items.register by this value. items Array Metrics to collect as a list of items name String Metric name, as to be exposed help String Short help to be exposed along with metric labels Object Metric labels register Integer Starting register of modbus request, based on defaults.first_reference register_type String holding Modbus request type. Either holding , input or coil format String Expected response format. See Response format for details slave Integer 255 Optional slave id, see note below. Check address notation Take note the starting register address is zero-based, while vendors can document the registers starting from 1. Refer to the vendor documentation and set defaults.first_reference to 1 when neccessary. On Slave ID Modbus TCP specification insists on using slave id of 255 for TCP connections. Meanwhile some implmenetations await broadcast id (0). Modbust TCP-to-RTU proxies also may expect explicit slave id to process the request. Config Example: - id : Modbus type : modbus_tcp address : 192.168.0.2 port : 502 items : - name : dc_temp help : Temperature in celsius labels : side : east register : 12 format : f32_be - name : dc_temp help : Temperature in celsius labels : side : west register : 14 format : f32_be Response Format \u00b6 Modbus' response is as an array of 16-bit integers. Actual data encoding should be set as format parameter. Some encodings may require reading 2 or 4 adjacent registers. Format Count Description i16_be 1 16-bit signed integer, big-endian. u16_be 1 16-bit unsigned integer, big-endian. i32_be 2 32-bit signed integer, big-endian i32_le 2 32-bit signed integer, low-endian i32_bs 2 32-bit signed integer, big-endian, swapped i32_ls 2 32-bit signed integer, low-endian, swapped u32_be 2 32-bit unsigned integer, big-endian u32_le 2 32-bit unsigned integer, low-endian u32_bs 2 32-bit unsigned integer, big-endian, swapped u32_ls 2 32-bit unsigned integer, low-endian, swapped f32_be 2 32-bit floating point, big-endian f32_le 2 32-bit floating point, low-endian f32_bs 2 32-bit floating point, big-endian, swapped f32_ls 2 32-bit floating point, low-endian, swapped The 32-bit integer 0x01020304 stored as a sequence of 4 octets. 4 different approaches widely used between modbus devices: Format 1 2 3 4 Big-endian (be) 01 02 03 04 Low-endian (le) 04 03 02 01 Big-endian, swapped (bs) 02 01 04 03 Low-endian, swapped (ls) 03 04 01 02 Little-Endian Notice There is some mess with 32-bit low-endian types. Some vendors and tools call the low-endian swapped format merely as low-endian. So try to change le suffix to ls if the result is really wierd. Collected Metrics \u00b6 modbus_tcp doesn't impose the specific format of the metrics. The generated metrics are fully configurable. Labels \u00b6 Metric labels depends on configuration. Sample Output \u00b6","title":"modbus_tcp"},{"location":"collectors/modbus_tcp/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be modbus_tcp interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description address String IP address of Modbus TCP server port Integer 502 Port of Modbus TCP server timeout_ms Integer 5000 Request timeout, ms. defaults Object Items defaults first_reference Integer 0 Starting register. Adjusts items.register by this value. items Array Metrics to collect as a list of items name String Metric name, as to be exposed help String Short help to be exposed along with metric labels Object Metric labels register Integer Starting register of modbus request, based on defaults.first_reference register_type String holding Modbus request type. Either holding , input or coil format String Expected response format. See Response format for details slave Integer 255 Optional slave id, see note below. Check address notation Take note the starting register address is zero-based, while vendors can document the registers starting from 1. Refer to the vendor documentation and set defaults.first_reference to 1 when neccessary. On Slave ID Modbus TCP specification insists on using slave id of 255 for TCP connections. Meanwhile some implmenetations await broadcast id (0). Modbust TCP-to-RTU proxies also may expect explicit slave id to process the request. Config Example: - id : Modbus type : modbus_tcp address : 192.168.0.2 port : 502 items : - name : dc_temp help : Temperature in celsius labels : side : east register : 12 format : f32_be - name : dc_temp help : Temperature in celsius labels : side : west register : 14 format : f32_be","title":"Configuration"},{"location":"collectors/modbus_tcp/#response-format","text":"Modbus' response is as an array of 16-bit integers. Actual data encoding should be set as format parameter. Some encodings may require reading 2 or 4 adjacent registers. Format Count Description i16_be 1 16-bit signed integer, big-endian. u16_be 1 16-bit unsigned integer, big-endian. i32_be 2 32-bit signed integer, big-endian i32_le 2 32-bit signed integer, low-endian i32_bs 2 32-bit signed integer, big-endian, swapped i32_ls 2 32-bit signed integer, low-endian, swapped u32_be 2 32-bit unsigned integer, big-endian u32_le 2 32-bit unsigned integer, low-endian u32_bs 2 32-bit unsigned integer, big-endian, swapped u32_ls 2 32-bit unsigned integer, low-endian, swapped f32_be 2 32-bit floating point, big-endian f32_le 2 32-bit floating point, low-endian f32_bs 2 32-bit floating point, big-endian, swapped f32_ls 2 32-bit floating point, low-endian, swapped The 32-bit integer 0x01020304 stored as a sequence of 4 octets. 4 different approaches widely used between modbus devices: Format 1 2 3 4 Big-endian (be) 01 02 03 04 Low-endian (le) 04 03 02 01 Big-endian, swapped (bs) 02 01 04 03 Low-endian, swapped (ls) 03 04 01 02 Little-Endian Notice There is some mess with 32-bit low-endian types. Some vendors and tools call the low-endian swapped format merely as low-endian. So try to change le suffix to ls if the result is really wierd.","title":"Response Format"},{"location":"collectors/modbus_tcp/#collected-metrics","text":"modbus_tcp doesn't impose the specific format of the metrics. The generated metrics are fully configurable.","title":"Collected Metrics"},{"location":"collectors/modbus_tcp/#labels","text":"Metric labels depends on configuration.","title":"Labels"},{"location":"collectors/modbus_tcp/#sample-output","text":"","title":"Sample Output"},{"location":"collectors/mysql/","text":"mysql collector \u00b6 mysql collects MySQL instance statistics The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be mysql interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection username String Username to connect database password String Password to connect database Config example: - id : mysql disabled : false type : mysql host : 127.0.0.1 username : root password : secret Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description mysql_aborted_clients Gauge ??? mysql_aborted_connects Gauge ??? mysql_acl_cache_items_count Gauge ??? mysql_binlog_cache_disk_use Gauge ??? mysql_binlog_cache_use Gauge ??? mysql_binlog_stmt_cache_disk_use Gauge ??? mysql_binlog_stmt_cache_use Gauge ??? mysql_bytes_received Gauge ??? mysql_bytes_sent Gauge ??? mysql_com_admin_commands Gauge ??? mysql_com_alter_db Gauge ??? mysql_com_alter_event Gauge ??? mysql_com_alter_function Gauge ??? mysql_com_alter_instance Gauge ??? mysql_com_alter_procedure Gauge ??? mysql_com_alter_resource_group Gauge ??? mysql_com_alter_server Gauge ??? mysql_com_alter_table Gauge ??? mysql_com_alter_tablespace Gauge ??? mysql_com_alter_user Gauge ??? mysql_com_alter_user_default_role Gauge ??? mysql_com_analyze Gauge ??? mysql_com_assign_to_keycache Gauge ??? mysql_com_begin Gauge ??? mysql_com_binlog Gauge ??? mysql_com_call_procedure Gauge ??? mysql_com_change_db Gauge ??? mysql_com_change_master Gauge ??? mysql_com_change_repl_filter Gauge ??? mysql_com_change_replication_source Gauge ??? mysql_com_check Gauge ??? mysql_com_checksum Gauge ??? mysql_com_clone Gauge ??? mysql_com_commit Gauge ??? mysql_com_create_db Gauge ??? mysql_com_create_event Gauge ??? mysql_com_create_function Gauge ??? mysql_com_create_index Gauge ??? mysql_com_create_procedure Gauge ??? mysql_com_create_resource_group Gauge ??? mysql_com_create_role Gauge ??? mysql_com_create_server Gauge ??? mysql_com_create_spatial_reference_system Gauge ??? mysql_com_create_table Gauge ??? mysql_com_create_trigger Gauge ??? mysql_com_create_udf Gauge ??? mysql_com_create_user Gauge ??? mysql_com_create_view Gauge ??? mysql_com_dealloc_sql Gauge ??? mysql_com_delete Gauge ??? mysql_com_delete_multi Gauge ??? mysql_com_do Gauge ??? mysql_com_drop_db Gauge ??? mysql_com_drop_event Gauge ??? mysql_com_drop_function Gauge ??? mysql_com_drop_index Gauge ??? mysql_com_drop_procedure Gauge ??? mysql_com_drop_resource_group Gauge ??? mysql_com_drop_role Gauge ??? mysql_com_drop_server Gauge ??? mysql_com_drop_spatial_reference_system Gauge ??? mysql_com_drop_table Gauge ??? mysql_com_drop_trigger Gauge ??? mysql_com_drop_user Gauge ??? mysql_com_drop_view Gauge ??? mysql_com_empty_query Gauge ??? mysql_com_execute_sql Gauge ??? mysql_com_explain_other Gauge ??? mysql_com_flush Gauge ??? mysql_com_get_diagnostics Gauge ??? mysql_com_grant Gauge ??? mysql_com_grant_roles Gauge ??? mysql_com_group_replication_start Gauge ??? mysql_com_group_replication_stop Gauge ??? mysql_com_ha_close Gauge ??? mysql_com_ha_open Gauge ??? mysql_com_ha_read Gauge ??? mysql_com_help Gauge ??? mysql_com_import Gauge ??? mysql_com_insert Gauge ??? mysql_com_insert_select Gauge ??? mysql_com_install_component Gauge ??? mysql_com_install_plugin Gauge ??? mysql_com_kill Gauge ??? mysql_com_load Gauge ??? mysql_com_lock_instance Gauge ??? mysql_com_lock_tables Gauge ??? mysql_com_optimize Gauge ??? mysql_com_preload_keys Gauge ??? mysql_com_prepare_sql Gauge ??? mysql_com_purge Gauge ??? mysql_com_purge_before_date Gauge ??? mysql_com_release_savepoint Gauge ??? mysql_com_rename_table Gauge ??? mysql_com_rename_user Gauge ??? mysql_com_repair Gauge ??? mysql_com_replace Gauge ??? mysql_com_replace_select Gauge ??? mysql_com_replica_start Gauge ??? mysql_com_replica_stop Gauge ??? mysql_com_reset Gauge ??? mysql_com_resignal Gauge ??? mysql_com_restart Gauge ??? mysql_com_revoke Gauge ??? mysql_com_revoke_all Gauge ??? mysql_com_revoke_roles Gauge ??? mysql_com_rollback Gauge ??? mysql_com_rollback_to_savepoint Gauge ??? mysql_com_savepoint Gauge ??? mysql_com_select Gauge ??? mysql_com_set_option Gauge ??? mysql_com_set_password Gauge ??? mysql_com_set_resource_group Gauge ??? mysql_com_set_role Gauge ??? mysql_com_show_binlog_events Gauge ??? mysql_com_show_binlogs Gauge ??? mysql_com_show_charsets Gauge ??? mysql_com_show_collations Gauge ??? mysql_com_show_create_db Gauge ??? mysql_com_show_create_event Gauge ??? mysql_com_show_create_func Gauge ??? mysql_com_show_create_proc Gauge ??? mysql_com_show_create_table Gauge ??? mysql_com_show_create_trigger Gauge ??? mysql_com_show_create_user Gauge ??? mysql_com_show_databases Gauge ??? mysql_com_show_engine_logs Gauge ??? mysql_com_show_engine_mutex Gauge ??? mysql_com_show_engine_status Gauge ??? mysql_com_show_errors Gauge ??? mysql_com_show_events Gauge ??? mysql_com_show_fields Gauge ??? mysql_com_show_function_code Gauge ??? mysql_com_show_function_status Gauge ??? mysql_com_show_grants Gauge ??? mysql_com_show_keys Gauge ??? mysql_com_show_master_status Gauge ??? mysql_com_show_open_tables Gauge ??? mysql_com_show_plugins Gauge ??? mysql_com_show_privileges Gauge ??? mysql_com_show_procedure_code Gauge ??? mysql_com_show_procedure_status Gauge ??? mysql_com_show_processlist Gauge ??? mysql_com_show_profile Gauge ??? mysql_com_show_profiles Gauge ??? mysql_com_show_relaylog_events Gauge ??? mysql_com_show_replica_status Gauge ??? mysql_com_show_replicas Gauge ??? mysql_com_show_slave_hosts Gauge ??? mysql_com_show_slave_status Gauge ??? mysql_com_show_status Gauge ??? mysql_com_show_storage_engines Gauge ??? mysql_com_show_table_status Gauge ??? mysql_com_show_tables Gauge ??? mysql_com_show_triggers Gauge ??? mysql_com_show_variables Gauge ??? mysql_com_show_warnings Gauge ??? mysql_com_shutdown Gauge ??? mysql_com_signal Gauge ??? mysql_com_slave_start Gauge ??? mysql_com_slave_stop Gauge ??? mysql_com_stmt_close Gauge ??? mysql_com_stmt_execute Gauge ??? mysql_com_stmt_fetch Gauge ??? mysql_com_stmt_prepare Gauge ??? mysql_com_stmt_reprepare Gauge ??? mysql_com_stmt_reset Gauge ??? mysql_com_stmt_send_long_data Gauge ??? mysql_com_truncate Gauge ??? mysql_com_uninstall_component Gauge ??? mysql_com_uninstall_plugin Gauge ??? mysql_com_unlock_instance Gauge ??? mysql_com_unlock_tables Gauge ??? mysql_com_update Gauge ??? mysql_com_update_multi Gauge ??? mysql_com_xa_commit Gauge ??? mysql_com_xa_end Gauge ??? mysql_com_xa_prepare Gauge ??? mysql_com_xa_recover Gauge ??? mysql_com_xa_rollback Gauge ??? mysql_com_xa_start Gauge ??? mysql_connection_errors_accept Gauge ??? mysql_connection_errors_internal Gauge ??? mysql_connection_errors_max_connections Gauge ??? mysql_connection_errors_peer_address Gauge ??? mysql_connection_errors_select Gauge ??? mysql_connection_errors_tcpwrap Gauge ??? mysql_connections Gauge ??? mysql_created_tmp_disk_tables Gauge ??? mysql_created_tmp_files Gauge ??? mysql_created_tmp_tables Gauge ??? mysql_delayed_errors Gauge ??? mysql_delayed_insert_threads Gauge ??? mysql_delayed_writes Gauge ??? mysql_error_log_buffered_bytes Gauge ??? mysql_error_log_buffered_events Gauge ??? mysql_error_log_expired_events Gauge ??? mysql_error_log_latest_write Gauge ??? mysql_flush_commands Gauge ??? mysql_global_connection_memory Gauge ??? mysql_handler_commit Gauge ??? mysql_handler_delete Gauge ??? mysql_handler_discover Gauge ??? mysql_handler_external_lock Gauge ??? mysql_handler_mrr_init Gauge ??? mysql_handler_prepare Gauge ??? mysql_handler_read_first Gauge ??? mysql_handler_read_key Gauge ??? mysql_handler_read_last Gauge ??? mysql_handler_read_next Gauge ??? mysql_handler_read_prev Gauge ??? mysql_handler_read_rnd Gauge ??? mysql_handler_read_rnd_next Gauge ??? mysql_handler_rollback Gauge ??? mysql_handler_savepoint Gauge ??? mysql_handler_savepoint_rollback Gauge ??? mysql_handler_update Gauge ??? mysql_handler_write Gauge ??? mysql_innodb_buffer_pool_bytes_data Gauge ??? mysql_innodb_buffer_pool_bytes_dirty Gauge ??? mysql_innodb_buffer_pool_pages_data Gauge ??? mysql_innodb_buffer_pool_pages_dirty Gauge ??? mysql_innodb_buffer_pool_pages_flushed Gauge ??? mysql_innodb_buffer_pool_pages_free Gauge ??? mysql_innodb_buffer_pool_pages_misc Gauge ??? mysql_innodb_buffer_pool_pages_total Gauge ??? mysql_innodb_buffer_pool_read_ahead Gauge ??? mysql_innodb_buffer_pool_read_ahead_evicted Gauge ??? mysql_innodb_buffer_pool_read_ahead_rnd Gauge ??? mysql_innodb_buffer_pool_read_requests Gauge ??? mysql_innodb_buffer_pool_reads Gauge ??? mysql_innodb_buffer_pool_resize_status_code Gauge ??? mysql_innodb_buffer_pool_resize_status_progress Gauge ??? mysql_innodb_buffer_pool_wait_free Gauge ??? mysql_innodb_buffer_pool_write_requests Gauge ??? mysql_innodb_data_fsyncs Gauge ??? mysql_innodb_data_pending_fsyncs Gauge ??? mysql_innodb_data_pending_reads Gauge ??? mysql_innodb_data_pending_writes Gauge ??? mysql_innodb_data_read Gauge ??? mysql_innodb_data_reads Gauge ??? mysql_innodb_data_writes Gauge ??? mysql_innodb_data_written Gauge ??? mysql_innodb_dblwr_pages_written Gauge ??? mysql_innodb_dblwr_writes Gauge ??? mysql_innodb_log_waits Gauge ??? mysql_innodb_log_write_requests Gauge ??? mysql_innodb_log_writes Gauge ??? mysql_innodb_num_open_files Gauge ??? mysql_innodb_os_log_fsyncs Gauge ??? mysql_innodb_os_log_pending_fsyncs Gauge ??? mysql_innodb_os_log_pending_writes Gauge ??? mysql_innodb_os_log_written Gauge ??? mysql_innodb_page_size Gauge ??? mysql_innodb_pages_created Gauge ??? mysql_innodb_pages_read Gauge ??? mysql_innodb_pages_written Gauge ??? mysql_innodb_redo_log_capacity_resized Gauge ??? mysql_innodb_redo_log_checkpoint_lsn Gauge ??? mysql_innodb_redo_log_current_lsn Gauge ??? mysql_innodb_redo_log_flushed_to_disk_lsn Gauge ??? mysql_innodb_redo_log_logical_size Gauge ??? mysql_innodb_redo_log_physical_size Gauge ??? mysql_innodb_redo_log_uuid Gauge ??? mysql_innodb_row_lock_current_waits Gauge ??? mysql_innodb_row_lock_time Gauge ??? mysql_innodb_row_lock_time_avg Gauge ??? mysql_innodb_row_lock_time_max Gauge ??? mysql_innodb_row_lock_waits Gauge ??? mysql_innodb_rows_deleted Gauge ??? mysql_innodb_rows_inserted Gauge ??? mysql_innodb_rows_read Gauge ??? mysql_innodb_rows_updated Gauge ??? mysql_innodb_sampled_pages_read Gauge ??? mysql_innodb_sampled_pages_skipped Gauge ??? mysql_innodb_system_rows_deleted Gauge ??? mysql_innodb_system_rows_inserted Gauge ??? mysql_innodb_system_rows_read Gauge ??? mysql_innodb_system_rows_updated Gauge ??? mysql_innodb_truncated_status_writes Gauge ??? mysql_innodb_undo_tablespaces_active Gauge ??? mysql_innodb_undo_tablespaces_explicit Gauge ??? mysql_innodb_undo_tablespaces_implicit Gauge ??? mysql_innodb_undo_tablespaces_total Gauge ??? mysql_key_blocks_not_flushed Gauge ??? mysql_key_blocks_unused Gauge ??? mysql_key_blocks_used Gauge ??? mysql_key_read_requests Gauge ??? mysql_key_reads Gauge ??? mysql_key_write_requests Gauge ??? mysql_key_writes Gauge ??? mysql_locked_connects Gauge ??? mysql_max_execution_time_exceeded Gauge ??? mysql_max_execution_time_set Gauge ??? mysql_max_execution_time_set_failed Gauge ??? mysql_max_used_connections Gauge ??? mysql_mysqlx_aborted_clients Gauge ??? mysql_mysqlx_bytes_received Gauge ??? mysql_mysqlx_bytes_received_compressed_payload Gauge ??? mysql_mysqlx_bytes_received_uncompressed_frame Gauge ??? mysql_mysqlx_bytes_sent Gauge ??? mysql_mysqlx_bytes_sent_compressed_payload Gauge ??? mysql_mysqlx_bytes_sent_uncompressed_frame Gauge ??? mysql_mysqlx_connection_accept_errors Gauge ??? mysql_mysqlx_connection_errors Gauge ??? mysql_mysqlx_connections_accepted Gauge ??? mysql_mysqlx_connections_closed Gauge ??? mysql_mysqlx_connections_rejected Gauge ??? mysql_mysqlx_crud_create_view Gauge ??? mysql_mysqlx_crud_delete Gauge ??? mysql_mysqlx_crud_drop_view Gauge ??? mysql_mysqlx_crud_find Gauge ??? mysql_mysqlx_crud_insert Gauge ??? mysql_mysqlx_crud_modify_view Gauge ??? mysql_mysqlx_crud_update Gauge ??? mysql_mysqlx_cursor_close Gauge ??? mysql_mysqlx_cursor_fetch Gauge ??? mysql_mysqlx_cursor_open Gauge ??? mysql_mysqlx_errors_sent Gauge ??? mysql_mysqlx_errors_unknown_message_type Gauge ??? mysql_mysqlx_expect_close Gauge ??? mysql_mysqlx_expect_open Gauge ??? mysql_mysqlx_init_error Gauge ??? mysql_mysqlx_messages_sent Gauge ??? mysql_mysqlx_notice_global_sent Gauge ??? mysql_mysqlx_notice_other_sent Gauge ??? mysql_mysqlx_notice_warning_sent Gauge ??? mysql_mysqlx_notified_by_group_replication Gauge ??? mysql_mysqlx_port Gauge ??? mysql_mysqlx_prep_deallocate Gauge ??? mysql_mysqlx_prep_execute Gauge ??? mysql_mysqlx_prep_prepare Gauge ??? mysql_mysqlx_rows_sent Gauge ??? mysql_mysqlx_sessions Gauge ??? mysql_mysqlx_sessions_accepted Gauge ??? mysql_mysqlx_sessions_closed Gauge ??? mysql_mysqlx_sessions_fatal_error Gauge ??? mysql_mysqlx_sessions_killed Gauge ??? mysql_mysqlx_sessions_rejected Gauge ??? mysql_mysqlx_ssl_accepts Gauge ??? mysql_mysqlx_ssl_ctx_verify_depth Gauge ??? mysql_mysqlx_ssl_ctx_verify_mode Gauge ??? mysql_mysqlx_ssl_finished_accepts Gauge ??? mysql_mysqlx_stmt_create_collection Gauge ??? mysql_mysqlx_stmt_create_collection_index Gauge ??? mysql_mysqlx_stmt_disable_notices Gauge ??? mysql_mysqlx_stmt_drop_collection Gauge ??? mysql_mysqlx_stmt_drop_collection_index Gauge ??? mysql_mysqlx_stmt_enable_notices Gauge ??? mysql_mysqlx_stmt_ensure_collection Gauge ??? mysql_mysqlx_stmt_execute_mysqlx Gauge ??? mysql_mysqlx_stmt_execute_sql Gauge ??? mysql_mysqlx_stmt_execute_xplugin Gauge ??? mysql_mysqlx_stmt_get_collection_options Gauge ??? mysql_mysqlx_stmt_kill_client Gauge ??? mysql_mysqlx_stmt_list_clients Gauge ??? mysql_mysqlx_stmt_list_notices Gauge ??? mysql_mysqlx_stmt_list_objects Gauge ??? mysql_mysqlx_stmt_modify_collection_options Gauge ??? mysql_mysqlx_stmt_ping Gauge ??? mysql_mysqlx_worker_threads Gauge ??? mysql_mysqlx_worker_threads_active Gauge ??? mysql_not_flushed_delayed_rows Gauge ??? mysql_ongoing_anonymous_transaction_count Gauge ??? mysql_open_files Gauge ??? mysql_open_streams Gauge ??? mysql_open_table_definitions Gauge ??? mysql_open_tables Gauge ??? mysql_opened_files Gauge ??? mysql_opened_table_definitions Gauge ??? mysql_opened_tables Gauge ??? mysql_performance_schema_accounts_lost Gauge ??? mysql_performance_schema_cond_classes_lost Gauge ??? mysql_performance_schema_cond_instances_lost Gauge ??? mysql_performance_schema_digest_lost Gauge ??? mysql_performance_schema_file_classes_lost Gauge ??? mysql_performance_schema_file_handles_lost Gauge ??? mysql_performance_schema_file_instances_lost Gauge ??? mysql_performance_schema_hosts_lost Gauge ??? mysql_performance_schema_index_stat_lost Gauge ??? mysql_performance_schema_locker_lost Gauge ??? mysql_performance_schema_memory_classes_lost Gauge ??? mysql_performance_schema_metadata_lock_lost Gauge ??? mysql_performance_schema_mutex_classes_lost Gauge ??? mysql_performance_schema_mutex_instances_lost Gauge ??? mysql_performance_schema_nested_statement_lost Gauge ??? mysql_performance_schema_prepared_statements_lost Gauge ??? mysql_performance_schema_program_lost Gauge ??? mysql_performance_schema_rwlock_classes_lost Gauge ??? mysql_performance_schema_rwlock_instances_lost Gauge ??? mysql_performance_schema_session_connect_attrs_longest_seen Gauge ??? mysql_performance_schema_session_connect_attrs_lost Gauge ??? mysql_performance_schema_socket_classes_lost Gauge ??? mysql_performance_schema_socket_instances_lost Gauge ??? mysql_performance_schema_stage_classes_lost Gauge ??? mysql_performance_schema_statement_classes_lost Gauge ??? mysql_performance_schema_table_handles_lost Gauge ??? mysql_performance_schema_table_instances_lost Gauge ??? mysql_performance_schema_table_lock_stat_lost Gauge ??? mysql_performance_schema_thread_classes_lost Gauge ??? mysql_performance_schema_thread_instances_lost Gauge ??? mysql_performance_schema_users_lost Gauge ??? mysql_prepared_stmt_count Gauge ??? mysql_queries Gauge ??? mysql_questions Gauge ??? mysql_replica_open_temp_tables Gauge ??? mysql_secondary_engine_execution_count Gauge ??? mysql_select_full_join Gauge ??? mysql_select_full_range_join Gauge ??? mysql_select_range Gauge ??? mysql_select_range_check Gauge ??? mysql_select_scan Gauge ??? mysql_slave_open_temp_tables Gauge ??? mysql_slow_launch_threads Gauge ??? mysql_slow_queries Gauge ??? mysql_sort_merge_passes Gauge ??? mysql_sort_range Gauge ??? mysql_sort_rows Gauge ??? mysql_sort_scan Gauge ??? mysql_ssl_accept_renegotiates Gauge ??? mysql_ssl_accepts Gauge ??? mysql_ssl_callback_cache_hits Gauge ??? mysql_ssl_client_connects Gauge ??? mysql_ssl_connect_renegotiates Gauge ??? mysql_ssl_ctx_verify_depth Gauge ??? mysql_ssl_ctx_verify_mode Gauge ??? mysql_ssl_default_timeout Gauge ??? mysql_ssl_finished_accepts Gauge ??? mysql_ssl_finished_connects Gauge ??? mysql_ssl_session_cache_hits Gauge ??? mysql_ssl_session_cache_misses Gauge ??? mysql_ssl_session_cache_overflows Gauge ??? mysql_ssl_session_cache_size Gauge ??? mysql_ssl_session_cache_timeout Gauge ??? mysql_ssl_session_cache_timeouts Gauge ??? mysql_ssl_sessions_reused Gauge ??? mysql_ssl_used_session_cache_entries Gauge ??? mysql_ssl_verify_depth Gauge ??? mysql_ssl_verify_mode Gauge ??? mysql_table_locks_immediate Gauge ??? mysql_table_locks_waited Gauge ??? mysql_table_open_cache_hits Gauge ??? mysql_table_open_cache_misses Gauge ??? mysql_table_open_cache_overflows Gauge ??? mysql_tc_log_max_pages_used Gauge ??? mysql_tc_log_page_size Gauge ??? mysql_tc_log_page_waits Gauge ??? mysql_threads_cached Gauge ??? mysql_threads_connected Gauge ??? mysql_threads_created Gauge ??? mysql_threads_running Gauge ??? mysql_uptime Gauge ??? mysql_uptime_since_flush_status Gauge ??? Labels \u00b6 mysql collector do not appends labels Label Description Sample Output \u00b6 OpenMetrics","title":"mysql"},{"location":"collectors/mysql/#mysql-collector","text":"mysql collects MySQL instance statistics The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be mysql interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection username String Username to connect database password String Password to connect database Config example: - id : mysql disabled : false type : mysql host : 127.0.0.1 username : root password : secret","title":"mysql collector"},{"location":"collectors/mysql/#collected-metrics","text":"OpenMetrics Metric Metric Type Description mysql_aborted_clients Gauge ??? mysql_aborted_connects Gauge ??? mysql_acl_cache_items_count Gauge ??? mysql_binlog_cache_disk_use Gauge ??? mysql_binlog_cache_use Gauge ??? mysql_binlog_stmt_cache_disk_use Gauge ??? mysql_binlog_stmt_cache_use Gauge ??? mysql_bytes_received Gauge ??? mysql_bytes_sent Gauge ??? mysql_com_admin_commands Gauge ??? mysql_com_alter_db Gauge ??? mysql_com_alter_event Gauge ??? mysql_com_alter_function Gauge ??? mysql_com_alter_instance Gauge ??? mysql_com_alter_procedure Gauge ??? mysql_com_alter_resource_group Gauge ??? mysql_com_alter_server Gauge ??? mysql_com_alter_table Gauge ??? mysql_com_alter_tablespace Gauge ??? mysql_com_alter_user Gauge ??? mysql_com_alter_user_default_role Gauge ??? mysql_com_analyze Gauge ??? mysql_com_assign_to_keycache Gauge ??? mysql_com_begin Gauge ??? mysql_com_binlog Gauge ??? mysql_com_call_procedure Gauge ??? mysql_com_change_db Gauge ??? mysql_com_change_master Gauge ??? mysql_com_change_repl_filter Gauge ??? mysql_com_change_replication_source Gauge ??? mysql_com_check Gauge ??? mysql_com_checksum Gauge ??? mysql_com_clone Gauge ??? mysql_com_commit Gauge ??? mysql_com_create_db Gauge ??? mysql_com_create_event Gauge ??? mysql_com_create_function Gauge ??? mysql_com_create_index Gauge ??? mysql_com_create_procedure Gauge ??? mysql_com_create_resource_group Gauge ??? mysql_com_create_role Gauge ??? mysql_com_create_server Gauge ??? mysql_com_create_spatial_reference_system Gauge ??? mysql_com_create_table Gauge ??? mysql_com_create_trigger Gauge ??? mysql_com_create_udf Gauge ??? mysql_com_create_user Gauge ??? mysql_com_create_view Gauge ??? mysql_com_dealloc_sql Gauge ??? mysql_com_delete Gauge ??? mysql_com_delete_multi Gauge ??? mysql_com_do Gauge ??? mysql_com_drop_db Gauge ??? mysql_com_drop_event Gauge ??? mysql_com_drop_function Gauge ??? mysql_com_drop_index Gauge ??? mysql_com_drop_procedure Gauge ??? mysql_com_drop_resource_group Gauge ??? mysql_com_drop_role Gauge ??? mysql_com_drop_server Gauge ??? mysql_com_drop_spatial_reference_system Gauge ??? mysql_com_drop_table Gauge ??? mysql_com_drop_trigger Gauge ??? mysql_com_drop_user Gauge ??? mysql_com_drop_view Gauge ??? mysql_com_empty_query Gauge ??? mysql_com_execute_sql Gauge ??? mysql_com_explain_other Gauge ??? mysql_com_flush Gauge ??? mysql_com_get_diagnostics Gauge ??? mysql_com_grant Gauge ??? mysql_com_grant_roles Gauge ??? mysql_com_group_replication_start Gauge ??? mysql_com_group_replication_stop Gauge ??? mysql_com_ha_close Gauge ??? mysql_com_ha_open Gauge ??? mysql_com_ha_read Gauge ??? mysql_com_help Gauge ??? mysql_com_import Gauge ??? mysql_com_insert Gauge ??? mysql_com_insert_select Gauge ??? mysql_com_install_component Gauge ??? mysql_com_install_plugin Gauge ??? mysql_com_kill Gauge ??? mysql_com_load Gauge ??? mysql_com_lock_instance Gauge ??? mysql_com_lock_tables Gauge ??? mysql_com_optimize Gauge ??? mysql_com_preload_keys Gauge ??? mysql_com_prepare_sql Gauge ??? mysql_com_purge Gauge ??? mysql_com_purge_before_date Gauge ??? mysql_com_release_savepoint Gauge ??? mysql_com_rename_table Gauge ??? mysql_com_rename_user Gauge ??? mysql_com_repair Gauge ??? mysql_com_replace Gauge ??? mysql_com_replace_select Gauge ??? mysql_com_replica_start Gauge ??? mysql_com_replica_stop Gauge ??? mysql_com_reset Gauge ??? mysql_com_resignal Gauge ??? mysql_com_restart Gauge ??? mysql_com_revoke Gauge ??? mysql_com_revoke_all Gauge ??? mysql_com_revoke_roles Gauge ??? mysql_com_rollback Gauge ??? mysql_com_rollback_to_savepoint Gauge ??? mysql_com_savepoint Gauge ??? mysql_com_select Gauge ??? mysql_com_set_option Gauge ??? mysql_com_set_password Gauge ??? mysql_com_set_resource_group Gauge ??? mysql_com_set_role Gauge ??? mysql_com_show_binlog_events Gauge ??? mysql_com_show_binlogs Gauge ??? mysql_com_show_charsets Gauge ??? mysql_com_show_collations Gauge ??? mysql_com_show_create_db Gauge ??? mysql_com_show_create_event Gauge ??? mysql_com_show_create_func Gauge ??? mysql_com_show_create_proc Gauge ??? mysql_com_show_create_table Gauge ??? mysql_com_show_create_trigger Gauge ??? mysql_com_show_create_user Gauge ??? mysql_com_show_databases Gauge ??? mysql_com_show_engine_logs Gauge ??? mysql_com_show_engine_mutex Gauge ??? mysql_com_show_engine_status Gauge ??? mysql_com_show_errors Gauge ??? mysql_com_show_events Gauge ??? mysql_com_show_fields Gauge ??? mysql_com_show_function_code Gauge ??? mysql_com_show_function_status Gauge ??? mysql_com_show_grants Gauge ??? mysql_com_show_keys Gauge ??? mysql_com_show_master_status Gauge ??? mysql_com_show_open_tables Gauge ??? mysql_com_show_plugins Gauge ??? mysql_com_show_privileges Gauge ??? mysql_com_show_procedure_code Gauge ??? mysql_com_show_procedure_status Gauge ??? mysql_com_show_processlist Gauge ??? mysql_com_show_profile Gauge ??? mysql_com_show_profiles Gauge ??? mysql_com_show_relaylog_events Gauge ??? mysql_com_show_replica_status Gauge ??? mysql_com_show_replicas Gauge ??? mysql_com_show_slave_hosts Gauge ??? mysql_com_show_slave_status Gauge ??? mysql_com_show_status Gauge ??? mysql_com_show_storage_engines Gauge ??? mysql_com_show_table_status Gauge ??? mysql_com_show_tables Gauge ??? mysql_com_show_triggers Gauge ??? mysql_com_show_variables Gauge ??? mysql_com_show_warnings Gauge ??? mysql_com_shutdown Gauge ??? mysql_com_signal Gauge ??? mysql_com_slave_start Gauge ??? mysql_com_slave_stop Gauge ??? mysql_com_stmt_close Gauge ??? mysql_com_stmt_execute Gauge ??? mysql_com_stmt_fetch Gauge ??? mysql_com_stmt_prepare Gauge ??? mysql_com_stmt_reprepare Gauge ??? mysql_com_stmt_reset Gauge ??? mysql_com_stmt_send_long_data Gauge ??? mysql_com_truncate Gauge ??? mysql_com_uninstall_component Gauge ??? mysql_com_uninstall_plugin Gauge ??? mysql_com_unlock_instance Gauge ??? mysql_com_unlock_tables Gauge ??? mysql_com_update Gauge ??? mysql_com_update_multi Gauge ??? mysql_com_xa_commit Gauge ??? mysql_com_xa_end Gauge ??? mysql_com_xa_prepare Gauge ??? mysql_com_xa_recover Gauge ??? mysql_com_xa_rollback Gauge ??? mysql_com_xa_start Gauge ??? mysql_connection_errors_accept Gauge ??? mysql_connection_errors_internal Gauge ??? mysql_connection_errors_max_connections Gauge ??? mysql_connection_errors_peer_address Gauge ??? mysql_connection_errors_select Gauge ??? mysql_connection_errors_tcpwrap Gauge ??? mysql_connections Gauge ??? mysql_created_tmp_disk_tables Gauge ??? mysql_created_tmp_files Gauge ??? mysql_created_tmp_tables Gauge ??? mysql_delayed_errors Gauge ??? mysql_delayed_insert_threads Gauge ??? mysql_delayed_writes Gauge ??? mysql_error_log_buffered_bytes Gauge ??? mysql_error_log_buffered_events Gauge ??? mysql_error_log_expired_events Gauge ??? mysql_error_log_latest_write Gauge ??? mysql_flush_commands Gauge ??? mysql_global_connection_memory Gauge ??? mysql_handler_commit Gauge ??? mysql_handler_delete Gauge ??? mysql_handler_discover Gauge ??? mysql_handler_external_lock Gauge ??? mysql_handler_mrr_init Gauge ??? mysql_handler_prepare Gauge ??? mysql_handler_read_first Gauge ??? mysql_handler_read_key Gauge ??? mysql_handler_read_last Gauge ??? mysql_handler_read_next Gauge ??? mysql_handler_read_prev Gauge ??? mysql_handler_read_rnd Gauge ??? mysql_handler_read_rnd_next Gauge ??? mysql_handler_rollback Gauge ??? mysql_handler_savepoint Gauge ??? mysql_handler_savepoint_rollback Gauge ??? mysql_handler_update Gauge ??? mysql_handler_write Gauge ??? mysql_innodb_buffer_pool_bytes_data Gauge ??? mysql_innodb_buffer_pool_bytes_dirty Gauge ??? mysql_innodb_buffer_pool_pages_data Gauge ??? mysql_innodb_buffer_pool_pages_dirty Gauge ??? mysql_innodb_buffer_pool_pages_flushed Gauge ??? mysql_innodb_buffer_pool_pages_free Gauge ??? mysql_innodb_buffer_pool_pages_misc Gauge ??? mysql_innodb_buffer_pool_pages_total Gauge ??? mysql_innodb_buffer_pool_read_ahead Gauge ??? mysql_innodb_buffer_pool_read_ahead_evicted Gauge ??? mysql_innodb_buffer_pool_read_ahead_rnd Gauge ??? mysql_innodb_buffer_pool_read_requests Gauge ??? mysql_innodb_buffer_pool_reads Gauge ??? mysql_innodb_buffer_pool_resize_status_code Gauge ??? mysql_innodb_buffer_pool_resize_status_progress Gauge ??? mysql_innodb_buffer_pool_wait_free Gauge ??? mysql_innodb_buffer_pool_write_requests Gauge ??? mysql_innodb_data_fsyncs Gauge ??? mysql_innodb_data_pending_fsyncs Gauge ??? mysql_innodb_data_pending_reads Gauge ??? mysql_innodb_data_pending_writes Gauge ??? mysql_innodb_data_read Gauge ??? mysql_innodb_data_reads Gauge ??? mysql_innodb_data_writes Gauge ??? mysql_innodb_data_written Gauge ??? mysql_innodb_dblwr_pages_written Gauge ??? mysql_innodb_dblwr_writes Gauge ??? mysql_innodb_log_waits Gauge ??? mysql_innodb_log_write_requests Gauge ??? mysql_innodb_log_writes Gauge ??? mysql_innodb_num_open_files Gauge ??? mysql_innodb_os_log_fsyncs Gauge ??? mysql_innodb_os_log_pending_fsyncs Gauge ??? mysql_innodb_os_log_pending_writes Gauge ??? mysql_innodb_os_log_written Gauge ??? mysql_innodb_page_size Gauge ??? mysql_innodb_pages_created Gauge ??? mysql_innodb_pages_read Gauge ??? mysql_innodb_pages_written Gauge ??? mysql_innodb_redo_log_capacity_resized Gauge ??? mysql_innodb_redo_log_checkpoint_lsn Gauge ??? mysql_innodb_redo_log_current_lsn Gauge ??? mysql_innodb_redo_log_flushed_to_disk_lsn Gauge ??? mysql_innodb_redo_log_logical_size Gauge ??? mysql_innodb_redo_log_physical_size Gauge ??? mysql_innodb_redo_log_uuid Gauge ??? mysql_innodb_row_lock_current_waits Gauge ??? mysql_innodb_row_lock_time Gauge ??? mysql_innodb_row_lock_time_avg Gauge ??? mysql_innodb_row_lock_time_max Gauge ??? mysql_innodb_row_lock_waits Gauge ??? mysql_innodb_rows_deleted Gauge ??? mysql_innodb_rows_inserted Gauge ??? mysql_innodb_rows_read Gauge ??? mysql_innodb_rows_updated Gauge ??? mysql_innodb_sampled_pages_read Gauge ??? mysql_innodb_sampled_pages_skipped Gauge ??? mysql_innodb_system_rows_deleted Gauge ??? mysql_innodb_system_rows_inserted Gauge ??? mysql_innodb_system_rows_read Gauge ??? mysql_innodb_system_rows_updated Gauge ??? mysql_innodb_truncated_status_writes Gauge ??? mysql_innodb_undo_tablespaces_active Gauge ??? mysql_innodb_undo_tablespaces_explicit Gauge ??? mysql_innodb_undo_tablespaces_implicit Gauge ??? mysql_innodb_undo_tablespaces_total Gauge ??? mysql_key_blocks_not_flushed Gauge ??? mysql_key_blocks_unused Gauge ??? mysql_key_blocks_used Gauge ??? mysql_key_read_requests Gauge ??? mysql_key_reads Gauge ??? mysql_key_write_requests Gauge ??? mysql_key_writes Gauge ??? mysql_locked_connects Gauge ??? mysql_max_execution_time_exceeded Gauge ??? mysql_max_execution_time_set Gauge ??? mysql_max_execution_time_set_failed Gauge ??? mysql_max_used_connections Gauge ??? mysql_mysqlx_aborted_clients Gauge ??? mysql_mysqlx_bytes_received Gauge ??? mysql_mysqlx_bytes_received_compressed_payload Gauge ??? mysql_mysqlx_bytes_received_uncompressed_frame Gauge ??? mysql_mysqlx_bytes_sent Gauge ??? mysql_mysqlx_bytes_sent_compressed_payload Gauge ??? mysql_mysqlx_bytes_sent_uncompressed_frame Gauge ??? mysql_mysqlx_connection_accept_errors Gauge ??? mysql_mysqlx_connection_errors Gauge ??? mysql_mysqlx_connections_accepted Gauge ??? mysql_mysqlx_connections_closed Gauge ??? mysql_mysqlx_connections_rejected Gauge ??? mysql_mysqlx_crud_create_view Gauge ??? mysql_mysqlx_crud_delete Gauge ??? mysql_mysqlx_crud_drop_view Gauge ??? mysql_mysqlx_crud_find Gauge ??? mysql_mysqlx_crud_insert Gauge ??? mysql_mysqlx_crud_modify_view Gauge ??? mysql_mysqlx_crud_update Gauge ??? mysql_mysqlx_cursor_close Gauge ??? mysql_mysqlx_cursor_fetch Gauge ??? mysql_mysqlx_cursor_open Gauge ??? mysql_mysqlx_errors_sent Gauge ??? mysql_mysqlx_errors_unknown_message_type Gauge ??? mysql_mysqlx_expect_close Gauge ??? mysql_mysqlx_expect_open Gauge ??? mysql_mysqlx_init_error Gauge ??? mysql_mysqlx_messages_sent Gauge ??? mysql_mysqlx_notice_global_sent Gauge ??? mysql_mysqlx_notice_other_sent Gauge ??? mysql_mysqlx_notice_warning_sent Gauge ??? mysql_mysqlx_notified_by_group_replication Gauge ??? mysql_mysqlx_port Gauge ??? mysql_mysqlx_prep_deallocate Gauge ??? mysql_mysqlx_prep_execute Gauge ??? mysql_mysqlx_prep_prepare Gauge ??? mysql_mysqlx_rows_sent Gauge ??? mysql_mysqlx_sessions Gauge ??? mysql_mysqlx_sessions_accepted Gauge ??? mysql_mysqlx_sessions_closed Gauge ??? mysql_mysqlx_sessions_fatal_error Gauge ??? mysql_mysqlx_sessions_killed Gauge ??? mysql_mysqlx_sessions_rejected Gauge ??? mysql_mysqlx_ssl_accepts Gauge ??? mysql_mysqlx_ssl_ctx_verify_depth Gauge ??? mysql_mysqlx_ssl_ctx_verify_mode Gauge ??? mysql_mysqlx_ssl_finished_accepts Gauge ??? mysql_mysqlx_stmt_create_collection Gauge ??? mysql_mysqlx_stmt_create_collection_index Gauge ??? mysql_mysqlx_stmt_disable_notices Gauge ??? mysql_mysqlx_stmt_drop_collection Gauge ??? mysql_mysqlx_stmt_drop_collection_index Gauge ??? mysql_mysqlx_stmt_enable_notices Gauge ??? mysql_mysqlx_stmt_ensure_collection Gauge ??? mysql_mysqlx_stmt_execute_mysqlx Gauge ??? mysql_mysqlx_stmt_execute_sql Gauge ??? mysql_mysqlx_stmt_execute_xplugin Gauge ??? mysql_mysqlx_stmt_get_collection_options Gauge ??? mysql_mysqlx_stmt_kill_client Gauge ??? mysql_mysqlx_stmt_list_clients Gauge ??? mysql_mysqlx_stmt_list_notices Gauge ??? mysql_mysqlx_stmt_list_objects Gauge ??? mysql_mysqlx_stmt_modify_collection_options Gauge ??? mysql_mysqlx_stmt_ping Gauge ??? mysql_mysqlx_worker_threads Gauge ??? mysql_mysqlx_worker_threads_active Gauge ??? mysql_not_flushed_delayed_rows Gauge ??? mysql_ongoing_anonymous_transaction_count Gauge ??? mysql_open_files Gauge ??? mysql_open_streams Gauge ??? mysql_open_table_definitions Gauge ??? mysql_open_tables Gauge ??? mysql_opened_files Gauge ??? mysql_opened_table_definitions Gauge ??? mysql_opened_tables Gauge ??? mysql_performance_schema_accounts_lost Gauge ??? mysql_performance_schema_cond_classes_lost Gauge ??? mysql_performance_schema_cond_instances_lost Gauge ??? mysql_performance_schema_digest_lost Gauge ??? mysql_performance_schema_file_classes_lost Gauge ??? mysql_performance_schema_file_handles_lost Gauge ??? mysql_performance_schema_file_instances_lost Gauge ??? mysql_performance_schema_hosts_lost Gauge ??? mysql_performance_schema_index_stat_lost Gauge ??? mysql_performance_schema_locker_lost Gauge ??? mysql_performance_schema_memory_classes_lost Gauge ??? mysql_performance_schema_metadata_lock_lost Gauge ??? mysql_performance_schema_mutex_classes_lost Gauge ??? mysql_performance_schema_mutex_instances_lost Gauge ??? mysql_performance_schema_nested_statement_lost Gauge ??? mysql_performance_schema_prepared_statements_lost Gauge ??? mysql_performance_schema_program_lost Gauge ??? mysql_performance_schema_rwlock_classes_lost Gauge ??? mysql_performance_schema_rwlock_instances_lost Gauge ??? mysql_performance_schema_session_connect_attrs_longest_seen Gauge ??? mysql_performance_schema_session_connect_attrs_lost Gauge ??? mysql_performance_schema_socket_classes_lost Gauge ??? mysql_performance_schema_socket_instances_lost Gauge ??? mysql_performance_schema_stage_classes_lost Gauge ??? mysql_performance_schema_statement_classes_lost Gauge ??? mysql_performance_schema_table_handles_lost Gauge ??? mysql_performance_schema_table_instances_lost Gauge ??? mysql_performance_schema_table_lock_stat_lost Gauge ??? mysql_performance_schema_thread_classes_lost Gauge ??? mysql_performance_schema_thread_instances_lost Gauge ??? mysql_performance_schema_users_lost Gauge ??? mysql_prepared_stmt_count Gauge ??? mysql_queries Gauge ??? mysql_questions Gauge ??? mysql_replica_open_temp_tables Gauge ??? mysql_secondary_engine_execution_count Gauge ??? mysql_select_full_join Gauge ??? mysql_select_full_range_join Gauge ??? mysql_select_range Gauge ??? mysql_select_range_check Gauge ??? mysql_select_scan Gauge ??? mysql_slave_open_temp_tables Gauge ??? mysql_slow_launch_threads Gauge ??? mysql_slow_queries Gauge ??? mysql_sort_merge_passes Gauge ??? mysql_sort_range Gauge ??? mysql_sort_rows Gauge ??? mysql_sort_scan Gauge ??? mysql_ssl_accept_renegotiates Gauge ??? mysql_ssl_accepts Gauge ??? mysql_ssl_callback_cache_hits Gauge ??? mysql_ssl_client_connects Gauge ??? mysql_ssl_connect_renegotiates Gauge ??? mysql_ssl_ctx_verify_depth Gauge ??? mysql_ssl_ctx_verify_mode Gauge ??? mysql_ssl_default_timeout Gauge ??? mysql_ssl_finished_accepts Gauge ??? mysql_ssl_finished_connects Gauge ??? mysql_ssl_session_cache_hits Gauge ??? mysql_ssl_session_cache_misses Gauge ??? mysql_ssl_session_cache_overflows Gauge ??? mysql_ssl_session_cache_size Gauge ??? mysql_ssl_session_cache_timeout Gauge ??? mysql_ssl_session_cache_timeouts Gauge ??? mysql_ssl_sessions_reused Gauge ??? mysql_ssl_used_session_cache_entries Gauge ??? mysql_ssl_verify_depth Gauge ??? mysql_ssl_verify_mode Gauge ??? mysql_table_locks_immediate Gauge ??? mysql_table_locks_waited Gauge ??? mysql_table_open_cache_hits Gauge ??? mysql_table_open_cache_misses Gauge ??? mysql_table_open_cache_overflows Gauge ??? mysql_tc_log_max_pages_used Gauge ??? mysql_tc_log_page_size Gauge ??? mysql_tc_log_page_waits Gauge ??? mysql_threads_cached Gauge ??? mysql_threads_connected Gauge ??? mysql_threads_created Gauge ??? mysql_threads_running Gauge ??? mysql_uptime Gauge ??? mysql_uptime_since_flush_status Gauge ???","title":"Collected Metrics"},{"location":"collectors/mysql/#labels","text":"mysql collector do not appends labels Label Description","title":"Labels"},{"location":"collectors/mysql/#sample-output","text":"OpenMetrics","title":"Sample Output"},{"location":"collectors/mysql_query/","text":"mysql collector \u00b6 mysql_query performs queries over MySQL database and exposes results as a metrics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be mysql_query interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection database String Database name username String Username to connect database password String Password to connect database items Array List of query configurations query String SQL query name String Metric name. Overriden by name_column . name_column String Column with metric name. Overrides name configuration. help String Metric help. Overriden by help_column . help_column String Optional column with metric help. Overrides help connfiguration. value_column String value Column with metric value labels Object Additional item-level labels. labels_columns Array List of column names which to be exposed as labels. Label name matches with column name. Config example: - id : Query type : mysql_query host : mysql username : mysql password : secret database : metrics items : # name, value, and help from table - query : SELECT name, value, help FROM metrics help_column : help # Static name, help, and labels - query : SELECT 42 as value name : meaning_of_life help : The most important question labels : region : galaxy transport : autostop # Static name. Labels and value are from query - query : SELECT dept, region, SUM(value) AS value FROM expenses GROUP BY 1, 2 name : expenses help : Expenses by department and the region label_columns : [ dept , region ] Collected Metrics \u00b6 mysql_query doesn't impose the specific format of the metrics. The generated metrics are fully configurable. Labels \u00b6 Metric labels depend on configures queries. Database Table Requirements \u00b6 Metric name field must be of text type: CHAR, VARCHAR, TEXT. Value field must must be of type: SMALLINT, INT, BIGINT, FLOAT, DOUBLE, DECIMAL. Help field is optional and must be any text type: CHAR, VARCHAR, TEXT. Example \u00b6 Create metrics table or view with the following structure: CREATE TABLE metrics ( name VARCHAR ( 256 ), help VARCHAR ( 256 ), value INTEGER ); Populate with data: INSERT INTO metrics ( name , help , value ) VALUES ( 'myapp_read' , 'Total reads' , 12 ), ( 'myapp_write' , 'Total writes' , 28 ), ( 'myapp_delete' , 'Total deletes' , 1 ); Sample Output \u00b6 OpenMetrics","title":"mysql_query"},{"location":"collectors/mysql_query/#mysql-collector","text":"mysql_query performs queries over MySQL database and exposes results as a metrics.","title":"mysql collector"},{"location":"collectors/mysql_query/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be mysql_query interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection database String Database name username String Username to connect database password String Password to connect database items Array List of query configurations query String SQL query name String Metric name. Overriden by name_column . name_column String Column with metric name. Overrides name configuration. help String Metric help. Overriden by help_column . help_column String Optional column with metric help. Overrides help connfiguration. value_column String value Column with metric value labels Object Additional item-level labels. labels_columns Array List of column names which to be exposed as labels. Label name matches with column name. Config example: - id : Query type : mysql_query host : mysql username : mysql password : secret database : metrics items : # name, value, and help from table - query : SELECT name, value, help FROM metrics help_column : help # Static name, help, and labels - query : SELECT 42 as value name : meaning_of_life help : The most important question labels : region : galaxy transport : autostop # Static name. Labels and value are from query - query : SELECT dept, region, SUM(value) AS value FROM expenses GROUP BY 1, 2 name : expenses help : Expenses by department and the region label_columns : [ dept , region ]","title":"Configuration"},{"location":"collectors/mysql_query/#collected-metrics","text":"mysql_query doesn't impose the specific format of the metrics. The generated metrics are fully configurable.","title":"Collected Metrics"},{"location":"collectors/mysql_query/#labels","text":"Metric labels depend on configures queries.","title":"Labels"},{"location":"collectors/mysql_query/#database-table-requirements","text":"Metric name field must be of text type: CHAR, VARCHAR, TEXT. Value field must must be of type: SMALLINT, INT, BIGINT, FLOAT, DOUBLE, DECIMAL. Help field is optional and must be any text type: CHAR, VARCHAR, TEXT.","title":"Database Table Requirements"},{"location":"collectors/mysql_query/#example","text":"Create metrics table or view with the following structure: CREATE TABLE metrics ( name VARCHAR ( 256 ), help VARCHAR ( 256 ), value INTEGER ); Populate with data: INSERT INTO metrics ( name , help , value ) VALUES ( 'myapp_read' , 'Total reads' , 12 ), ( 'myapp_write' , 'Total writes' , 28 ), ( 'myapp_delete' , 'Total deletes' , 1 );","title":"Example"},{"location":"collectors/mysql_query/#sample-output","text":"OpenMetrics","title":"Sample Output"},{"location":"collectors/network/","text":"network collector \u00b6 network collects host's network interface statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be network interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : CPU type : network Collected Metrics \u00b6 OpenMetrics Metric Metric Type Labels Description net_rx_octets Counter iface Total number of octets received net_tx_octets Counter iface Total number of octets sent net_rx_packets Counter iface Total number of packets received\" net_tx_packets Counter iface Total number of packets sent net_rx_errors Counter iface Total number of receive errors net_tx_errors Counter iface Total number of transmit errors Labels \u00b6 network collector appends the following labels Label Description iface Interface name Config Discovery \u00b6 network collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -network Sample Output \u00b6 OpenMetrics network_rx_packets{iface=\"virbr0\"} 0 1682413634 network_rx_packets{iface=\"wlo1\"} 4817460 1682413634 # HELP network_tx_errors Total number of transmit errors # TYPE network_tx_errors counter network_tx_errors{iface=\"virbr0\"} 0 1682413634 network_tx_errors{iface=\"wlo1\"} 0 1682413634 # HELP network_tx_octets Total number of octets sent # TYPE network_tx_octets counter network_tx_octets{iface=\"virbr0\"} 0 1682413634 network_tx_octets{iface=\"wlo1\"} 510399868 1682413634 # HELP network_tx_packets Total number of packets sent # TYPE network_tx_packets counter network_tx_packets{iface=\"virbr0\"} 0 1682413634 network_tx_packets{iface=\"wlo1\"} 2376071 1682413634","title":"network"},{"location":"collectors/network/#network-collector","text":"network collects host's network interface statistics.","title":"network collector"},{"location":"collectors/network/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be network interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : CPU type : network","title":"Configuration"},{"location":"collectors/network/#collected-metrics","text":"OpenMetrics Metric Metric Type Labels Description net_rx_octets Counter iface Total number of octets received net_tx_octets Counter iface Total number of octets sent net_rx_packets Counter iface Total number of packets received\" net_tx_packets Counter iface Total number of packets sent net_rx_errors Counter iface Total number of receive errors net_tx_errors Counter iface Total number of transmit errors","title":"Collected Metrics"},{"location":"collectors/network/#labels","text":"network collector appends the following labels Label Description iface Interface name","title":"Labels"},{"location":"collectors/network/#config-discovery","text":"network collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -network","title":"Config Discovery"},{"location":"collectors/network/#sample-output","text":"OpenMetrics network_rx_packets{iface=\"virbr0\"} 0 1682413634 network_rx_packets{iface=\"wlo1\"} 4817460 1682413634 # HELP network_tx_errors Total number of transmit errors # TYPE network_tx_errors counter network_tx_errors{iface=\"virbr0\"} 0 1682413634 network_tx_errors{iface=\"wlo1\"} 0 1682413634 # HELP network_tx_octets Total number of octets sent # TYPE network_tx_octets counter network_tx_octets{iface=\"virbr0\"} 0 1682413634 network_tx_octets{iface=\"wlo1\"} 510399868 1682413634 # HELP network_tx_packets Total number of packets sent # TYPE network_tx_packets counter network_tx_packets{iface=\"virbr0\"} 0 1682413634 network_tx_packets{iface=\"wlo1\"} 2376071 1682413634","title":"Sample Output"},{"location":"collectors/pgbouncer/","text":"pgbouncer collector \u00b6 pgbouncer collects PgBouncer statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be pgbouncer interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection socket String Unix socket path username String Username to connect database password String Password to connect database database String pgbouncer The name of pgbouncer internal database Config example: - id : Pgbouncer type : pgbouncer host : 127.0.0.1 username : postgres password : secret Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description pgb_total_xact_count Total number of SQL transactions pooled by pgbouncer pgb_total_query_count Total number of SQL queries pooled by pgbouncer pgb_total_received Total volume in bytes of network traffic received by pgbouncer pgb_total_sent Total volume in bytes of network traffic sent by pgbouncer pgb_total_xact_time Total number of seconds spent by pgbouncer when connected to PostgreSQL in a transaction, either idle in transaction or executing queries pgb_total_query_time Total number of seconds spent by pgbouncer when actively connected to PostgreSQL, executing queries pgb_total_wait_time Time spent by clients waiting for a server, in seconds ); Labels \u00b6 pgbouncer collector appends the following labels Label Description db Database name PgBouncer Setup \u00b6 Ensure your pgbouncer.ini has the following sections: stats_users=<username> ignore_startup_parameters=extra_float_digits Where the <username> must match to the collector's configured username . Sample Output \u00b6 OpenMetrics","title":"pgbouncer"},{"location":"collectors/pgbouncer/#pgbouncer-collector","text":"pgbouncer collects PgBouncer statistics.","title":"pgbouncer collector"},{"location":"collectors/pgbouncer/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be pgbouncer interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection socket String Unix socket path username String Username to connect database password String Password to connect database database String pgbouncer The name of pgbouncer internal database Config example: - id : Pgbouncer type : pgbouncer host : 127.0.0.1 username : postgres password : secret","title":"Configuration"},{"location":"collectors/pgbouncer/#collected-metrics","text":"OpenMetrics Metric Metric Type Description pgb_total_xact_count Total number of SQL transactions pooled by pgbouncer pgb_total_query_count Total number of SQL queries pooled by pgbouncer pgb_total_received Total volume in bytes of network traffic received by pgbouncer pgb_total_sent Total volume in bytes of network traffic sent by pgbouncer pgb_total_xact_time Total number of seconds spent by pgbouncer when connected to PostgreSQL in a transaction, either idle in transaction or executing queries pgb_total_query_time Total number of seconds spent by pgbouncer when actively connected to PostgreSQL, executing queries pgb_total_wait_time Time spent by clients waiting for a server, in seconds );","title":"Collected Metrics"},{"location":"collectors/pgbouncer/#labels","text":"pgbouncer collector appends the following labels Label Description db Database name","title":"Labels"},{"location":"collectors/pgbouncer/#pgbouncer-setup","text":"Ensure your pgbouncer.ini has the following sections: stats_users=<username> ignore_startup_parameters=extra_float_digits Where the <username> must match to the collector's configured username .","title":"PgBouncer Setup"},{"location":"collectors/pgbouncer/#sample-output","text":"OpenMetrics","title":"Sample Output"},{"location":"collectors/postgres/","text":"postgres collector \u00b6 postgres collects PostgreSQL instance statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be postgres interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection socket String Unix socket path username String Username to connect database password String Password to connect database exclude_databases Array [postgres, template0, template1] Exclude databases from output only_databases Array Restrict output only to given databases. Overrides exclude_databases Config example: - id : Postgres disabled : false type : postgres host : 127.0.0.1 username : postgres Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description pg_numbackends Gauge Number of backends currently connected to this database. pg_xact_commit Counter Number of transactions in this database that have been committed. pg_xact_rollback Counter Number of transactions in this database that have been rolled back. pg_blks_read Counter Number of disk blocks read in this database. pg_blks_hit Counter Number of times disk blocks were found already in the buffer cache, so that a read was not necessary pg_tup_returned Counter Number of live rows fetched by sequential scans and index entries returned by index scans in this database. pg_tup_fetched Counter Number of live rows fetched by index scans in this database. pg_tup_inserted Counter Number of rows inserted by queries in this database. pg_tup_updated Counter Number of rows updated by queries in this database. pg_tup_deleted Counter Number of rows deleted by queries in this database. pg_conflicts Counter Number of queries canceled due to conflicts with recovery in this database pg_temp_files Counter Number of temporary files created by queries in this database pg_temp_bytes Counter Total amount of data written to temporary files by queries in this database pg_deadlocks Counter Number of deadlocks detected in this database. pg_checksum_failures Counter Number of data page checksum failures detected in this database pg_blk_read_time Counter Time spent reading data file blocks by backends in this database, in seconds pg_blk_write_time Counter Time spent writing data file blocks by backends in this database, in seconds pg_session_time Counter Time spent by database sessions in this database, in seconds pg_active_time Counter Time spent executing SQL statements in this database, in seconds pg_idle_in_transaction_time Counter Time spent idling while in a transaction in this database, in seconds pg_sessions Counter Total number of sessions established to this database. pg_sessions_abandoned Counter Number of database sessions to this database that were terminated because connection to the client was lost. pg_sessions_fatal Counter Number of database sessions to this database that were terminated by fatal errors. pg_sessions_killed Counter Number of database sessions to this database that were terminated by operator intervention. Labels \u00b6 postgres collector appends the following labels Label Description db Database name Sample Output \u00b6 OpenMetrics","title":"postgres"},{"location":"collectors/postgres/#postgres-collector","text":"postgres collects PostgreSQL instance statistics.","title":"postgres collector"},{"location":"collectors/postgres/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be postgres interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection socket String Unix socket path username String Username to connect database password String Password to connect database exclude_databases Array [postgres, template0, template1] Exclude databases from output only_databases Array Restrict output only to given databases. Overrides exclude_databases Config example: - id : Postgres disabled : false type : postgres host : 127.0.0.1 username : postgres","title":"Configuration"},{"location":"collectors/postgres/#collected-metrics","text":"OpenMetrics Metric Metric Type Description pg_numbackends Gauge Number of backends currently connected to this database. pg_xact_commit Counter Number of transactions in this database that have been committed. pg_xact_rollback Counter Number of transactions in this database that have been rolled back. pg_blks_read Counter Number of disk blocks read in this database. pg_blks_hit Counter Number of times disk blocks were found already in the buffer cache, so that a read was not necessary pg_tup_returned Counter Number of live rows fetched by sequential scans and index entries returned by index scans in this database. pg_tup_fetched Counter Number of live rows fetched by index scans in this database. pg_tup_inserted Counter Number of rows inserted by queries in this database. pg_tup_updated Counter Number of rows updated by queries in this database. pg_tup_deleted Counter Number of rows deleted by queries in this database. pg_conflicts Counter Number of queries canceled due to conflicts with recovery in this database pg_temp_files Counter Number of temporary files created by queries in this database pg_temp_bytes Counter Total amount of data written to temporary files by queries in this database pg_deadlocks Counter Number of deadlocks detected in this database. pg_checksum_failures Counter Number of data page checksum failures detected in this database pg_blk_read_time Counter Time spent reading data file blocks by backends in this database, in seconds pg_blk_write_time Counter Time spent writing data file blocks by backends in this database, in seconds pg_session_time Counter Time spent by database sessions in this database, in seconds pg_active_time Counter Time spent executing SQL statements in this database, in seconds pg_idle_in_transaction_time Counter Time spent idling while in a transaction in this database, in seconds pg_sessions Counter Total number of sessions established to this database. pg_sessions_abandoned Counter Number of database sessions to this database that were terminated because connection to the client was lost. pg_sessions_fatal Counter Number of database sessions to this database that were terminated by fatal errors. pg_sessions_killed Counter Number of database sessions to this database that were terminated by operator intervention.","title":"Collected Metrics"},{"location":"collectors/postgres/#labels","text":"postgres collector appends the following labels Label Description db Database name","title":"Labels"},{"location":"collectors/postgres/#sample-output","text":"OpenMetrics","title":"Sample Output"},{"location":"collectors/postgres_query/","text":"postgres collector \u00b6 postgres_query performs queries over PostgreSQL database and exposes results as a metrics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be postgres_query interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection socket String Unix socket path database String Database name username String Username to connect database password String Password to connect database items Array List of query configurations query String SQL query name String Metric name. Overriden by name_column . name_column String Column with metric name. Overrides name configuration. help String Metric help. Overriden by help_column . help_column String Optional column with metric help. Overrides help connfiguration. value_column String value Column with metric value labels Object Additional item-level labels. labels_columns Array List of column names which to be exposed as labels. Label name matches with column name. Config example: - id : Query type : postgres_query host : postgres username : postgres password : secret database : metrics items : # name, value, and help from table - query : SELECT name, value, help FROM metrics help_column : help # Static name, help, and labels - query : SELECT 42 as value name : meaning_of_life help : The most important question labels : region : galaxy transport : autostop # Static name. Labels and value are from query - query : SELECT dept, region, SUM(value) AS value FROM expenses GROUP BY 1, 2 name : expenses help : Expenses by department and the region label_columns : [ dept , region ] Collected Metrics \u00b6 postgres_queery doesn't impose the specific format of the metrics. The generated metrics are fully configurable. Labels \u00b6 Metric labels depend on configures queries. Database Table Requirements \u00b6 Metric name field must be of text type: CHAR, VARCHAR, TEXT. Value field must must be of type: SMALLINT, SMALLSERIAL, INT2, INT, INT4, SERIAL, BIGINT, BIGSERIAL, INT8, REAL, FLOAT4, DOUBLE PRECISION, FLOAT8, NUMERIC. Help field is optional and must be any text type: CHAR, VARCHAR, TEXT. Example \u00b6 Create metrics table or view with the following structure: CREATE TABLE metrics ( name VARCHAR ( 256 ), help VARCHAR ( 256 ), value INTEGER ); Populate with data: INSERT INTO metrics ( name , help , value ) VALUES ( 'myapp_read' , 'Total reads' , 12 ), ( 'myapp_write' , 'Total writes' , 28 ), ( 'myapp_delete' , 'Total deletes' , 1 ); Sample Output \u00b6 OpenMetrics","title":"postgres_query"},{"location":"collectors/postgres_query/#postgres-collector","text":"postgres_query performs queries over PostgreSQL database and exposes results as a metrics.","title":"postgres collector"},{"location":"collectors/postgres_query/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be postgres_query interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String Server instance host for TCP connection port Integer Server instance port for TCP connection socket String Unix socket path database String Database name username String Username to connect database password String Password to connect database items Array List of query configurations query String SQL query name String Metric name. Overriden by name_column . name_column String Column with metric name. Overrides name configuration. help String Metric help. Overriden by help_column . help_column String Optional column with metric help. Overrides help connfiguration. value_column String value Column with metric value labels Object Additional item-level labels. labels_columns Array List of column names which to be exposed as labels. Label name matches with column name. Config example: - id : Query type : postgres_query host : postgres username : postgres password : secret database : metrics items : # name, value, and help from table - query : SELECT name, value, help FROM metrics help_column : help # Static name, help, and labels - query : SELECT 42 as value name : meaning_of_life help : The most important question labels : region : galaxy transport : autostop # Static name. Labels and value are from query - query : SELECT dept, region, SUM(value) AS value FROM expenses GROUP BY 1, 2 name : expenses help : Expenses by department and the region label_columns : [ dept , region ]","title":"Configuration"},{"location":"collectors/postgres_query/#collected-metrics","text":"postgres_queery doesn't impose the specific format of the metrics. The generated metrics are fully configurable.","title":"Collected Metrics"},{"location":"collectors/postgres_query/#labels","text":"Metric labels depend on configures queries.","title":"Labels"},{"location":"collectors/postgres_query/#database-table-requirements","text":"Metric name field must be of text type: CHAR, VARCHAR, TEXT. Value field must must be of type: SMALLINT, SMALLSERIAL, INT2, INT, INT4, SERIAL, BIGINT, BIGSERIAL, INT8, REAL, FLOAT4, DOUBLE PRECISION, FLOAT8, NUMERIC. Help field is optional and must be any text type: CHAR, VARCHAR, TEXT.","title":"Database Table Requirements"},{"location":"collectors/postgres_query/#example","text":"Create metrics table or view with the following structure: CREATE TABLE metrics ( name VARCHAR ( 256 ), help VARCHAR ( 256 ), value INTEGER ); Populate with data: INSERT INTO metrics ( name , help , value ) VALUES ( 'myapp_read' , 'Total reads' , 12 ), ( 'myapp_write' , 'Total writes' , 28 ), ( 'myapp_delete' , 'Total deletes' , 1 );","title":"Example"},{"location":"collectors/postgres_query/#sample-output","text":"OpenMetrics","title":"Sample Output"},{"location":"collectors/procstat/","text":"procstat collector \u00b6 procstat collects the host's processes' statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be procstat interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description expose_labels Array List of value to enable optional labels. See Labels for details self_pid Boolean Include agent's own pid pid_file String Optional path to pid file pattern String Optional regular expression that matches the process' command line cmd_separator String Separaror for cmd and __meta_cmd labels env_separator String ; Separator for __meta_env label Config example: - id : procstat type : procstat expose_labels : [ user ] self_pid : true Collected Metrics \u00b6 OpenMetrics Metric Metric Type Platform Description ps_num_fds Gauge Linux Number of open files ps_num_threads Gauge Linux Number of threads ps_voluntary_context_switches Counter Linux Total voluntary context switches ps_involuntary_context_switches Counter Linux Total involuntary context switches ps_minor_faults Counter Linux Total number of minor faults which do not requirie loading memory from disk ps_major_faults Counter Linux Total number of major faults which require loading memory from disk ps_child_minor_faults Counter Linux Total number of minor faults that process waited-for children made ps_child_major_faults Counter Linux Total number of major faults that process waited-for children made ps_cpu_time_user Counter Linux CPU time in user mode in seconds ps_cpu_time_system Counter Linux CPU time in system mode in seconds ps_cpu_time_iowait Counter Linux CPU time iowait in seconds ps_cpu_usage Gauge Linux Total CPU usage in percents ps_mem_total Counter Linux Total memory ps_mem_rss Counter Linux Resident set size ps_mem_swap Gauge Linux Swapped-out virtual memory size ps_mem_data Gauge Linux Data segment size ps_mem_stack Gauge Linux Stack segment size ps_mem_text Gauge Linux Text segment size ps_mem_lib Gauge Linux Shared library code size ps_mem_locked Gauge Linux Locked memory size ps_read_count Counter Linux Total read I/O operations ps_write_count Counter Linux Total write I/O operations ps_read_bytes Counter Linux Total bytes read ps_write_bytes Counter Linux Total bytes written Labels \u00b6 procstat collector appends the following labels: Label expose_labels Description process_name Name of the process user user Process' effective user name cmd cmd Full command line separated by cmd_separator __meta_cmd __meta_cmd Virtual label version of cmd __meta_env __meta_env Virtual label containing the process' environmenr separated by env_separator expose_labels may take the following values: user - Expose user label. cmd - Expose cmd label. __meta_cmd - Expose __meta_cmd label. __meta_env - Expose __meta_env label. Config Discovery \u00b6 procstat collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -procstat Process Name Rewritting \u00b6 Sometimes, the process name is non-unique and misleading. Then the Relabeling Rules come to the resque. Consider we have a set of the services launched by run command using syntax run <service> Then we can configure procstat collector to fetch proper name to the labels: - id : Procstat type : procstat ... expose_labels : [ __meta_cmd ] relabel : - source_labels : [ __meta_cmd ] regex : \"run (.+)\" replacement : \"$1\" target_label : process_name action : replace Then the process_name label will contain service name, instead of run . Sample Output \u00b6 OpenMetrics","title":"procstat"},{"location":"collectors/procstat/#procstat-collector","text":"procstat collects the host's processes' statistics.","title":"procstat collector"},{"location":"collectors/procstat/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be procstat interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description expose_labels Array List of value to enable optional labels. See Labels for details self_pid Boolean Include agent's own pid pid_file String Optional path to pid file pattern String Optional regular expression that matches the process' command line cmd_separator String Separaror for cmd and __meta_cmd labels env_separator String ; Separator for __meta_env label Config example: - id : procstat type : procstat expose_labels : [ user ] self_pid : true","title":"Configuration"},{"location":"collectors/procstat/#collected-metrics","text":"OpenMetrics Metric Metric Type Platform Description ps_num_fds Gauge Linux Number of open files ps_num_threads Gauge Linux Number of threads ps_voluntary_context_switches Counter Linux Total voluntary context switches ps_involuntary_context_switches Counter Linux Total involuntary context switches ps_minor_faults Counter Linux Total number of minor faults which do not requirie loading memory from disk ps_major_faults Counter Linux Total number of major faults which require loading memory from disk ps_child_minor_faults Counter Linux Total number of minor faults that process waited-for children made ps_child_major_faults Counter Linux Total number of major faults that process waited-for children made ps_cpu_time_user Counter Linux CPU time in user mode in seconds ps_cpu_time_system Counter Linux CPU time in system mode in seconds ps_cpu_time_iowait Counter Linux CPU time iowait in seconds ps_cpu_usage Gauge Linux Total CPU usage in percents ps_mem_total Counter Linux Total memory ps_mem_rss Counter Linux Resident set size ps_mem_swap Gauge Linux Swapped-out virtual memory size ps_mem_data Gauge Linux Data segment size ps_mem_stack Gauge Linux Stack segment size ps_mem_text Gauge Linux Text segment size ps_mem_lib Gauge Linux Shared library code size ps_mem_locked Gauge Linux Locked memory size ps_read_count Counter Linux Total read I/O operations ps_write_count Counter Linux Total write I/O operations ps_read_bytes Counter Linux Total bytes read ps_write_bytes Counter Linux Total bytes written","title":"Collected Metrics"},{"location":"collectors/procstat/#labels","text":"procstat collector appends the following labels: Label expose_labels Description process_name Name of the process user user Process' effective user name cmd cmd Full command line separated by cmd_separator __meta_cmd __meta_cmd Virtual label version of cmd __meta_env __meta_env Virtual label containing the process' environmenr separated by env_separator expose_labels may take the following values: user - Expose user label. cmd - Expose cmd label. __meta_cmd - Expose __meta_cmd label. __meta_env - Expose __meta_env label.","title":"Labels"},{"location":"collectors/procstat/#config-discovery","text":"procstat collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -procstat","title":"Config Discovery"},{"location":"collectors/procstat/#process-name-rewritting","text":"Sometimes, the process name is non-unique and misleading. Then the Relabeling Rules come to the resque. Consider we have a set of the services launched by run command using syntax run <service> Then we can configure procstat collector to fetch proper name to the labels: - id : Procstat type : procstat ... expose_labels : [ __meta_cmd ] relabel : - source_labels : [ __meta_cmd ] regex : \"run (.+)\" replacement : \"$1\" target_label : process_name action : replace Then the process_name label will contain service name, instead of run .","title":"Process Name Rewritting"},{"location":"collectors/procstat/#sample-output","text":"OpenMetrics","title":"Sample Output"},{"location":"collectors/redis/","text":"redis collector \u00b6 redis collects Redis instance statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be redis interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String 127.0.0.1 Redis server address port Integer 6379 Redis server port db Integer 0 Redis database user String Optional database user password String Optional database password Config example: - id : ??? disabled : false type : redis host : 127.0.0.1 port : 6379 Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description redis_uptime_in_seconds Gauge ??? redis_io_threads_active Gauge ??? redis_connected_clients Gauge ??? redis_cluster_connections Gauge ??? redis_maxclients Gauge ??? redis_client_recent_max_input_buffer Gauge ??? redis_client_recent_max_output_buffer Gauge ??? redis_blocked_clients Gauge ??? redis_tracking_clients Gauge ??? redis_clients_in_timeout_table Gauge ??? redis_used_memory Gauge ??? redis_used_memory_rss Gauge ??? redis_used_memory_peak Gauge ??? redis_used_memory_overhead Gauge ??? redis_used_memory_startup Gauge ??? redis_used_memory_dataset Gauge ??? redis_allocator_allocated Gauge ??? redis_allocator_active Gauge ??? redis_allocator_resident Gauge ??? redis_total_system_memory Gauge ??? redis_used_memory_lua Gauge ??? redis_used_memory_vm_eval Gauge ??? redis_used_memory_scripts_eval Gauge ??? redis_number_of_cached_scripts Gauge ??? redis_number_of_functions Gauge ??? redis_number_of_libraries Gauge ??? redis_used_memory_vm_functions Gauge ??? redis_used_memory_vm_total Gauge ??? redis_used_memory_functions Gauge ??? redis_used_memory_scripts Gauge ??? redis_maxmemory Gauge ??? redis_allocator_frag_ratio Gauge ??? redis_allocator_frag_bytes Gauge ??? redis_allocator_rss_ratio Gauge ??? redis_allocator_rss_bytes Gauge ??? redis_rss_overhead_ratio Gauge ??? redis_rss_overhead_bytes Gauge ??? redis_mem_fragmentation_ratio Gauge ??? redis_mem_fragmentation_bytes Gauge ??? redis_mem_not_counted_for_evict Gauge ??? redis_mem_replication_backlog Gauge ??? redis_mem_total_replication_buffers Gauge ??? redis_mem_clients_slaves Gauge ??? redis_mem_clients_normal Gauge ??? redis_mem_cluster_links Gauge ??? redis_mem_aof_buffer Gauge ??? redis_active_defrag_running Gauge ??? redis_lazyfree_pending_objects Gauge ??? redis_lazyfreed_objects Gauge ??? redis_loading Gauge ??? redis_async_loading Gauge ??? redis_current_cow_peak Gauge ??? redis_current_cow_size Gauge ??? redis_current_cow_size_age Gauge ??? redis_current_save_keys_processed Gauge ??? redis_current_save_keys_total Gauge ??? redis_rdb_changes_since_last_save Gauge ??? redis_rdb_bgsave_in_progress Gauge ??? redis_rdb_last_save_time Gauge ??? redis_rdb_last_bgsave_time_sec Gauge ??? redis_rdb_current_bgsave_time_sec Gauge ??? redis_rdb_saves Gauge ??? redis_rdb_last_cow_size Gauge ??? redis_rdb_last_load_keys_expired Gauge ??? redis_rdb_last_load_keys_loaded Gauge ??? redis_aof_enabled Gauge ??? redis_aof_rewrite_in_progress Gauge ??? redis_aof_rewrite_scheduled Gauge ??? redis_aof_last_rewrite_time_sec Gauge ??? redis_aof_current_rewrite_time_sec Gauge ??? redis_aof_rewrites Gauge ??? redis_aof_rewrites_consecutive_failures Gauge ??? redis_aof_last_cow_size Gauge ??? redis_module_fork_in_progress Gauge ??? redis_module_fork_last_cow_size Gauge ??? redis_total_connections_received Gauge ??? redis_total_commands_processed Gauge ??? redis_instantaneous_ops_per_sec Gauge ??? redis_total_net_input_bytes Gauge ??? redis_total_net_output_bytes Gauge ??? redis_total_net_repl_input_bytes Gauge ??? redis_total_net_repl_output_bytes Gauge ??? redis_instantaneous_input_kbps Gauge ??? redis_instantaneous_output_kbps Gauge ??? redis_instantaneous_input_repl_kbps Gauge ??? redis_instantaneous_output_repl_kbps Gauge ??? redis_rejected_connections Gauge ??? redis_sync_full Gauge ??? redis_sync_partial_ok Gauge ??? redis_sync_partial_err Gauge ??? redis_expired_keys Gauge ??? redis_expired_stale_perc Gauge ??? redis_expired_time_cap_reached_count Gauge ??? redis_expire_cycle_cpu_milliseconds Gauge ??? redis_evicted_keys Gauge ??? redis_evicted_clients Gauge ??? redis_total_eviction_exceeded_time Gauge ??? redis_current_eviction_exceeded_time Gauge ??? redis_keyspace_hits Gauge ??? redis_keyspace_misses Gauge ??? redis_pubsub_channels Gauge ??? redis_pubsub_patterns Gauge ??? redis_pubsubshard_channels Gauge ??? redis_latest_fork_usec Gauge ??? redis_total_forks Gauge ??? redis_migrate_cached_sockets Gauge ??? redis_slave_expires_tracked_keys Gauge ??? redis_active_defrag_hits Gauge ??? redis_active_defrag_misses Gauge ??? redis_active_defrag_key_hits Gauge ??? redis_active_defrag_key_misses Gauge ??? redis_total_active_defrag_time Gauge ??? redis_current_active_defrag_time Gauge ??? redis_tracking_total_keys Gauge ??? redis_tracking_total_items Gauge ??? redis_tracking_total_prefixes Gauge ??? redis_unexpected_error_replies Gauge ??? redis_total_error_replies Gauge ??? redis_dump_payload_sanitizations Gauge ??? redis_total_reads_processed Gauge ??? redis_total_writes_processed Gauge ??? redis_io_threaded_reads_processed Gauge ??? redis_io_threaded_writes_processed Gauge ??? redis_reply_buffer_shrinks Gauge ??? redis_reply_buffer_expands Gauge ??? redis_connected_slaves Gauge ??? redis_master_replid2 Gauge ??? redis_master_repl_offset Gauge ??? redis_second_repl_offset Gauge ??? redis_repl_backlog_active Gauge ??? redis_repl_backlog_size Gauge ??? redis_repl_backlog_first_byte_offset Gauge ??? redis_repl_backlog_histlen Gauge ??? redis_used_cpu_sys Gauge ??? redis_used_cpu_user Gauge ??? redis_used_cpu_sys_children Gauge ??? redis_used_cpu_user_children Gauge ??? redis_used_cpu_sys_main_thread Gauge ??? redis_used_cpu_user_main_thread Gauge ??? Labels \u00b6 redis collector appends the following labels Label Description host Server address, same as the host configuration parameter port Server port, same as the port configuration parameter Sample Output \u00b6 OpenMetrics","title":"redis"},{"location":"collectors/redis/#redis-collector","text":"redis collects Redis instance statistics.","title":"redis collector"},{"location":"collectors/redis/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be redis interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description host String 127.0.0.1 Redis server address port Integer 6379 Redis server port db Integer 0 Redis database user String Optional database user password String Optional database password Config example: - id : ??? disabled : false type : redis host : 127.0.0.1 port : 6379","title":"Configuration"},{"location":"collectors/redis/#collected-metrics","text":"OpenMetrics Metric Metric Type Description redis_uptime_in_seconds Gauge ??? redis_io_threads_active Gauge ??? redis_connected_clients Gauge ??? redis_cluster_connections Gauge ??? redis_maxclients Gauge ??? redis_client_recent_max_input_buffer Gauge ??? redis_client_recent_max_output_buffer Gauge ??? redis_blocked_clients Gauge ??? redis_tracking_clients Gauge ??? redis_clients_in_timeout_table Gauge ??? redis_used_memory Gauge ??? redis_used_memory_rss Gauge ??? redis_used_memory_peak Gauge ??? redis_used_memory_overhead Gauge ??? redis_used_memory_startup Gauge ??? redis_used_memory_dataset Gauge ??? redis_allocator_allocated Gauge ??? redis_allocator_active Gauge ??? redis_allocator_resident Gauge ??? redis_total_system_memory Gauge ??? redis_used_memory_lua Gauge ??? redis_used_memory_vm_eval Gauge ??? redis_used_memory_scripts_eval Gauge ??? redis_number_of_cached_scripts Gauge ??? redis_number_of_functions Gauge ??? redis_number_of_libraries Gauge ??? redis_used_memory_vm_functions Gauge ??? redis_used_memory_vm_total Gauge ??? redis_used_memory_functions Gauge ??? redis_used_memory_scripts Gauge ??? redis_maxmemory Gauge ??? redis_allocator_frag_ratio Gauge ??? redis_allocator_frag_bytes Gauge ??? redis_allocator_rss_ratio Gauge ??? redis_allocator_rss_bytes Gauge ??? redis_rss_overhead_ratio Gauge ??? redis_rss_overhead_bytes Gauge ??? redis_mem_fragmentation_ratio Gauge ??? redis_mem_fragmentation_bytes Gauge ??? redis_mem_not_counted_for_evict Gauge ??? redis_mem_replication_backlog Gauge ??? redis_mem_total_replication_buffers Gauge ??? redis_mem_clients_slaves Gauge ??? redis_mem_clients_normal Gauge ??? redis_mem_cluster_links Gauge ??? redis_mem_aof_buffer Gauge ??? redis_active_defrag_running Gauge ??? redis_lazyfree_pending_objects Gauge ??? redis_lazyfreed_objects Gauge ??? redis_loading Gauge ??? redis_async_loading Gauge ??? redis_current_cow_peak Gauge ??? redis_current_cow_size Gauge ??? redis_current_cow_size_age Gauge ??? redis_current_save_keys_processed Gauge ??? redis_current_save_keys_total Gauge ??? redis_rdb_changes_since_last_save Gauge ??? redis_rdb_bgsave_in_progress Gauge ??? redis_rdb_last_save_time Gauge ??? redis_rdb_last_bgsave_time_sec Gauge ??? redis_rdb_current_bgsave_time_sec Gauge ??? redis_rdb_saves Gauge ??? redis_rdb_last_cow_size Gauge ??? redis_rdb_last_load_keys_expired Gauge ??? redis_rdb_last_load_keys_loaded Gauge ??? redis_aof_enabled Gauge ??? redis_aof_rewrite_in_progress Gauge ??? redis_aof_rewrite_scheduled Gauge ??? redis_aof_last_rewrite_time_sec Gauge ??? redis_aof_current_rewrite_time_sec Gauge ??? redis_aof_rewrites Gauge ??? redis_aof_rewrites_consecutive_failures Gauge ??? redis_aof_last_cow_size Gauge ??? redis_module_fork_in_progress Gauge ??? redis_module_fork_last_cow_size Gauge ??? redis_total_connections_received Gauge ??? redis_total_commands_processed Gauge ??? redis_instantaneous_ops_per_sec Gauge ??? redis_total_net_input_bytes Gauge ??? redis_total_net_output_bytes Gauge ??? redis_total_net_repl_input_bytes Gauge ??? redis_total_net_repl_output_bytes Gauge ??? redis_instantaneous_input_kbps Gauge ??? redis_instantaneous_output_kbps Gauge ??? redis_instantaneous_input_repl_kbps Gauge ??? redis_instantaneous_output_repl_kbps Gauge ??? redis_rejected_connections Gauge ??? redis_sync_full Gauge ??? redis_sync_partial_ok Gauge ??? redis_sync_partial_err Gauge ??? redis_expired_keys Gauge ??? redis_expired_stale_perc Gauge ??? redis_expired_time_cap_reached_count Gauge ??? redis_expire_cycle_cpu_milliseconds Gauge ??? redis_evicted_keys Gauge ??? redis_evicted_clients Gauge ??? redis_total_eviction_exceeded_time Gauge ??? redis_current_eviction_exceeded_time Gauge ??? redis_keyspace_hits Gauge ??? redis_keyspace_misses Gauge ??? redis_pubsub_channels Gauge ??? redis_pubsub_patterns Gauge ??? redis_pubsubshard_channels Gauge ??? redis_latest_fork_usec Gauge ??? redis_total_forks Gauge ??? redis_migrate_cached_sockets Gauge ??? redis_slave_expires_tracked_keys Gauge ??? redis_active_defrag_hits Gauge ??? redis_active_defrag_misses Gauge ??? redis_active_defrag_key_hits Gauge ??? redis_active_defrag_key_misses Gauge ??? redis_total_active_defrag_time Gauge ??? redis_current_active_defrag_time Gauge ??? redis_tracking_total_keys Gauge ??? redis_tracking_total_items Gauge ??? redis_tracking_total_prefixes Gauge ??? redis_unexpected_error_replies Gauge ??? redis_total_error_replies Gauge ??? redis_dump_payload_sanitizations Gauge ??? redis_total_reads_processed Gauge ??? redis_total_writes_processed Gauge ??? redis_io_threaded_reads_processed Gauge ??? redis_io_threaded_writes_processed Gauge ??? redis_reply_buffer_shrinks Gauge ??? redis_reply_buffer_expands Gauge ??? redis_connected_slaves Gauge ??? redis_master_replid2 Gauge ??? redis_master_repl_offset Gauge ??? redis_second_repl_offset Gauge ??? redis_repl_backlog_active Gauge ??? redis_repl_backlog_size Gauge ??? redis_repl_backlog_first_byte_offset Gauge ??? redis_repl_backlog_histlen Gauge ??? redis_used_cpu_sys Gauge ??? redis_used_cpu_user Gauge ??? redis_used_cpu_sys_children Gauge ??? redis_used_cpu_user_children Gauge ??? redis_used_cpu_sys_main_thread Gauge ??? redis_used_cpu_user_main_thread Gauge ???","title":"Collected Metrics"},{"location":"collectors/redis/#labels","text":"redis collector appends the following labels Label Description host Server address, same as the host configuration parameter port Server port, same as the port configuration parameter","title":"Labels"},{"location":"collectors/redis/#sample-output","text":"OpenMetrics","title":"Sample Output"},{"location":"collectors/scrape/","text":"scrape collector \u00b6 scrape collects data from OpenMetrics/Prometheus endpoints. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be scrape interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description service_discovery Object Service Discovery configuration trust_timestamps Bool false Ignore timestamps in output, if false concurrency Integer 10 Limit amount of parralel tasks Config example: - id : scrape disabled : false type : scrape service_discovery : type : static targets : - \"127.0.0.1:3000\" - \"127.0.0.1:3001\" Service Discovery \u00b6 Target endpoints are obtained via the Service Discovery process. Service Discovey returns the set of labels for The common labels available for all types of the service discovery are: Label Desciption __address__ <host>:<port> for a target service __meta_sd_schema Request schema: http or https __meta_sd_path Metrics endpoint path (i.e. /metrics ) Static \u00b6 static discovery returns addresses set in targets configuration parameter. Configuration: Parameter Type Default Description type String Must be static targets Array List of targets in <host>:<port> format relabel Array Relabeling Rules for service discovery schema String http Default service endpoint schema path String /metrics Default service endpoint path Example: service_discovery : type : static targets : - \"agent1:3000\" - \"agent2:3000\" DNS \u00b6 dns discovery performs DNS queries to resolve the targets. Configuration: Parameter Type Default Description type String Must be dns query String DNS query query_type String A DNS query type. Either A or SRV port Integer Target port. Mandatory for A queries Example ( A type): service_discovery : type : dns query : agent1.local port : 3000 Example ( SRV type): service_discovery : type : dns query : _dnssd._tcp.ga.test.gufolabs.com query_type : SRV Consul \u00b6 consul discovery allows retrieving targets from Consul Agent API Configuration: Parameter Type Default Description type String Must be consul server String 127.0.0.1:8500 Consul's server addreess filter String Optional Consul query filter tag_separator String , Separator to join __meta_consul_tags label consul discovery defines additional labels for relabeling process: Label Desciption __meta_consul_dc Consul datacenter __meta_consul_service Consul service name __meta_consul_service_id Consul service id __meta_consul_service_address Target address __meta_consul_service_port Target port __meta_consul_tags The list of tags joined by tag_separator __meta_consul_meta_<key> Each service metadata key/value for target Example: service_discovery : type : consul server : \"127.0.0.1:8500\" Collected Metrics \u00b6 scrape collector re-exposes collected metrics. Labels \u00b6 scrape collector appends the following labels Label Description __address__ <address>:<port> of the source Sample Output \u00b6 OpenMetrics","title":"scrape"},{"location":"collectors/scrape/#scrape-collector","text":"scrape collects data from OpenMetrics/Prometheus endpoints.","title":"scrape collector"},{"location":"collectors/scrape/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be scrape interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description service_discovery Object Service Discovery configuration trust_timestamps Bool false Ignore timestamps in output, if false concurrency Integer 10 Limit amount of parralel tasks Config example: - id : scrape disabled : false type : scrape service_discovery : type : static targets : - \"127.0.0.1:3000\" - \"127.0.0.1:3001\"","title":"Configuration"},{"location":"collectors/scrape/#service-discovery","text":"Target endpoints are obtained via the Service Discovery process. Service Discovey returns the set of labels for The common labels available for all types of the service discovery are: Label Desciption __address__ <host>:<port> for a target service __meta_sd_schema Request schema: http or https __meta_sd_path Metrics endpoint path (i.e. /metrics )","title":"Service Discovery"},{"location":"collectors/scrape/#static","text":"static discovery returns addresses set in targets configuration parameter. Configuration: Parameter Type Default Description type String Must be static targets Array List of targets in <host>:<port> format relabel Array Relabeling Rules for service discovery schema String http Default service endpoint schema path String /metrics Default service endpoint path Example: service_discovery : type : static targets : - \"agent1:3000\" - \"agent2:3000\"","title":"Static"},{"location":"collectors/scrape/#dns","text":"dns discovery performs DNS queries to resolve the targets. Configuration: Parameter Type Default Description type String Must be dns query String DNS query query_type String A DNS query type. Either A or SRV port Integer Target port. Mandatory for A queries Example ( A type): service_discovery : type : dns query : agent1.local port : 3000 Example ( SRV type): service_discovery : type : dns query : _dnssd._tcp.ga.test.gufolabs.com query_type : SRV","title":"DNS"},{"location":"collectors/scrape/#consul","text":"consul discovery allows retrieving targets from Consul Agent API Configuration: Parameter Type Default Description type String Must be consul server String 127.0.0.1:8500 Consul's server addreess filter String Optional Consul query filter tag_separator String , Separator to join __meta_consul_tags label consul discovery defines additional labels for relabeling process: Label Desciption __meta_consul_dc Consul datacenter __meta_consul_service Consul service name __meta_consul_service_id Consul service id __meta_consul_service_address Target address __meta_consul_service_port Target port __meta_consul_tags The list of tags joined by tag_separator __meta_consul_meta_<key> Each service metadata key/value for target Example: service_discovery : type : consul server : \"127.0.0.1:8500\"","title":"Consul"},{"location":"collectors/scrape/#collected-metrics","text":"scrape collector re-exposes collected metrics.","title":"Collected Metrics"},{"location":"collectors/scrape/#labels","text":"scrape collector appends the following labels Label Description __address__ <address>:<port> of the source","title":"Labels"},{"location":"collectors/scrape/#sample-output","text":"OpenMetrics","title":"Sample Output"},{"location":"collectors/sockets/","text":"sockets collector \u00b6 sockets collects the host's sockets statistics. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be sockets interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : Sockets type : sockets Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description tcp4_sockets_used Gauge Total amount of IPv4 TCP sockets used tcp6_sockets_used Gauge Total amount of IPv6 TCP sockets used udp4_sockets_used Gauge Total amount of IPv4 UDP sockets used udp6_sockets_used Gauge Total amount of IPv6 UDP sockets used Labels \u00b6 sockets collector doesn't append its own labels. Config Discovery \u00b6 sockets collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -sockets Sample Output \u00b6 OpenMetrics # HELP sockets_tcp4_sockets_used Total amount of IPv4 TCP sockets used # TYPE sockets_tcp4_sockets_used gauge sockets_tcp4_sockets_used 19 1683011185 # HELP sockets_tcp6_sockets_used Total amount of IPv6 TCP sockets used # TYPE sockets_tcp6_sockets_used gauge sockets_tcp6_sockets_used 0 1683011185 # HELP sockets_udp4_sockets_used Total amount of IPv4 UDP sockets used # TYPE sockets_udp4_sockets_used gauge sockets_udp4_sockets_used 0 1683011185 # HELP sockets_udp6_sockets_used Total amount of IPv6 UDP sockets used # TYPE sockets_udp6_sockets_used gauge sockets_udp6_sockets_used 0 1683011185","title":"sockets"},{"location":"collectors/sockets/#sockets-collector","text":"sockets collects the host's sockets statistics.","title":"sockets collector"},{"location":"collectors/sockets/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be sockets interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : Sockets type : sockets","title":"Configuration"},{"location":"collectors/sockets/#collected-metrics","text":"OpenMetrics Metric Metric Type Description tcp4_sockets_used Gauge Total amount of IPv4 TCP sockets used tcp6_sockets_used Gauge Total amount of IPv6 TCP sockets used udp4_sockets_used Gauge Total amount of IPv4 UDP sockets used udp6_sockets_used Gauge Total amount of IPv6 UDP sockets used","title":"Collected Metrics"},{"location":"collectors/sockets/#labels","text":"sockets collector doesn't append its own labels.","title":"Labels"},{"location":"collectors/sockets/#config-discovery","text":"sockets collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -sockets","title":"Config Discovery"},{"location":"collectors/sockets/#sample-output","text":"OpenMetrics # HELP sockets_tcp4_sockets_used Total amount of IPv4 TCP sockets used # TYPE sockets_tcp4_sockets_used gauge sockets_tcp4_sockets_used 19 1683011185 # HELP sockets_tcp6_sockets_used Total amount of IPv6 TCP sockets used # TYPE sockets_tcp6_sockets_used gauge sockets_tcp6_sockets_used 0 1683011185 # HELP sockets_udp4_sockets_used Total amount of IPv4 UDP sockets used # TYPE sockets_udp4_sockets_used gauge sockets_udp4_sockets_used 0 1683011185 # HELP sockets_udp6_sockets_used Total amount of IPv6 UDP sockets used # TYPE sockets_udp6_sockets_used gauge sockets_udp6_sockets_used 0 1683011185","title":"Sample Output"},{"location":"collectors/spool/","text":"spool collector \u00b6 spool reads files in OpenMetrics format from a directory and exposes collected data. The files are scanned in alphabetical order, parsed, and removed (unless the dry_run option is set). See OpenMetrics Format Specification for the recognized file format. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be spool interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description path String Path to the spool directory trust_timestamps Bool false Ignore timestamps in output, if false dry_run Boolean false If set to true - do not remove files Config example: - id : Spool type : spool path : /var/gufo_agent/spool Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description spool_jobs Counter Total spool jobs processed spool_jobs_success Counter Spool jobs processed successfully spool_jobs_failed Counter Spool jobs failed to process spool_parsed Counter Parsed metric items In addition to the own metrics spool exposes metrics read from the files. Labels \u00b6 spool collector appends the following labels: Label Description path Spool directory path Sample Output \u00b6 OpenMetrics # HELP job1 Result of the running of job1 # TYPE job1 gauge job1{collector=\"spool\"} 15 1683550695 # HELP job2 Result of the running of job2 # TYPE job2 gauge job2{collector=\"spool\"} 15.9 1683550695 # HELP spool_jobs Total spool jobs processed # TYPE spool_jobs counter spool_jobs{collector=\"spool\",path=\"var/spool\"} 1 1683550695 # HELP spool_jobs_failed Spool jobs failed to process # TYPE spool_jobs_failed counter spool_jobs_failed{collector=\"spool\"path=\"var/spool\"} 0 1683550695 # HELP spool_jobs_success Spool jobs processed successfully # TYPE spool_jobs_success counter spool_jobs_success{collector=\"spool\",path=\"var/spool\"} 1 1683550695 # HELP spool_parsed Parsed metric items # TYPE spool_parsed counter spool_parsed{collector=\"spool\",path=\"var/spool\"} 2 1683550695 # EOF","title":"spool"},{"location":"collectors/spool/#spool-collector","text":"spool reads files in OpenMetrics format from a directory and exposes collected data. The files are scanned in alphabetical order, parsed, and removed (unless the dry_run option is set). See OpenMetrics Format Specification for the recognized file format.","title":"spool collector"},{"location":"collectors/spool/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be spool interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description path String Path to the spool directory trust_timestamps Bool false Ignore timestamps in output, if false dry_run Boolean false If set to true - do not remove files Config example: - id : Spool type : spool path : /var/gufo_agent/spool","title":"Configuration"},{"location":"collectors/spool/#collected-metrics","text":"OpenMetrics Metric Metric Type Description spool_jobs Counter Total spool jobs processed spool_jobs_success Counter Spool jobs processed successfully spool_jobs_failed Counter Spool jobs failed to process spool_parsed Counter Parsed metric items In addition to the own metrics spool exposes metrics read from the files.","title":"Collected Metrics"},{"location":"collectors/spool/#labels","text":"spool collector appends the following labels: Label Description path Spool directory path","title":"Labels"},{"location":"collectors/spool/#sample-output","text":"OpenMetrics # HELP job1 Result of the running of job1 # TYPE job1 gauge job1{collector=\"spool\"} 15 1683550695 # HELP job2 Result of the running of job2 # TYPE job2 gauge job2{collector=\"spool\"} 15.9 1683550695 # HELP spool_jobs Total spool jobs processed # TYPE spool_jobs counter spool_jobs{collector=\"spool\",path=\"var/spool\"} 1 1683550695 # HELP spool_jobs_failed Spool jobs failed to process # TYPE spool_jobs_failed counter spool_jobs_failed{collector=\"spool\"path=\"var/spool\"} 0 1683550695 # HELP spool_jobs_success Spool jobs processed successfully # TYPE spool_jobs_success counter spool_jobs_success{collector=\"spool\",path=\"var/spool\"} 1 1683550695 # HELP spool_parsed Parsed metric items # TYPE spool_parsed counter spool_parsed{collector=\"spool\",path=\"var/spool\"} 2 1683550695 # EOF","title":"Sample Output"},{"location":"collectors/twamp_reflector/","text":"twamp_reflector collector \u00b6 twamp_reflector is the Two-way Active Measurement Protocol(TWAMP) reflector for the channel SLA measurements. Usually it accompanies the twamp_sender , although can serve as reflector for other TWAMP-compatible implementations. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be twamp_reflector interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specifig configuration is: Parameter Type Default Description listen String 0.0.0.0 Address to bind the control channel port Integer 862 Port for the control channel Config example: - id : TWAMP Reflector type : twamp_reflector listen : \"0.0.0.0\" port : 862 Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description twamp_session_attempts Counter Total amount of the attempted sessions twamp_session_started Counter Total amount of the started sessions twamp_reflected_pkt Counter Total amount of the reflected packets twamp_reflected_octets Counter Total amount of the reflected octets Labels \u00b6 twamp_reflector collector doesn't append its labels, though they can be configured via labels option. Configuring Senders \u00b6 Gufo Agent \u00b6 collectors : - id : TWAMP Session type : twamp_sender interval : 10 reflector : 127.0.0.1 port : 862 n_packets : 200 model : g711 dscp : ef labels : service : voip See twamp_sender for configuration options details. Sample Output \u00b6 OpenMetrics # HELP twamp_reflector_reflected_octets Total amount of the reflected octets # TYPE twamp_reflector_reflected_octets counter twamp_reflector_reflected_octets 1978000 1682593154 # HELP twamp_reflector_reflected_pkt Total amount of the reflected packets # TYPE twamp_reflector_reflected_pkt counter twamp_reflector_reflected_pkt 11500 1682593154 # HELP twamp_reflector_session_attempts Total amount of the attempted sessions # TYPE twamp_reflector_session_attempts counter twamp_reflector_session_attempts 115 1682593154 # HELP twamp_reflector_session_started Total amount of the started sessions # TYPE twamp_reflector_session_started counter twamp_reflector_session_started 115 1682593154","title":"twamp_reflector"},{"location":"collectors/twamp_reflector/#twamp_reflector-collector","text":"twamp_reflector is the Two-way Active Measurement Protocol(TWAMP) reflector for the channel SLA measurements. Usually it accompanies the twamp_sender , although can serve as reflector for other TWAMP-compatible implementations.","title":"twamp_reflector collector"},{"location":"collectors/twamp_reflector/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be twamp_reflector interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specifig configuration is: Parameter Type Default Description listen String 0.0.0.0 Address to bind the control channel port Integer 862 Port for the control channel Config example: - id : TWAMP Reflector type : twamp_reflector listen : \"0.0.0.0\" port : 862","title":"Configuration"},{"location":"collectors/twamp_reflector/#collected-metrics","text":"OpenMetrics Metric Metric Type Description twamp_session_attempts Counter Total amount of the attempted sessions twamp_session_started Counter Total amount of the started sessions twamp_reflected_pkt Counter Total amount of the reflected packets twamp_reflected_octets Counter Total amount of the reflected octets","title":"Collected Metrics"},{"location":"collectors/twamp_reflector/#labels","text":"twamp_reflector collector doesn't append its labels, though they can be configured via labels option.","title":"Labels"},{"location":"collectors/twamp_reflector/#configuring-senders","text":"","title":"Configuring Senders"},{"location":"collectors/twamp_reflector/#gufo-agent","text":"collectors : - id : TWAMP Session type : twamp_sender interval : 10 reflector : 127.0.0.1 port : 862 n_packets : 200 model : g711 dscp : ef labels : service : voip See twamp_sender for configuration options details.","title":"Gufo Agent"},{"location":"collectors/twamp_reflector/#sample-output","text":"OpenMetrics # HELP twamp_reflector_reflected_octets Total amount of the reflected octets # TYPE twamp_reflector_reflected_octets counter twamp_reflector_reflected_octets 1978000 1682593154 # HELP twamp_reflector_reflected_pkt Total amount of the reflected packets # TYPE twamp_reflector_reflected_pkt counter twamp_reflector_reflected_pkt 11500 1682593154 # HELP twamp_reflector_session_attempts Total amount of the attempted sessions # TYPE twamp_reflector_session_attempts counter twamp_reflector_session_attempts 115 1682593154 # HELP twamp_reflector_session_started Total amount of the started sessions # TYPE twamp_reflector_session_started counter twamp_reflector_session_started 115 1682593154","title":"Sample Output"},{"location":"collectors/twamp_sender/","text":"twamp_sender collector \u00b6 twamp_sender is the Two-way Active Measurement Protocol(TWAMP) client which is used along with a TWAMP reflector to perform the channel quality measurements, including delay, jitter, and packet loss in both directions. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be twamp_sender interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description reflector String IP address of the reflector port Integer 862 Port of the reflector's control channel reflector_port Integer 0 Demand explicit reflector port, if not 0 . Used to fix weird TWAMP reflector implentations dscp String be Mark outgoing test packets with appropriate DSCP label n_packets Integer Number of packets to send model String Traffic model. See for Traffic Models for details. Config example: - id : Twamp Sender type : twamp_sender reflector : 127.0.0.1 n_packets : 100 model : g711 Traffic Models \u00b6 Traffic models define the profile of outgoing packets and mimics the usage of the real-world traffic. The following traffic models are supported: g711 - G.711 codec. g729 - G.729 codec. cbr - Constant bitrate. imix - IMIX profile. g711 \u00b6 g711 traffic model mimics the VoIP RTP stream of the G.711 codec. It doesn't requre an additional configuration. Config example: - id : Twamp Sender type : twamp_sender interval : 10 reflector : 127.0.0.1 n_packets : 100 model : g711 Selecting g711 model enables MOS calculation . g729 \u00b6 g729 traffic model mimics the VoIP RTP stream of the G.729 codec. It doesn't requre an additional configuration. Config example: - id : Twamp Sender type : twamp_sender interval : 10 reflector : 127.0.0.1 n_packets : 100 model : g729 Selecting g729 model enables MOS calculation . cbr \u00b6 cbr traffic model generates constant load with given bitrate and packet size. Configuration: Name Type Description bandwidth Integer Used bandwidth, in bit/s size Integer Packet size, including IP header Config example: - id : Twamp Sender type : twamp_sender interval : 10 reflector : 127.0.0.1 n_packets : 100 model : cbr bandwidth : 10000000 size : 256 imix \u00b6 imix mimics Internet MIX (IMIX) packet model and fills the required bandwidth by most-commonly observed packets sizes. Name Type Description bandwidth Integer Used bandwidth, in bit/s Packet distribution: Packet size Packets Distribution (packets) Bytes Distribution (bytes) 70 7 58.33% 490 11.41% 576 4 33.33% 2304 53.65% 1500 1 8.33% 1500 34.94% Note TWAMP protocol doesn't allow test packets under the 70 octets. So provided model uses small packets of bigger size and resulting distribution slightly differs from commonly used IMIX models. Config example: - id : Twamp Sender type : twamp_sender interval : 10 reflector : 127.0.0.1 n_packets : 100 model : imix bandwidth : 10000000 Collected Metrics \u00b6 OpenMetrics Metric Type Description twamp_tx_packets Gauge Transmitted packets twamp_rx_packets Gauge Received packets twamp_tx_bytes Gauge Transmitted octets twamp_rx_bytes Gauge Received octets twamp_duration_ns Gauge Session duration in nanoseconds twamp_tx_pps Gauge Transmitted packets-per-second rate twamp_rx_pps Gauge Received packet-per-second rate twamp_tx_bitrate Gauge Transmitted bitrate twamp_rx_bitrate Gauge Received bitrate Inbound twamp_in_min_delay_ns Gauge Minimum inbound delay in nanoseconds twamp_in_max_delay_ns Gauge Maximum inbound delay in nanoseconds twamp_in_avg_delay_ns Gauge Average inbound delay in nanoseconds twamp_in_jitter_ns Gauge Jitter of the inbound delay in nanoseconds twamp_in_loss Gauge Packet loss in inbound direction twamp_in_mos Gauge eMOS for local end Outbound twamp_out_min_delay_ns Gauge Minimum outbound delay in nanoseconds twamp_out_max_delay_ns Gauge Maximum outbound delay in nanoseconds twamp_out_avg_delay_ns Gauge Average outbound delay in nanoseconds twamp_out_jitter_ns Gauge Jitter of the outbound delay in nanoseconds twamp_out_loss Gauge Packet loss in outbound direction twamp_out_mos Gauge eMOS for remote end Round-trip twamp_rt_min_delay_ns Gauge Minimum round-trip delay in nanoseconds twamp_rt_max_delay_ns Gauge Maximum round-trip delay in nanoseconds twamp_rt_avg_delay_ns Gauge Average round-trip delay in nanoseconds twamp_rt_jitter_ns Gauge Jitter of the round-trip delay in nanoseconds twamp_rt_loss Gauge Packet loss in both directions Labels \u00b6 twamp_sender collector doesn't append its labels, though they can be configured via labels option. MOS Calculation \u00b6 Gufo Agent automatically calculates the Mean-Opinion Score (MOS) for VoIP packet models. MOS calculated according to ITU-T G.107 recommendations using default conditions. MOS calculated for both directions: in_mos is for inbound traffic and means the voice quality expectation for the user at the TWAMP sender's side. out_mos is for outbound traffic and shows the voice quality expectation from the user at the TWAMP reflector's side. Configuring Reflectors \u00b6 Gufo Agent \u00b6 collectors : - id : TWAMP Reflector type : twamp_reflector interval : 10 listen : \"0.0.0.0\" port : 862 See twamp_reflector for configuration options details. Juniper JUNOS \u00b6 chassis { fpc 0 { pic 0 { inline-services { bandwidth 1g; } } } } services { rpm { server { authentication-mode none; port 862; client-list Client1 { address { 10.1.0.1/24; 10.1.0.2/24; } } } } } } interfaces { si-0/0/0 { unit 0 { family inet; } unit 10 { rpm twamp-server; family inet { address 10.0.0.1/32; } } } } Where 10.0.0.1 is the reflector address, and the allowed clients are in Client1 list. Cisco IOS \u00b6 IOS implementation demands explicit reflector port number in session request. Sender must be configured using reflector_port parameters: reflector_port : 9447 IOS configuration for reflector: ip sla server twamp exit ip sla responder twamp exit Sample Output \u00b6 OpenMetrics twamp_sender_duration_ns 1981100036 1682595808 # HELP twamp_sender_in_avg_delay Average inbound delay in nanoseconds # TYPE twamp_sender_in_avg_delay gauge twamp_sender_in_avg_delay 37879 1682595808 # HELP twamp_sender_in_jitter itter of the inbound delay in nanoseconds # TYPE twamp_sender_in_jitter gauge twamp_sender_in_jitter 26857 1682595808 # HELP twamp_sender_in_loss Packet loss in inbound direction # TYPE twamp_sender_in_loss gauge twamp_sender_in_loss 0 1682595808 # HELP twamp_sender_in_max_delay Maximum inbound delay in nanoseconds # TYPE twamp_sender_in_max_delay gauge twamp_sender_in_max_delay 172580 1682595808 # HELP twamp_sender_in_min_delay Minimum inbound delay in nanoseconds # TYPE twamp_sender_in_min_delay gauge twamp_sender_in_min_delay 18112 1682595808 # HELP in_mos eMOS for local end # TYPE in_mos gauge in_mos 4.4043684 1682595808 # HELP twamp_sender_out_avg_delay Average outbound delay in nanoseconds # TYPE twamp_sender_out_avg_delay gauge twamp_sender_out_avg_delay 90004 1682595808 # HELP twamp_sender_out_jitter Jitter of the outbound delay in nanoseconds # TYPE twamp_sender_out_jitter gauge twamp_sender_out_jitter 22222 1682595808 # HELP twamp_sender_out_loss Packet loss in outbound direction # TYPE twamp_sender_out_loss gauge twamp_sender_out_loss 0 1682595808 # HELP twamp_sender_out_max_delay Maximum outbound delay in nanoseconds # TYPE twamp_sender_out_max_delay gauge twamp_sender_out_max_delay 211155 1682595808 # HELP twamp_sender_out_min_delay Minimum outbound delay in nanoseconds # TYPE twamp_sender_out_min_delay gauge twamp_sender_out_min_delay 29212 1682595808 # HELP out_mos eMOS for remote end # TYPE out_mos gauge out_mos 4.4043336 1682595808 # HELP twamp_sender_rt_avg_delay Average round-trip delay in nanoseconds # TYPE twamp_sender_rt_avg_delay gauge twamp_sender_rt_avg_delay 127884 1682595808 # HELP twamp_sender_rt_jitter Jitter of the round-trip delay in nanoseconds # TYPE twamp_sender_rt_jitter gauge twamp_sender_rt_jitter 43653 1682595808 # HELP twamp_sender_rt_loss Packet loss in both directions # TYPE twamp_sender_rt_loss gauge twamp_sender_rt_loss 0 1682595808 # HELP twamp_sender_rt_max_delay Maximum round-trip delay in nanoseconds # TYPE twamp_sender_rt_max_delay gauge twamp_sender_rt_max_delay 262171 1682595808 # HELP twamp_sender_rt_min_delay Minimum round-trip delay in nanoseconds # TYPE twamp_sender_rt_min_delay gauge twamp_sender_rt_min_delay 58006 1682595808 # HELP twamp_sender_rx_bitrate Received bitrate # TYPE twamp_sender_rx_bitrate gauge twamp_sender_rx_bitrate 80242 1682595808 # HELP twamp_sender_rx_bytes Received octets # TYPE twamp_sender_rx_bytes gauge twamp_sender_rx_bytes 19872 1682595808 # HELP twamp_sender_rx_packets Received packets # TYPE twamp_sender_rx_packets counter twamp_sender_rx_packets 100 1682595808 # HELP twamp_sender_rx_pps Received packet-per-second rate # TYPE twamp_sender_rx_pps gauge twamp_sender_rx_pps 50 1682595808 # HELP twamp_sender_tx_bitrate Transmitted bitrate # TYPE twamp_sender_tx_bitrate gauge twamp_sender_tx_bitrate 80763 1682595808 # HELP twamp_sender_tx_bytes Transmitted octets # TYPE twamp_sender_tx_bytes counter twamp_sender_tx_bytes 20000 1682595808 # HELP twamp_sender_tx_packets Transmitted packets # TYPE twamp_sender_tx_packets counter twamp_sender_tx_packets 100 1682595808 # HELP twamp_sender_tx_pps Transmitted packets-per-second rate # TYPE twamp_sender_tx_pps gauge twamp_sender_tx_pps 50 1682595808","title":"twamp_sender"},{"location":"collectors/twamp_sender/#twamp_sender-collector","text":"twamp_sender is the Two-way Active Measurement Protocol(TWAMP) client which is used along with a TWAMP reflector to perform the channel quality measurements, including delay, jitter, and packet loss in both directions.","title":"twamp_sender collector"},{"location":"collectors/twamp_sender/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be twamp_sender interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details The collector-specific configuration is: Parameter Type Default Description reflector String IP address of the reflector port Integer 862 Port of the reflector's control channel reflector_port Integer 0 Demand explicit reflector port, if not 0 . Used to fix weird TWAMP reflector implentations dscp String be Mark outgoing test packets with appropriate DSCP label n_packets Integer Number of packets to send model String Traffic model. See for Traffic Models for details. Config example: - id : Twamp Sender type : twamp_sender reflector : 127.0.0.1 n_packets : 100 model : g711","title":"Configuration"},{"location":"collectors/twamp_sender/#traffic-models","text":"Traffic models define the profile of outgoing packets and mimics the usage of the real-world traffic. The following traffic models are supported: g711 - G.711 codec. g729 - G.729 codec. cbr - Constant bitrate. imix - IMIX profile.","title":"Traffic Models"},{"location":"collectors/twamp_sender/#g711","text":"g711 traffic model mimics the VoIP RTP stream of the G.711 codec. It doesn't requre an additional configuration. Config example: - id : Twamp Sender type : twamp_sender interval : 10 reflector : 127.0.0.1 n_packets : 100 model : g711 Selecting g711 model enables MOS calculation .","title":"g711"},{"location":"collectors/twamp_sender/#g729","text":"g729 traffic model mimics the VoIP RTP stream of the G.729 codec. It doesn't requre an additional configuration. Config example: - id : Twamp Sender type : twamp_sender interval : 10 reflector : 127.0.0.1 n_packets : 100 model : g729 Selecting g729 model enables MOS calculation .","title":"g729"},{"location":"collectors/twamp_sender/#cbr","text":"cbr traffic model generates constant load with given bitrate and packet size. Configuration: Name Type Description bandwidth Integer Used bandwidth, in bit/s size Integer Packet size, including IP header Config example: - id : Twamp Sender type : twamp_sender interval : 10 reflector : 127.0.0.1 n_packets : 100 model : cbr bandwidth : 10000000 size : 256","title":"cbr"},{"location":"collectors/twamp_sender/#imix","text":"imix mimics Internet MIX (IMIX) packet model and fills the required bandwidth by most-commonly observed packets sizes. Name Type Description bandwidth Integer Used bandwidth, in bit/s Packet distribution: Packet size Packets Distribution (packets) Bytes Distribution (bytes) 70 7 58.33% 490 11.41% 576 4 33.33% 2304 53.65% 1500 1 8.33% 1500 34.94% Note TWAMP protocol doesn't allow test packets under the 70 octets. So provided model uses small packets of bigger size and resulting distribution slightly differs from commonly used IMIX models. Config example: - id : Twamp Sender type : twamp_sender interval : 10 reflector : 127.0.0.1 n_packets : 100 model : imix bandwidth : 10000000","title":"imix"},{"location":"collectors/twamp_sender/#collected-metrics","text":"OpenMetrics Metric Type Description twamp_tx_packets Gauge Transmitted packets twamp_rx_packets Gauge Received packets twamp_tx_bytes Gauge Transmitted octets twamp_rx_bytes Gauge Received octets twamp_duration_ns Gauge Session duration in nanoseconds twamp_tx_pps Gauge Transmitted packets-per-second rate twamp_rx_pps Gauge Received packet-per-second rate twamp_tx_bitrate Gauge Transmitted bitrate twamp_rx_bitrate Gauge Received bitrate Inbound twamp_in_min_delay_ns Gauge Minimum inbound delay in nanoseconds twamp_in_max_delay_ns Gauge Maximum inbound delay in nanoseconds twamp_in_avg_delay_ns Gauge Average inbound delay in nanoseconds twamp_in_jitter_ns Gauge Jitter of the inbound delay in nanoseconds twamp_in_loss Gauge Packet loss in inbound direction twamp_in_mos Gauge eMOS for local end Outbound twamp_out_min_delay_ns Gauge Minimum outbound delay in nanoseconds twamp_out_max_delay_ns Gauge Maximum outbound delay in nanoseconds twamp_out_avg_delay_ns Gauge Average outbound delay in nanoseconds twamp_out_jitter_ns Gauge Jitter of the outbound delay in nanoseconds twamp_out_loss Gauge Packet loss in outbound direction twamp_out_mos Gauge eMOS for remote end Round-trip twamp_rt_min_delay_ns Gauge Minimum round-trip delay in nanoseconds twamp_rt_max_delay_ns Gauge Maximum round-trip delay in nanoseconds twamp_rt_avg_delay_ns Gauge Average round-trip delay in nanoseconds twamp_rt_jitter_ns Gauge Jitter of the round-trip delay in nanoseconds twamp_rt_loss Gauge Packet loss in both directions","title":"Collected Metrics"},{"location":"collectors/twamp_sender/#labels","text":"twamp_sender collector doesn't append its labels, though they can be configured via labels option.","title":"Labels"},{"location":"collectors/twamp_sender/#mos-calculation","text":"Gufo Agent automatically calculates the Mean-Opinion Score (MOS) for VoIP packet models. MOS calculated according to ITU-T G.107 recommendations using default conditions. MOS calculated for both directions: in_mos is for inbound traffic and means the voice quality expectation for the user at the TWAMP sender's side. out_mos is for outbound traffic and shows the voice quality expectation from the user at the TWAMP reflector's side.","title":"MOS Calculation"},{"location":"collectors/twamp_sender/#configuring-reflectors","text":"","title":"Configuring Reflectors"},{"location":"collectors/twamp_sender/#gufo-agent","text":"collectors : - id : TWAMP Reflector type : twamp_reflector interval : 10 listen : \"0.0.0.0\" port : 862 See twamp_reflector for configuration options details.","title":"Gufo Agent"},{"location":"collectors/twamp_sender/#juniper-junos","text":"chassis { fpc 0 { pic 0 { inline-services { bandwidth 1g; } } } } services { rpm { server { authentication-mode none; port 862; client-list Client1 { address { 10.1.0.1/24; 10.1.0.2/24; } } } } } } interfaces { si-0/0/0 { unit 0 { family inet; } unit 10 { rpm twamp-server; family inet { address 10.0.0.1/32; } } } } Where 10.0.0.1 is the reflector address, and the allowed clients are in Client1 list.","title":"Juniper JUNOS"},{"location":"collectors/twamp_sender/#cisco-ios","text":"IOS implementation demands explicit reflector port number in session request. Sender must be configured using reflector_port parameters: reflector_port : 9447 IOS configuration for reflector: ip sla server twamp exit ip sla responder twamp exit","title":"Cisco IOS"},{"location":"collectors/twamp_sender/#sample-output","text":"OpenMetrics twamp_sender_duration_ns 1981100036 1682595808 # HELP twamp_sender_in_avg_delay Average inbound delay in nanoseconds # TYPE twamp_sender_in_avg_delay gauge twamp_sender_in_avg_delay 37879 1682595808 # HELP twamp_sender_in_jitter itter of the inbound delay in nanoseconds # TYPE twamp_sender_in_jitter gauge twamp_sender_in_jitter 26857 1682595808 # HELP twamp_sender_in_loss Packet loss in inbound direction # TYPE twamp_sender_in_loss gauge twamp_sender_in_loss 0 1682595808 # HELP twamp_sender_in_max_delay Maximum inbound delay in nanoseconds # TYPE twamp_sender_in_max_delay gauge twamp_sender_in_max_delay 172580 1682595808 # HELP twamp_sender_in_min_delay Minimum inbound delay in nanoseconds # TYPE twamp_sender_in_min_delay gauge twamp_sender_in_min_delay 18112 1682595808 # HELP in_mos eMOS for local end # TYPE in_mos gauge in_mos 4.4043684 1682595808 # HELP twamp_sender_out_avg_delay Average outbound delay in nanoseconds # TYPE twamp_sender_out_avg_delay gauge twamp_sender_out_avg_delay 90004 1682595808 # HELP twamp_sender_out_jitter Jitter of the outbound delay in nanoseconds # TYPE twamp_sender_out_jitter gauge twamp_sender_out_jitter 22222 1682595808 # HELP twamp_sender_out_loss Packet loss in outbound direction # TYPE twamp_sender_out_loss gauge twamp_sender_out_loss 0 1682595808 # HELP twamp_sender_out_max_delay Maximum outbound delay in nanoseconds # TYPE twamp_sender_out_max_delay gauge twamp_sender_out_max_delay 211155 1682595808 # HELP twamp_sender_out_min_delay Minimum outbound delay in nanoseconds # TYPE twamp_sender_out_min_delay gauge twamp_sender_out_min_delay 29212 1682595808 # HELP out_mos eMOS for remote end # TYPE out_mos gauge out_mos 4.4043336 1682595808 # HELP twamp_sender_rt_avg_delay Average round-trip delay in nanoseconds # TYPE twamp_sender_rt_avg_delay gauge twamp_sender_rt_avg_delay 127884 1682595808 # HELP twamp_sender_rt_jitter Jitter of the round-trip delay in nanoseconds # TYPE twamp_sender_rt_jitter gauge twamp_sender_rt_jitter 43653 1682595808 # HELP twamp_sender_rt_loss Packet loss in both directions # TYPE twamp_sender_rt_loss gauge twamp_sender_rt_loss 0 1682595808 # HELP twamp_sender_rt_max_delay Maximum round-trip delay in nanoseconds # TYPE twamp_sender_rt_max_delay gauge twamp_sender_rt_max_delay 262171 1682595808 # HELP twamp_sender_rt_min_delay Minimum round-trip delay in nanoseconds # TYPE twamp_sender_rt_min_delay gauge twamp_sender_rt_min_delay 58006 1682595808 # HELP twamp_sender_rx_bitrate Received bitrate # TYPE twamp_sender_rx_bitrate gauge twamp_sender_rx_bitrate 80242 1682595808 # HELP twamp_sender_rx_bytes Received octets # TYPE twamp_sender_rx_bytes gauge twamp_sender_rx_bytes 19872 1682595808 # HELP twamp_sender_rx_packets Received packets # TYPE twamp_sender_rx_packets counter twamp_sender_rx_packets 100 1682595808 # HELP twamp_sender_rx_pps Received packet-per-second rate # TYPE twamp_sender_rx_pps gauge twamp_sender_rx_pps 50 1682595808 # HELP twamp_sender_tx_bitrate Transmitted bitrate # TYPE twamp_sender_tx_bitrate gauge twamp_sender_tx_bitrate 80763 1682595808 # HELP twamp_sender_tx_bytes Transmitted octets # TYPE twamp_sender_tx_bytes counter twamp_sender_tx_bytes 20000 1682595808 # HELP twamp_sender_tx_packets Transmitted packets # TYPE twamp_sender_tx_packets counter twamp_sender_tx_packets 100 1682595808 # HELP twamp_sender_tx_pps Transmitted packets-per-second rate # TYPE twamp_sender_tx_pps gauge twamp_sender_tx_pps 50 1682595808","title":"Sample Output"},{"location":"collectors/uptime/","text":"uptime collector \u00b6 uptime collects the host's system uptime. Configuration \u00b6 The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be uptime interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : Uptime type : uptime Collected Metrics \u00b6 OpenMetrics Metric Metric Type Description uptime_uptime Counter System uptime, in seconds Labels \u00b6 uptime collector doesn't append its own labels. Config Discovery \u00b6 uptime collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -uptime Sample Output \u00b6 OpenMetrics # HELP uptime_uptime System uptime # TYPE uptime_uptime counter uptime_uptime 149461 1682413628","title":"uptime"},{"location":"collectors/uptime/#uptime-collector","text":"uptime collects the host's system uptime.","title":"uptime collector"},{"location":"collectors/uptime/#configuration","text":"The common collector's configuration is: Parameter Type Default Description id String Collector's ID. Must be unique per agent instance. type String Must be uptime interval Integer agent.defaults.interval Repetition interval in seconds labels Object Additional collector-level labels relabel Array Optional relabeling rules. See Relabeling Rules for details Config example: - id : Uptime type : uptime","title":"Configuration"},{"location":"collectors/uptime/#collected-metrics","text":"OpenMetrics Metric Metric Type Description uptime_uptime Counter System uptime, in seconds","title":"Collected Metrics"},{"location":"collectors/uptime/#labels","text":"uptime collector doesn't append its own labels.","title":"Labels"},{"location":"collectors/uptime/#config-discovery","text":"uptime collector supports the Config Discovery by default. To disable a particular block use the --config-discovery-opts option: gufo-agent --config-discovery --config-discovery-opts = -uptime","title":"Config Discovery"},{"location":"collectors/uptime/#sample-output","text":"OpenMetrics # HELP uptime_uptime System uptime # TYPE uptime_uptime counter uptime_uptime 149461 1682413628","title":"Sample Output"}]}